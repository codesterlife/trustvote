(()=>{var e={564:()=>{},2634:()=>{},4098:()=>{},5066:()=>{},6160:()=>{},6833:()=>{},7199:()=>{},7564:()=>{},8408:()=>{},9130:(e,t,s)=>{"use strict";var a=s(3751),i=s(641);const n={id:"app"},l={class:"container mt-4 mb-5 pb-4"};function o(e,t,s,o,r,c){const d=(0,i.g2)("Navbar"),u=(0,i.g2)("router-view"),m=(0,i.g2)("Footer");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(d),(0,i.Lk)("main",l,[(0,i.bF)(u,null,{default:(0,i.k6)((({Component:e})=>[(0,i.bF)(a.eB,{name:"fade",mode:"out-in"},{default:(0,i.k6)((()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(e)))])),_:2},1024)])),_:1})]),(0,i.bF)(m)])}var r=s(33);const c={class:"navbar navbar-expand-lg navbar-light bg-light"},d={class:"container"},u={class:"collapse navbar-collapse",id:"navbarNav"},m={class:"navbar-nav me-auto"},h={key:0,class:"nav-item"},p={key:1,class:"nav-item"},f={key:2,class:"nav-item"},k={key:3,class:"nav-item"},v={class:"d-flex align-items-center"},b={key:0,class:"me-3"},g={key:0,class:"badge bg-success"},L={key:1,class:"badge bg-warning"};function y(e,t,s,a,n,l){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("nav",c,[(0,i.Lk)("div",d,[(0,i.bF)(o,{class:"navbar-brand d-flex align-items-center",to:"/"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-vote-yea me-2 text-primary"},null,-1),(0,i.Lk)("span",{class:"fw-bold"},"TrustVote",-1)]))),_:1}),t[13]||(t[13]=(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[(0,i.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,i.Lk)("div",u,[(0,i.Lk)("ul",m,[e.isLoggedIn?((0,i.uX)(),(0,i.CE)("li",h,[(0,i.bF)(o,{class:"nav-link",to:"/"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.eW)("Home")]))),_:1})])):(0,i.Q3)("",!0),e.isLoggedIn?((0,i.uX)(),(0,i.CE)("li",p,[(0,i.bF)(o,{class:"nav-link",to:"/elections"},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)("Elections")]))),_:1})])):(0,i.Q3)("",!0),e.isLoggedIn?((0,i.uX)(),(0,i.CE)("li",f,[(0,i.bF)(o,{class:"nav-link",to:"/profile"},{default:(0,i.k6)((()=>[t[5]||(t[5]=(0,i.Lk)("i",{class:"fas fa-user-circle me-1"},null,-1)),(0,i.eW)((0,r.v_)(e.isAdmin?"Admin":e.currentUser.first_name)+"'s Profile ",1)])),_:1})])):(0,i.Q3)("",!0),e.isAdmin?((0,i.uX)(),(0,i.CE)("li",k,[(0,i.bF)(o,{class:"nav-link",to:"/admin"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)("Admin Dashboard")]))),_:1})])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",v,[e.isLoggedIn?((0,i.uX)(),(0,i.CE)("div",b,[e.walletAddress?((0,i.uX)(),(0,i.CE)("span",g,[t[7]||(t[7]=(0,i.Lk)("i",{class:"fas fa-wallet me-1"},null,-1)),(0,i.eW)(" "+(0,r.v_)(l.truncatedWalletAddress),1)])):((0,i.uX)(),(0,i.CE)("span",L,t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-1"},null,-1),(0,i.eW)(" Wallet Not Connected ")])))])):(0,i.Q3)("",!0),e.isLoggedIn&&!e.walletAddress?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[0]||(t[0]=(...t)=>e.connectWallet&&e.connectWallet(...t)),class:"btn btn-sm wallet-btn me-2"},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-wallet me-1"},null,-1),(0,i.eW)(" Connect MetaMask ")]))):(0,i.Q3)("",!0),e.isLoggedIn?((0,i.uX)(),(0,i.CE)("button",{key:3,onClick:t[1]||(t[1]=(...t)=>e.logout&&e.logout(...t)),class:"btn btn-outline-danger"},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-sign-out-alt me-1"},null,-1),(0,i.eW)(" Logout ")]))):((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.bF)(o,{to:"/login",class:"btn btn-outline-primary me-2"},{default:(0,i.k6)((()=>t[10]||(t[10]=[(0,i.eW)("Login")]))),_:1}),(0,i.bF)(o,{to:"/register",class:"btn btn-primary"},{default:(0,i.k6)((()=>t[11]||(t[11]=[(0,i.eW)("Register")]))),_:1})],64))])])])])}var E=s(6278);const w={name:"Navbar",computed:{...(0,E.L8)(["isLoggedIn","isAdmin","walletAddress","currentUser"]),truncatedWalletAddress(){return this.walletAddress?this.walletAddress.slice(0,6)+"..."+this.walletAddress.slice(-4):""}},methods:{...(0,E.i0)(["connectWallet","logout"]),async handleConnectWallet(){try{await this.connectWallet()}catch(e){console.error("Failed to connect wallet:",e)}}}};var C=s(6262);const I=(0,C.A)(w,[["render",y],["__scopeId","data-v-72f70878"]]),_=I,T={class:"footer mt-auto py-3 bg-light"},A={class:"container"},F={class:"row"},S={class:"col-md-3"},W={class:"list-unstyled"},x={class:"row"},V={class:"col-12 text-center"},X={class:"mb-0 text-muted"};function R(e,t,s,a,n,l){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("footer",T,[(0,i.Lk)("div",A,[(0,i.Lk)("div",F,[t[3]||(t[3]=(0,i.Lk)("div",{class:"col-md-6"},[(0,i.Lk)("h5",{class:"mb-3"},"TrustVote"),(0,i.Lk)("p",{class:"text-muted"}," A decentralized electronic voting system built using Vue.js, Django, and Ethereum smart contracts. ")],-1)),(0,i.Lk)("div",S,[t[2]||(t[2]=(0,i.Lk)("h5",{class:"mb-3"},"Links",-1)),(0,i.Lk)("ul",W,[(0,i.Lk)("li",null,[(0,i.bF)(o,{to:"/",class:"text-decoration-none"},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.eW)("Home")]))),_:1})]),(0,i.Lk)("li",null,[(0,i.bF)(o,{to:"/elections",class:"text-decoration-none"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.eW)("Elections")]))),_:1})])])]),t[4]||(t[4]=(0,i.Fv)('<div class="col-md-3" data-v-39c24f72><h5 class="mb-3" data-v-39c24f72>Tech Stack</h5><ul class="list-unstyled" data-v-39c24f72><li data-v-39c24f72><i class="fab fa-vuejs me-2" data-v-39c24f72></i>Vue.js</li><li data-v-39c24f72><i class="fab fa-python me-2" data-v-39c24f72></i>Django</li><li data-v-39c24f72><i class="fab fa-ethereum me-2" data-v-39c24f72></i>Ethereum</li><li data-v-39c24f72><i class="fas fa-wallet me-2" data-v-39c24f72></i>MetaMask</li></ul></div>',1))]),t[9]||(t[9]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("div",x,[(0,i.Lk)("div",V,[(0,i.Lk)("p",X,[t[5]||(t[5]=(0,i.eW)(" ABHIRAM C ")),t[6]||(t[6]=(0,i.Lk)("br",null,null,-1)),t[7]||(t[7]=(0,i.eW)("Reg No: CUAXMCA025 ")),t[8]||(t[8]=(0,i.Lk)("br",null,null,-1)),(0,i.eW)("Â© "+(0,r.v_)(l.currentYear)+". All rights reserved. ",1)])])])])])}const D={name:"Footer",computed:{currentYear(){return(new Date).getFullYear()}}},P=(0,C.A)(D,[["render",R],["__scopeId","data-v-39c24f72"]]),M=P,N={name:"App",components:{Navbar:_,Footer:M},created(){this.checkAuthState(),this.initWeb3()},methods:{...(0,E.i0)(["checkAuthState","initWeb3"])}},O=(0,C.A)(N,[["render",o]]),U=O;var $=s(5220);const q={class:"home"},G={class:"hero-section mb-5"},B={class:"row align-items-center"},j={class:"col-lg-6"},Q={class:"d-flex flex-wrap gap-2"},K={class:"metamask-section mb-5"},H={class:"row"},J={class:"col-lg-6 offset-lg-3"};function Y(e,t,s,a,n,l){const o=(0,i.g2)("router-link"),r=(0,i.g2)("ConnectWallet");return(0,i.uX)(),(0,i.CE)("div",q,[(0,i.Lk)("section",G,[(0,i.Lk)("div",B,[(0,i.Lk)("div",j,[t[2]||(t[2]=(0,i.Lk)("h1",{class:"display-4 fw-bold mb-3"}," Secure Elections with Blockchain Technology ",-1)),t[3]||(t[3]=(0,i.Lk)("p",{class:"lead mb-4"}," TrustVote delivers trustless voting using Ethereum smart contracts for transparent, tamper-proof elections with real-time results. ",-1)),(0,i.Lk)("div",Q,[e.isLoggedIn?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(o,{key:0,to:"/register",class:"btn btn-primary btn-lg me-2"},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.Lk)("i",{class:"fas fa-user-plus me-2"},null,-1),(0,i.eW)(" Register to Vote ")]))),_:1})),e.isLoggedIn?((0,i.uX)(),(0,i.Wv)(o,{key:1,to:"/elections",class:"btn btn-outline-primary btn-lg"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-list me-2"},null,-1),(0,i.eW)(" View Elections ")]))),_:1})):(0,i.Q3)("",!0)])]),t[4]||(t[4]=(0,i.Fv)('<div class="col-lg-6 mt-5 mt-lg-0" data-v-bd425bfe><div class="blockchain-visual p-4 text-center" data-v-bd425bfe><div class="blockchain-animation" data-v-bd425bfe><i class="fas fa-cubes fa-5x text-primary mb-3" data-v-bd425bfe></i></div><div class="blockchain-tagline" data-v-bd425bfe><h3 class="mb-3" data-v-bd425bfe>Blockchain-Powered Voting</h3><p class="mb-0" data-v-bd425bfe>End-to-end verifiable elections</p></div></div></div>',1))])]),t[6]||(t[6]=(0,i.Fv)('<section class="features-section mb-5" data-v-bd425bfe><h2 class="section-title mb-4" data-v-bd425bfe>Key Features</h2><div class="row" data-v-bd425bfe><div class="col-md-4 mb-4" data-v-bd425bfe><div class="feature-card card h-100" data-v-bd425bfe><div class="card-body" data-v-bd425bfe><div class="feature-icon mb-3" data-v-bd425bfe><i class="fas fa-shield-alt fa-2x text-primary" data-v-bd425bfe></i></div><h3 class="card-title h5" data-v-bd425bfe>Secure Authentication</h3><p class="card-text" data-v-bd425bfe> Login with MetaMask wallet for secure, blockchain-based authentication. </p></div></div></div><div class="col-md-4 mb-4" data-v-bd425bfe><div class="feature-card card h-100" data-v-bd425bfe><div class="card-body" data-v-bd425bfe><div class="feature-icon mb-3" data-v-bd425bfe><i class="fas fa-check-double fa-2x text-primary" data-v-bd425bfe></i></div><h3 class="card-title h5" data-v-bd425bfe>Tamper-Proof Voting</h3><p class="card-text" data-v-bd425bfe> Votes are recorded on the Ethereum blockchain, making them immutable and verifiable. </p></div></div></div><div class="col-md-4 mb-4" data-v-bd425bfe><div class="feature-card card h-100" data-v-bd425bfe><div class="card-body" data-v-bd425bfe><div class="feature-icon mb-3" data-v-bd425bfe><i class="fas fa-chart-pie fa-2x text-primary" data-v-bd425bfe></i></div><h3 class="card-title h5" data-v-bd425bfe>Real-Time Results</h3><p class="card-text" data-v-bd425bfe> View election results in real-time once voting has ended, directly from the blockchain. </p></div></div></div></div></section><section class="how-it-works-section mb-5" data-v-bd425bfe><h2 class="section-title mb-4" data-v-bd425bfe>How It Works</h2><div class="timeline" data-v-bd425bfe><div class="timeline-item" data-v-bd425bfe><div class="timeline-icon" data-v-bd425bfe><i class="fas fa-user-plus" data-v-bd425bfe></i></div><div class="timeline-content" data-v-bd425bfe><h3 data-v-bd425bfe>Register &amp; Connect Wallet</h3><p data-v-bd425bfe> Create an account and connect your MetaMask wallet to verify your identity. </p></div></div><div class="timeline-item" data-v-bd425bfe><div class="timeline-icon" data-v-bd425bfe><i class="fas fa-check-circle" data-v-bd425bfe></i></div><div class="timeline-content" data-v-bd425bfe><h3 data-v-bd425bfe>Get Whitelisted</h3><p data-v-bd425bfe> Admins whitelists your Ethereum address for corresponding election to vote. </p></div></div><div class="timeline-item" data-v-bd425bfe><div class="timeline-icon" data-v-bd425bfe><i class="fas fa-vote-yea" data-v-bd425bfe></i></div><div class="timeline-content" data-v-bd425bfe><h3 data-v-bd425bfe>Cast Your Vote</h3><p data-v-bd425bfe> Browse active elections, review candidates, and cast your vote securely. </p></div></div><div class="timeline-item" data-v-bd425bfe><div class="timeline-icon" data-v-bd425bfe><i class="fas fa-chart-bar" data-v-bd425bfe></i></div><div class="timeline-content" data-v-bd425bfe><h3 data-v-bd425bfe>View Results</h3><p data-v-bd425bfe> Once voting has ended, view the transparent, blockchain-verified results. </p></div></div></div></section>',2)),(0,i.Lk)("section",K,[t[5]||(t[5]=(0,i.Lk)("h2",{class:"section-title mb-4"},"Connect with MetaMask",-1)),(0,i.Lk)("div",H,[(0,i.Lk)("div",J,[(0,i.bF)(r)])])])])}const z={class:"connect-wallet-container"},Z={class:"card blockchain-bg"},ee={class:"card-body"},te={key:0},se={key:0,class:"text-center py-4"},ae=["disabled"],ie={key:1,class:"wallet-connected"},ne={class:"alert alert-success d-flex align-items-center"},le={class:"network-info mt-2 mb-3"},oe={key:0,class:"mt-3"},re={key:0},ce={key:0,class:"alert alert-success"},de={class:"mt-2"},ue={key:1,class:"alert alert-info"},me={key:1},he=["disabled"],pe={key:1,class:"text-center py-4"},fe={key:2,class:"mt-3 alert alert-danger"};function ke(e,t,s,a,n,l){return(0,i.uX)(),(0,i.CE)("div",z,[(0,i.Lk)("div",Z,[(0,i.Lk)("div",ee,[t[12]||(t[12]=(0,i.Lk)("h5",{class:"card-title mb-3"},[(0,i.Lk)("i",{class:"fas fa-wallet me-2"}),(0,i.eW)(" Connect Your Wallet ")],-1)),e.hasMetaMask?((0,i.uX)(),(0,i.CE)("div",te,[e.isConnected?((0,i.uX)(),(0,i.CE)("div",ie,[(0,i.Lk)("div",ne,[t[4]||(t[4]=(0,i.Lk)("i",{class:"fas fa-check-circle me-2"},null,-1)),(0,i.Lk)("div",null,[t[3]||(t[3]=(0,i.Lk)("strong",null,"Wallet Connected:",-1)),(0,i.eW)(" "+(0,r.v_)(l.truncatedWalletAddress),1)])]),(0,i.Lk)("div",le,[(0,i.Lk)("span",{class:(0,r.C4)(["badge",l.networkBadgeClass])},(0,r.v_)(l.networkName),3)]),e.isLoggedIn?((0,i.uX)(),(0,i.CE)("div",oe,[l.isWalletLinked?((0,i.uX)(),(0,i.CE)("div",re,[t[8]||(t[8]=(0,i.Lk)("div",{class:"alert alert-info"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" Your wallet is connected and linked to your account. ")],-1)),n.whitelistedElections.length>0?((0,i.uX)(),(0,i.CE)("div",ce,[t[5]||(t[5]=(0,i.Lk)("i",{class:"fas fa-user-check me-2"},null,-1)),t[6]||(t[6]=(0,i.eW)(" Your wallet is whitelisted for the following elections: ")),(0,i.Lk)("ul",de,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.whitelistedElections,(e=>((0,i.uX)(),(0,i.CE)("li",{key:e.id},(0,r.v_)(e.election_title),1)))),128))])])):((0,i.uX)(),(0,i.CE)("div",ue,t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,i.eW)(" Your wallet is linked to your account but not yet whitelisted for voting. Please wait for an admin to approve your account. ")])))])):((0,i.uX)(),(0,i.CE)("div",me,[t[9]||(t[9]=(0,i.Lk)("div",{class:"alert alert-warning"},[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"}),(0,i.eW)(" Your wallet is connected but not linked to your account. ")],-1)),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.linkWalletToAccount&&l.linkWalletToAccount(...e)),class:"btn btn-primary",disabled:n.isLinking},[(0,i.Lk)("i",{class:(0,r.C4)(["fas me-2",n.isLinking?"fa-spinner fa-spin":"fa-link"])},null,2),(0,i.eW)(" "+(0,r.v_)(n.isLinking?"Linking...":"Link Wallet to Account"),1)],8,he)]))])):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.CE)("div",se,[t[2]||(t[2]=(0,i.Lk)("p",{class:"mb-4"}," Please connect your MetaMask wallet to participate in elections. ",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.handleConnect&&l.handleConnect(...e)),class:"btn wallet-btn btn-lg",disabled:n.isLoading},[(0,i.Lk)("i",{class:(0,r.C4)(["fas me-2",n.isLoading?"fa-spinner fa-spin":"fa-plug"])},null,2),(0,i.eW)(" "+(0,r.v_)(n.isLoading?"Connecting...":"Connect MetaMask"),1)],8,ae)]))])):((0,i.uX)(),(0,i.CE)("div",pe,t[10]||(t[10]=[(0,i.Fv)('<div class="alert alert-warning" data-v-77cd2ec8><i class="fas fa-exclamation-triangle me-2" data-v-77cd2ec8></i> MetaMask not detected! </div><p class="mt-3" data-v-77cd2ec8> Please install MetaMask browser extension to use TrustVote. </p><a href="https://metamask.io/download.html" target="_blank" class="btn btn-primary mt-2" data-v-77cd2ec8><i class="fas fa-download me-2" data-v-77cd2ec8></i> Install MetaMask </a>',3)]))),n.error?((0,i.uX)(),(0,i.CE)("div",fe,[t[11]||(t[11]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),(0,i.eW)(" "+(0,r.v_)(n.error),1)])):(0,i.Q3)("",!0)])])])}var ve=s(4335);const be=ve.A.create({baseURL:"http://192.168.1.7:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1});be.interceptors.request.use((e=>{const t=e.url.endsWith("/auth/register/")||e.url.endsWith("/auth/login/"),s=localStorage.getItem("token");return s?e.headers["Authorization"]=`Token ${s}`:t||(window.location.href="/login"),e}),(e=>Promise.reject(e))),be.interceptors.response.use((e=>e),(e=>(!e.response||401!==e.response.status||e.config.url.endsWith("/auth/register/")||e.config.url.endsWith("/auth/login/")||(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e))));const ge={register(e){return console.log("Starting registration process..."),console.log("API Register Request:",{url:"/auth/register/",data:e}),be.post("/auth/register/",e).then((e=>(e.data&&e.data.token?localStorage.setItem("token",e.data.token):console.warn("No token found in response data"),e))).catch((e=>{throw console.error("Registration error:",e),console.error("Error response:",e.response),console.error("Error data:",e.response?.data),e}))},login(e){return be.post("/auth/login/",e)},getCurrentUser(){return be.get("/auth/user/")},updateWallet(e){return be.post("/auth/update-wallet/",e)},updateProfile(e){return be.put("/auth/user/profile/",e)},getUserVotes(){return be.get("/auth/user/votes/")},getElections(){return be.get("/elections/")},getElection(e){return be.get(`/elections/${e}/`)},createElection(e){if(!e)throw new Error("Election data is required");e.positions.forEach((e=>{if(isNaN(e.positionId)||e.positionId<=0||e.positionId>Number.MAX_SAFE_INTEGER)throw new Error(`Invalid position ID: ${e.positionId}`)}));const t={title:e.title,description:e.description,start_time:new Date(1e3*e.startTime).toISOString(),end_time:new Date(1e3*e.endTime).toISOString(),positions:e.positions.map((e=>({position_id:e.positionId,title:e.title}))),status:e.status,contract_address:e.address},s=[];if(t.title||s.push("Title is required"),t.description||s.push("Description is required"),t.start_time||s.push("Start time is required"),t.end_time||s.push("End time is required"),Array.isArray(t.positions)&&t.positions.length||s.push("At least one position is required"),s.length>0)throw new Error(s.join("\n"));return be.post("/elections/",t).then((e=>e)).catch((e=>{if(console.error("Election creation failed:",{status:e.response?.status,data:e.response?.data,message:e.message}),e.response?.data)throw new Error(JSON.stringify(e.response.data));throw e}))},updateElection(e,t){return be.patch(`/elections/${e}/`,t)},updateElectionPhase(e,t){return be.patch(`/elections/${e}/phase/`,{status:t})},getCandidates(){return be.get("/candidates/")},async getParties(){return await be.get("/parties/")},async getCandidatesByElection(e){return be.get(`/elections/${e}/candidates/`)},getCandidate(e){return be.get(`/candidates/${e}/`)},createCandidate(e){const t={name:e.name,election:e.electionId,position:e.positionId,party:e.partyId,bio:e.bio,manifesto:e.manifesto,candidate_id:e.candidateId};return be.post("/candidates/",t)},updateCandidate(e,t){return be.patch(`/candidates/${e}/`,t)},getVoters(){return be.get("/voters/")},getElectoralRoll(e){return e?be.get(`/electoral-roll/?election=${e}`):be.get("/electoral-roll/")},addElectoralRollEntry(e){return be.post("/electoral-roll/",e)},updateElectoralRollEntry(e){return be.put(`/electoral-roll/${e.id}/`,e)},deleteElectoralRollEntry(e){return be.delete(`/electoral-roll/${e}/`)},checkElectoralRoll(e,t){return e&&t?be.get("/electoral-roll/verify/",{params:{election_id:e,student_id:t}}).catch((e=>(console.error("Electoral roll check failed:",e),{data:{isVerified:!1}}))):Promise.resolve({data:{isVerified:!1}})},whitelistVoter(e,t){return be.post(`/elections/${e}/whitelist/`,{wallet_address:t})},getVoterElectionWhitelist(){return be.get("/voters/election_whitelist/")},recordVote(e){return console.log("Payload sent to recordVote API:",e),be.post("/votes/",e)},async getVotesByElection(e){return be.get(`/elections/${e}/votes/`)},getResults(e){return be.get(`/elections/${e}/results/`)}},Le=ge,ye={name:"ConnectWallet",data(){return{isLoading:!1,isLinking:!1,error:null,whitelistedElections:[]}},computed:{...(0,E.L8)(["hasMetaMask","isConnected","walletAddress","networkId","isLoggedIn"]),...(0,E.aH)({currentUser:e=>e.user}),truncatedWalletAddress(){return this.walletAddress?this.walletAddress.slice(0,6)+"..."+this.walletAddress.slice(-4):""},networkName(){const e={1:"Ethereum Mainnet",3:"Ropsten Testnet",4:"Rinkeby Testnet",5:"Goerli Testnet",42:"Kovan Testnet",1337:"Local Ganache"};return e[this.networkId]||`Network ID: ${this.networkId}`},networkBadgeClass(){const e=[3,4,5,42,1337];return e.includes(this.networkId)?"bg-info":1===this.networkId?"bg-success":"bg-warning"},isWalletLinked(){return this.currentUser&&this.currentUser.wallet_address&&this.walletAddress&&this.currentUser.wallet_address.toLowerCase()===this.walletAddress.toLowerCase()},isWhitelisted(){return this.currentUser&&this.currentUser.is_whitelisted}},methods:{...(0,E.i0)(["connectWallet"]),async handleConnect(){this.isLoading=!0,this.error=null;try{await this.connectWallet()}catch(e){console.error("Failed to connect wallet:",e),this.error=e.message||"Failed to connect MetaMask. Please make sure MetaMask is unlocked."}finally{this.isLoading=!1}},async linkWalletToAccount(){if(this.isConnected&&this.walletAddress){this.isLinking=!0,this.error=null;try{await Le.updateWallet({wallet_address:this.walletAddress}),window.location.reload(!0);const e=await Le.getCurrentUser();this.$store.commit("SET_USER",e.data)}catch(e){console.error("Failed to link wallet to account:",e),this.error=e.response?.data?.error||"Failed to link wallet to your account"}finally{this.isLinking=!1}}else this.error="Please connect your MetaMask wallet first"},async loadWhitelistedElections(){try{const e=await Le.getVoterElectionWhitelist();this.whitelistedElections=e.data.filter((e=>e.is_whitelisted&&e.voter_name===this.currentUser.username))}catch(e){console.error("Error fetching whitelisted elections:",e),this.error="Failed to load whitelisted elections"}}},async created(){this.isLoggedIn&&this.isWalletLinked&&await this.loadWhitelistedElections()}},Ee=(0,C.A)(ye,[["render",ke],["__scopeId","data-v-77cd2ec8"]]),we=Ee,Ce={name:"Home",components:{ConnectWallet:we},computed:{...(0,E.L8)(["isLoggedIn"])}},Ie=(0,C.A)(Ce,[["render",Y],["__scopeId","data-v-bd425bfe"]]),_e=Ie,Te={class:"register-page"},Ae={class:"row justify-content-center"},Fe={class:"col-md-8 col-lg-6"},Se={class:"card shadow"},We={class:"card-body"},xe={key:0,class:"registration-success"},Ve={class:"text-center mt-4"},Xe={class:"mb-3"},Re={key:0,class:"invalid-feedback"},De={class:"mb-3"},Pe={key:0,class:"invalid-feedback"},Me={class:"mb-3"},Ne={key:0,class:"invalid-feedback"},Oe={class:"mb-3"},Ue={key:0,class:"invalid-feedback"},$e={class:"mb-4"},qe={key:0,class:"invalid-feedback"},Ge={class:"d-grid gap-2"},Be=["disabled"],je={class:"text-center mt-3"};function Qe(e,t,s,n,l,o){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Te,[(0,i.Lk)("div",Ae,[(0,i.Lk)("div",Fe,[(0,i.Lk)("div",Se,[t[17]||(t[17]=(0,i.Lk)("div",{class:"card-header bg-primary text-white"},[(0,i.Lk)("h3",{class:"mb-0"},"Register for TrustVote")],-1)),(0,i.Lk)("div",We,[l.registrationSuccess?((0,i.uX)(),(0,i.CE)("div",xe,[t[7]||(t[7]=(0,i.Fv)('<div class="text-center mb-4" data-v-0196c36e><i class="fas fa-check-circle text-success fa-5x" data-v-0196c36e></i><h4 class="mt-3" data-v-0196c36e>Registration Successful!</h4><p class="lead" data-v-0196c36e>Your account has been created and is pending admin approval.</p></div><div class="alert alert-info" data-v-0196c36e><p data-v-0196c36e><strong data-v-0196c36e>What happens next?</strong></p><ol data-v-0196c36e><li data-v-0196c36e>An admin will verify your details</li><li data-v-0196c36e>Once approved, you&#39;ll be able to connect your MetaMask wallet</li><li data-v-0196c36e>You can then participate in eligible elections</li></ol></div>',2)),(0,i.Lk)("div",Ve,[(0,i.bF)(c,{to:"/login",class:"btn btn-primary"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)(" Proceed to Login ")]))),_:1})])])):((0,i.uX)(),(0,i.CE)("form",{key:1,onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>o.handleRegister&&o.handleRegister(...e)),["prevent"]))},[t[15]||(t[15]=(0,i.Lk)("div",{class:"alert alert-info mb-4"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" Please provide your details to register. After registration, an admin will verify your account. ")],-1)),(0,i.Lk)("div",Xe,[t[8]||(t[8]=(0,i.Lk)("label",{for:"name",class:"form-label"},"Full Name*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.name}]),required:""},null,2),[[a.Jo,l.form.name]]),l.errors.name?((0,i.uX)(),(0,i.CE)("div",Re,(0,r.v_)(l.errors.name),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",De,[t[9]||(t[9]=(0,i.Lk)("label",{for:"studentId",class:"form-label"},"Student ID*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"studentId","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.studentId=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.studentId}]),required:""},null,2),[[a.Jo,l.form.studentId]]),l.errors.studentId?((0,i.uX)(),(0,i.CE)("div",Pe,(0,r.v_)(l.errors.studentId),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Me,[t[10]||(t[10]=(0,i.Lk)("label",{for:"email",class:"form-label"},"Email Address*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=e=>l.form.email=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.email}]),required:""},null,2),[[a.Jo,l.form.email]]),l.errors.email?((0,i.uX)(),(0,i.CE)("div",Ne,(0,r.v_)(l.errors.email),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Oe,[t[11]||(t[11]=(0,i.Lk)("label",{for:"password",class:"form-label"},"Password*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=e=>l.form.password=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.password}]),required:""},null,2),[[a.Jo,l.form.password]]),l.errors.password?((0,i.uX)(),(0,i.CE)("div",Ue,(0,r.v_)(l.errors.password),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",$e,[t[12]||(t[12]=(0,i.Lk)("label",{for:"confirmPassword",class:"form-label"},"Confirm Password*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[4]||(t[4]=e=>l.form.confirmPassword=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.confirmPassword}]),required:""},null,2),[[a.Jo,l.form.confirmPassword]]),l.errors.confirmPassword?((0,i.uX)(),(0,i.CE)("div",qe,(0,r.v_)(l.errors.confirmPassword),1)):(0,i.Q3)("",!0)]),t[16]||(t[16]=(0,i.Fv)('<div class="blockchain-info mb-4" data-v-0196c36e><div class="alert alert-secondary" data-v-0196c36e><h5 class="mb-2" data-v-0196c36e><i class="fab fa-ethereum me-2" data-v-0196c36e></i>Blockchain Integration</h5><p class="mb-0" data-v-0196c36e> After registration, you&#39;ll need to connect your MetaMask wallet to participate in elections. <br data-v-0196c36e><small data-v-0196c36e>Your wallet address will be linked to your account for secure voting.</small></p></div></div>',1)),(0,i.Lk)("div",Ge,[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.isSubmitting},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",l.isSubmitting?"fa-spinner fa-spin":"fa-user-plus"])},null,2),(0,i.eW)(" "+(0,r.v_)(l.isSubmitting?"Registering...":"Register"),1)],8,Be),(0,i.Lk)("div",je,[t[14]||(t[14]=(0,i.eW)(" Already have an account? ")),(0,i.bF)(c,{to:"/login",class:"text-decoration-none"},{default:(0,i.k6)((()=>t[13]||(t[13]=[(0,i.eW)("Login")]))),_:1})])])],32))])])])])])}const Ke={name:"Register",data(){return{form:{name:"",studentId:"",email:"",password:"",confirmPassword:""},errors:{},isSubmitting:!1,registrationSuccess:!1}},methods:{...(0,E.i0)(["register"]),validateForm(){return this.errors={},this.form.name.trim()||(this.errors.name="Name is required"),this.form.studentId.trim()||(this.errors.studentId="Student ID is required"),this.form.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.form.email)||(this.errors.email="Invalid email format"):this.errors.email="Email is required",this.form.password?this.form.password.length<8&&(this.errors.password="Password must be at least 8 characters"):this.errors.password="Password is required",this.form.password!==this.form.confirmPassword&&(this.errors.confirmPassword="Passwords do not match"),0===Object.keys(this.errors).length},async handleRegister(){if(this.validateForm()){this.isSubmitting=!0,this.errors={};try{const e=this.form.name.trim().split(" "),t=e[0],s=e.length>1?e.slice(1).join(" "):"",a={username:this.form.email.split("@")[0].toLowerCase(),email:this.form.email.toLowerCase(),password:this.form.password,confirm_password:this.form.confirmPassword,first_name:t,last_name:s||t,student_id:this.form.studentId.trim()},i=await this.$store.dispatch("register",a);i&&i.data&&(this.registrationSuccess=!0,this.$router.push("/login"))}catch(e){console.error("Registration error:",e.response?.data||e),e.response?.data?Object.entries(e.response.data).forEach((([e,t])=>{this.errors[e]=Array.isArray(t)?t[0]:t})):this.errors.general="Registration failed. Please try again."}finally{this.isSubmitting=!1}}}}},He=(0,C.A)(Ke,[["render",Qe],["__scopeId","data-v-0196c36e"]]),Je=He,Ye={class:"login-page"},ze={class:"row justify-content-center"},Ze={class:"col-md-8 col-lg-5"},et={class:"card shadow"},tt={class:"card-body"},st={key:0,class:"alert alert-danger",role:"alert"},at={class:"mb-3"},it={class:"mb-4"},nt={class:"d-grid gap-2"},lt=["disabled"],ot={class:"text-center mt-3"},rt={key:0,class:"mt-4"};function ct(e,t,s,n,l,o){const c=(0,i.g2)("router-link"),d=(0,i.g2)("ConnectWallet");return(0,i.uX)(),(0,i.CE)("div",Ye,[(0,i.Lk)("div",ze,[(0,i.Lk)("div",Ze,[(0,i.Lk)("div",et,[t[9]||(t[9]=(0,i.Lk)("div",{class:"card-header bg-primary text-white"},[(0,i.Lk)("h3",{class:"mb-0"},"Login to TrustVote")],-1)),(0,i.Lk)("div",tt,[(0,i.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>o.handleLogin&&o.handleLogin(...e)),["prevent"]))},[l.error?((0,i.uX)(),(0,i.CE)("div",st,[t[3]||(t[3]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),(0,i.eW)(" "+(0,r.v_)(l.error),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",at,[t[4]||(t[4]=(0,i.Lk)("label",{for:"email",class:"form-label"},"Email Address",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.email=e),class:"form-control",required:""},null,512),[[a.Jo,l.form.email]])]),(0,i.Lk)("div",it,[t[5]||(t[5]=(0,i.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.password=e),class:"form-control",required:""},null,512),[[a.Jo,l.form.password]])]),t[8]||(t[8]=(0,i.Fv)('<div class="mb-4" data-v-0a46d198><div class="blockchain-info alert alert-secondary" data-v-0a46d198><h5 class="mb-2" data-v-0a46d198><i class="fab fa-ethereum me-2" data-v-0a46d198></i> MetaMask Integration </h5><p class="mb-0" data-v-0a46d198> After login, you will need to connect your MetaMask wallet to participate in elections. </p></div></div>',1)),(0,i.Lk)("div",nt,[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:l.isLoading},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",l.isLoading?"fa-spinner fa-spin":"fa-sign-in-alt"])},null,2),(0,i.eW)(" "+(0,r.v_)(l.isLoading?"Logging in...":"Login"),1)],8,lt),(0,i.Lk)("div",ot,[t[7]||(t[7]=(0,i.eW)(" Don't have an account? ")),(0,i.bF)(c,{to:"/register",class:"text-decoration-none"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)("Register")]))),_:1})])])],32)])]),e.isLoggedIn?((0,i.uX)(),(0,i.CE)("div",rt,[(0,i.bF)(d)])):(0,i.Q3)("",!0)])])])}const dt={name:"Login",components:{ConnectWallet:we},data(){return{form:{email:"",password:""},error:null,isLoading:!1}},computed:{...(0,E.L8)(["isLoggedIn"])},methods:{...(0,E.i0)(["login"]),async handleLogin(){this.error=null,this.isLoading=!0;try{await this.login({email:this.form.email,password:this.form.password}),this.$router.push("/elections")}catch(e){console.error("Login error:",e),e.response&&e.response.data?e.response.data.non_field_errors?this.error=e.response.data.non_field_errors[0]:e.response.data.detail?this.error=e.response.data.detail:this.error="Invalid email or password":this.error="Login failed. Please try again."}finally{this.isLoading=!1}}}},ut=(0,C.A)(dt,[["render",ct],["__scopeId","data-v-0a46d198"]]),mt=ut,ht={class:"user-profile"},pt={class:"row"},ft={class:"col-lg-6 mb-4"},kt={class:"card profile-card"},vt={class:"card-body"},bt={key:0},gt={class:"form-group mb-3"},Lt={class:"form-group mb-3"},yt={class:"form-group mb-3"},Et={class:"form-group mb-3"},wt={class:"form-buttons mt-4"},Ct=["disabled"],It={key:1},_t={class:"profile-info"},Tt={class:"info-item"},At={class:"info-value"},Ft={class:"info-item"},St={class:"info-value"},Wt={class:"info-item"},xt={class:"info-value"},Vt={class:"info-item"},Xt={class:"info-value"},Rt={class:"info-item"},Dt={class:"info-value"},Pt={class:"mt-4"},Mt={class:"col-lg-6 mb-4"},Nt={class:"card profile-card"},Ot={class:"card-body"},Ut={class:"blockchain-status mb-4"},$t={key:0,class:"alert alert-warning"},qt={class:"mt-3"},Gt={key:1,class:"wallet-info"},Bt={class:"info-item"},jt={class:"info-value crypto-address"},Qt={class:"info-item"},Kt={class:"info-value"},Ht={class:"info-item"},Jt={class:"info-value"},Yt={class:"info-item"},zt={class:"info-value"},Zt={key:0},es={class:"mt-1"},ts={key:1},ss={key:0,class:"mt-4"},as=["disabled"],is={class:"row"},ns={class:"col-12"},ls={class:"card profile-card"},os={class:"card-body"},rs={key:0,class:"text-center py-3"},cs={key:1,class:"text-center py-3"},ds={key:2},us={class:"table-responsive"},ms={class:"table table-hover"},hs={class:"text-center"},ps={key:0,class:"badge bg-light text-black"},fs={key:1,class:"text-muted"},ks={key:0,class:"alert alert-danger mt-3"},vs={key:1,class:"alert alert-success mt-3"};function bs(e,t,s,n,l,o){const c=(0,i.g2)("ConnectWallet");return(0,i.uX)(),(0,i.CE)("div",ht,[t[40]||(t[40]=(0,i.Lk)("div",{class:"profile-header mb-4"},[(0,i.Lk)("h1",null,"Your Profile")],-1)),(0,i.Lk)("div",pt,[(0,i.Lk)("div",ft,[(0,i.Lk)("div",kt,[t[20]||(t[20]=(0,i.Lk)("div",{class:"card-header bg-primary text-white"},[(0,i.Lk)("h5",{class:"mb-0"},"Personal Information")],-1)),(0,i.Lk)("div",vt,[l.isEditing?((0,i.uX)(),(0,i.CE)("div",bt,[(0,i.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>o.saveProfile&&o.saveProfile(...e)),["prevent"]))},[(0,i.Lk)("div",gt,[t[9]||(t[9]=(0,i.Lk)("label",{for:"firstName",class:"form-label"},"First Name",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"firstName","onUpdate:modelValue":t[0]||(t[0]=e=>l.editForm.firstName=e),class:"form-control",required:""},null,512),[[a.Jo,l.editForm.firstName]])]),(0,i.Lk)("div",Lt,[t[10]||(t[10]=(0,i.Lk)("label",{for:"lastName",class:"form-label"},"Last Name",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"lastName","onUpdate:modelValue":t[1]||(t[1]=e=>l.editForm.lastName=e),class:"form-control",required:""},null,512),[[a.Jo,l.editForm.lastName]])]),(0,i.Lk)("div",yt,[t[11]||(t[11]=(0,i.Lk)("label",{for:"email",class:"form-label"},"Email",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=e=>l.editForm.email=e),class:"form-control",required:""},null,512),[[a.Jo,l.editForm.email]])]),(0,i.Lk)("div",Et,[t[12]||(t[12]=(0,i.Lk)("label",{for:"studentId",class:"form-label"},"Student ID",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"studentId","onUpdate:modelValue":t[3]||(t[3]=e=>l.editForm.studentId=e),class:"form-control",required:""},null,512),[[a.Jo,l.editForm.studentId]])]),(0,i.Lk)("div",wt,[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary me-2",disabled:l.isSaving},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",l.isSaving?"fa-spinner fa-spin":"fa-save"])},null,2),(0,i.eW)(" "+(0,r.v_)(l.isSaving?"Saving...":"Save Changes"),1)],8,Ct),(0,i.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>o.cancelEdit&&o.cancelEdit(...e)),class:"btn btn-secondary"},t[13]||(t[13]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1),(0,i.eW)(" Cancel ")]))])],32)])):((0,i.uX)(),(0,i.CE)("div",It,[(0,i.Lk)("div",_t,[(0,i.Lk)("div",Tt,[t[14]||(t[14]=(0,i.Lk)("div",{class:"info-label"},"First Name:",-1)),(0,i.Lk)("div",At,(0,r.v_)(e.currentUser.first_name),1)]),(0,i.Lk)("div",Ft,[t[15]||(t[15]=(0,i.Lk)("div",{class:"info-label"},"Last Name:",-1)),(0,i.Lk)("div",St,(0,r.v_)(e.currentUser.last_name),1)]),(0,i.Lk)("div",Wt,[t[16]||(t[16]=(0,i.Lk)("div",{class:"info-label"},"Email:",-1)),(0,i.Lk)("div",xt,(0,r.v_)(e.currentUser.email),1)]),(0,i.Lk)("div",Vt,[t[17]||(t[17]=(0,i.Lk)("div",{class:"info-label"},"Student ID:",-1)),(0,i.Lk)("div",Xt,(0,r.v_)(e.currentUser.student_id||"Not set"),1)]),(0,i.Lk)("div",Rt,[t[18]||(t[18]=(0,i.Lk)("div",{class:"info-label"},"Account Type:",-1)),(0,i.Lk)("div",Dt,[(0,i.Lk)("span",{class:(0,r.C4)(["badge",e.currentUser.is_admin?"bg-danger":"bg-success"])},(0,r.v_)(e.currentUser.is_admin?"Administrator":"Voter"),3)])])]),(0,i.Lk)("div",Pt,[(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>o.startEdit&&o.startEdit(...e)),class:"btn btn-outline-primary"},t[19]||(t[19]=[(0,i.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,i.eW)(" Edit Profile ")]))])]))])])]),(0,i.Lk)("div",Mt,[(0,i.Lk)("div",Nt,[t[31]||(t[31]=(0,i.Lk)("div",{class:"card-header bg-primary text-white"},[(0,i.Lk)("h5",{class:"mb-0"},"Blockchain Identity")],-1)),(0,i.Lk)("div",Ot,[(0,i.Lk)("div",Ut,[e.isConnected?((0,i.uX)(),(0,i.CE)("div",Gt,[(0,i.Lk)("div",Bt,[t[25]||(t[25]=(0,i.Lk)("div",{class:"info-label"},"Wallet Address:",-1)),(0,i.Lk)("div",jt,[(0,i.eW)((0,r.v_)(e.walletAddress)+" ",1),(0,i.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>o.copyWalletAddress&&o.copyWalletAddress(...e)),class:"btn btn-sm btn-outline-secondary ms-2"},t[24]||(t[24]=[(0,i.Lk)("i",{class:"far fa-copy"},null,-1)]))])]),(0,i.Lk)("div",Qt,[t[26]||(t[26]=(0,i.Lk)("div",{class:"info-label"},"Network:",-1)),(0,i.Lk)("div",Kt,[(0,i.Lk)("span",{class:(0,r.C4)(["badge",o.getNetworkBadgeClass()])},(0,r.v_)(o.getNetworkName()),3)])]),(0,i.Lk)("div",Ht,[t[27]||(t[27]=(0,i.Lk)("div",{class:"info-label"},"Account Status:",-1)),(0,i.Lk)("div",Jt,[(0,i.Lk)("span",{class:(0,r.C4)(["badge",o.isWalletLinked?"bg-success":"bg-warning"])},(0,r.v_)(o.isWalletLinked?"Linked to Account":"Not Linked"),3)])]),(0,i.Lk)("div",Yt,[t[30]||(t[30]=(0,i.Lk)("div",{class:"info-label"},"Voting Status:",-1)),(0,i.Lk)("div",zt,[l.whitelistedElections.length>0?((0,i.uX)(),(0,i.CE)("div",Zt,[t[28]||(t[28]=(0,i.Lk)("span",{class:"badge bg-success"},"Whitelisted for the following elections:",-1)),(0,i.Lk)("ul",es,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.whitelistedElections,(e=>((0,i.uX)(),(0,i.CE)("li",{key:e.election},(0,r.v_)(e.election_title),1)))),128))])])):((0,i.uX)(),(0,i.CE)("div",ts,t[29]||(t[29]=[(0,i.Lk)("span",{class:"badge bg-warning"},"Not Whitelisted for any elections",-1)])))])]),o.isWalletLinked?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ss,[(0,i.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>o.linkWallet&&o.linkWallet(...e)),class:"btn btn-primary",disabled:l.isLinking},[(0,i.Lk)("i",{class:(0,r.C4)(["fas me-1",l.isLinking?"fa-spinner fa-spin":"fa-link"])},null,2),(0,i.eW)(" "+(0,r.v_)(l.isLinking?"Linking...":"Link Wallet to Account"),1)],8,as)]))])):((0,i.uX)(),(0,i.CE)("div",$t,[t[21]||(t[21]=(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[22]||(t[22]=(0,i.Lk)("strong",null,"MetaMask not connected.",-1)),t[23]||(t[23]=(0,i.eW)(" Please connect your wallet to participate in elections. ")),(0,i.Lk)("div",qt,[(0,i.bF)(c)])]))])])])])]),(0,i.Lk)("div",is,[(0,i.Lk)("div",ns,[(0,i.Lk)("div",ls,[t[37]||(t[37]=(0,i.Lk)("div",{class:"card-header bg-primary text-white"},[(0,i.Lk)("h5",{class:"mb-0"},"Voting History")],-1)),(0,i.Lk)("div",os,[l.isLoadingHistory?((0,i.uX)(),(0,i.CE)("div",rs,t[32]||(t[32]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading your voting history...",-1)]))):0===l.votingHistory.length?((0,i.uX)(),(0,i.CE)("div",cs,t[33]||(t[33]=[(0,i.Lk)("div",{class:"alert alert-info"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" You have not participated in any elections yet. ")],-1)]))):((0,i.uX)(),(0,i.CE)("div",ds,[(0,i.Lk)("div",us,[(0,i.Lk)("table",ms,[t[36]||(t[36]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Election"),(0,i.Lk)("th",null,"Position"),(0,i.Lk)("th",null,"Candidate"),(0,i.Lk)("th",null,"Date"),(0,i.Lk)("th",{class:"text-center"},"Transaction")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.votingHistory,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,r.v_)(e.election_title),1),(0,i.Lk)("td",null,(0,r.v_)(e.position_title),1),(0,i.Lk)("td",null,(0,r.v_)(e.candidate_name),1),(0,i.Lk)("td",null,(0,r.v_)(o.formatDateTime(e.timestamp)),1),(0,i.Lk)("td",hs,[e.transaction_hash?((0,i.uX)(),(0,i.CE)("span",ps,[t[34]||(t[34]=(0,i.Lk)("i",{class:"fab fa-ethereum me-2"},null,-1)),(0,i.eW)(" "+(0,r.v_)(e.transaction_hash.slice(0,8)+"..."+e.transaction_hash.slice(-6)),1)])):((0,i.uX)(),(0,i.CE)("span",fs,t[35]||(t[35]=[(0,i.Lk)("i",{class:"fas fa-times-circle me-1"},null,-1),(0,i.eW)(" Not available ")])))])])))),128))])])])]))])])])]),l.errorMessage?((0,i.uX)(),(0,i.CE)("div",ks,[t[38]||(t[38]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),(0,i.eW)(" "+(0,r.v_)(l.errorMessage),1)])):(0,i.Q3)("",!0),l.successMessage?((0,i.uX)(),(0,i.CE)("div",vs,[t[39]||(t[39]=(0,i.Lk)("i",{class:"fas fa-check-circle me-2"},null,-1)),(0,i.eW)(" "+(0,r.v_)(l.successMessage),1)])):(0,i.Q3)("",!0)])}const gs={name:"UserProfile",components:{ConnectWallet:we},data(){return{isEditing:!1,isSaving:!1,isLinking:!1,isLoadingHistory:!1,errorMessage:"",successMessage:"",editForm:{firstName:"",lastName:"",email:"",studentId:""},votingHistory:[],whitelistedElections:[]}},computed:{...(0,E.L8)(["isConnected","walletAddress","networkId"]),...(0,E.aH)({currentUser:e=>e.user}),isWalletLinked(){return this.currentUser&&this.currentUser.wallet_address&&this.walletAddress&&this.currentUser.wallet_address.toLowerCase()===this.walletAddress.toLowerCase()}},methods:{startEdit(){this.editForm={firstName:this.currentUser.first_name,lastName:this.currentUser.last_name,email:this.currentUser.email,studentId:this.currentUser.student_id||""},this.isEditing=!0,this.clearMessages()},cancelEdit(){this.isEditing=!1,this.clearMessages()},async saveProfile(){this.clearMessages(),this.isSaving=!0;try{const e={first_name:this.editForm.firstName,last_name:this.editForm.lastName,email:this.editForm.email,student_id:this.editForm.studentId},t=await Le.updateProfile(e);this.$store.commit("SET_USER",t.data),this.successMessage="Profile updated successfully",this.isEditing=!1}catch(e){console.error("Error updating profile:",e),this.errorMessage=e.response?.data?.error||"Failed to update profile"}finally{this.isSaving=!1}},async linkWallet(){if(this.isConnected&&this.walletAddress){this.clearMessages(),this.isLinking=!0;try{await Le.updateWallet({wallet_address:this.walletAddress});const e=await Le.getCurrentUser();this.$store.commit("SET_USER",e.data),this.successMessage="Wallet linked to your account successfully"}catch(e){console.error("Failed to link wallet to account:",e),this.errorMessage=e.response?.data?.error||"Failed to link wallet to your account"}finally{this.isLinking=!1}}else this.errorMessage="Please connect your MetaMask wallet first"},getNetworkName(){const e={1:"Ethereum Mainnet",3:"Ropsten Testnet",4:"Rinkeby Testnet",5:"Goerli Testnet",42:"Kovan Testnet",1337:"Local Ganache"};return e[this.networkId]||`Network ID: ${this.networkId}`},getNetworkBadgeClass(){const e=[3,4,5,42,1337];return e.includes(this.networkId)?"bg-info":1===this.networkId?"bg-success":"bg-warning"},async loadVotingHistory(){this.isLoadingHistory=!0;try{const e=await Le.getUserVotes();this.votingHistory=e.data,console.log("Voting History: ",this.votingHistory)}catch(e){console.error("Error loading voting history:",e),this.errorMessage="Failed to load your voting history"}finally{this.isLoadingHistory=!1}},copyWalletAddress(){navigator.clipboard.writeText(this.walletAddress).then((()=>{this.successMessage="Wallet address copied to clipboard",setTimeout((()=>{"Wallet address copied to clipboard"===this.successMessage&&(this.successMessage="")}),3e3)}))},formatDateTime(e){const t=new Date(e);return t.toLocaleString()},clearMessages(){this.errorMessage="",this.successMessage=""},async loadWhitelistedElections(){try{const e=await Le.getVoterElectionWhitelist();this.whitelistedElections=e.data.filter((e=>e.is_whitelisted&&e.voter_name===this.currentUser.username))}catch(e){console.error("Error fetching whitelisted elections:",e),this.errorMessage="Failed to load whitelisted elections"}}},async created(){await this.loadVotingHistory(),await this.loadWhitelistedElections()}},Ls=(0,C.A)(gs,[["render",bs],["__scopeId","data-v-0b72123a"]]),ys=Ls,Es={class:"elections-page"},ws={class:"d-flex justify-content-between align-items-center mb-4"},Cs={key:0,class:"alert alert-warning d-flex align-items-center"},Is={key:0,class:"mb-5"},_s={class:"mb-5"},Ts={class:"d-flex justify-content-between align-items-center mb-3"},As={class:"input-group w-auto"},Fs={key:0,class:"text-center py-5"},Ss={key:1,class:"alert alert-info"},Ws={key:2,class:"row"},xs={key:0,class:"text-center py-5"},Vs={key:1,class:"alert alert-info"},Xs={key:2,class:"row"};function Rs(e,t,s,n,l,o){const r=(0,i.g2)("ConnectWallet"),c=(0,i.g2)("ElectionCard");return(0,i.uX)(),(0,i.CE)("div",Es,[(0,i.Lk)("div",ws,[t[2]||(t[2]=(0,i.Lk)("h1",null,"Elections",-1)),e.isConnected?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Cs,t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1),(0,i.Lk)("div",null,[(0,i.Lk)("strong",null,"Please connect your MetaMask wallet"),(0,i.eW)(" to participate in voting. ")],-1)])))]),e.isConnected?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Is,[(0,i.bF)(r)])),(0,i.Lk)("section",_s,[(0,i.Lk)("div",Ts,[t[4]||(t[4]=(0,i.Lk)("h2",null,"Active Elections",-1)),(0,i.Lk)("div",As,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",placeholder:"Search elections...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e)},null,512),[[a.Jo,l.searchTerm]]),t[3]||(t[3]=(0,i.Lk)("button",{class:"btn btn-outline-secondary"},[(0,i.Lk)("i",{class:"fas fa-search"})],-1))])]),l.isLoading?((0,i.uX)(),(0,i.CE)("div",Fs,t[5]||(t[5]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading elections...",-1)]))):0===o.filteredActiveElections.length?((0,i.uX)(),(0,i.CE)("div",Ss,t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,i.eW)(" No active elections found. ")]))):((0,i.uX)(),(0,i.CE)("div",Ws,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredActiveElections,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.electionId,class:"col-md-6 col-lg-4"},[(0,i.bF)(c,{election:e},null,8,["election"])])))),128))]))]),(0,i.Lk)("section",null,[t[9]||(t[9]=(0,i.Lk)("h2",{class:"mb-3"},"Past Elections",-1)),l.isLoading?((0,i.uX)(),(0,i.CE)("div",xs,t[7]||(t[7]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading past elections...",-1)]))):0===o.filteredPastElections.length?((0,i.uX)(),(0,i.CE)("div",Vs,t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,i.eW)(" No past elections found. ")]))):((0,i.uX)(),(0,i.CE)("div",Xs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredPastElections,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.electionId,class:"col-md-6 col-lg-4"},[(0,i.bF)(c,{election:e},null,8,["election"])])))),128))]))])])}const Ds={class:"card election-card mb-4"},Ps={class:"card-body"},Ms={class:"card-title"},Ns={class:"card-text"},Os={class:"election-details mb-3"},Us={class:"detail-item"},$s={class:"detail-item"},qs={class:"detail-item"},Gs={key:0,class:"mb-3 blockchain-info"},Bs={class:"text-muted d-block mb-1"},js={class:"d-flex justify-content-between"};function Qs(e,t,s,a,n,l){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Ds,[(0,i.Lk)("div",{class:(0,r.C4)(["status-badge",l.statusClass])},(0,r.v_)(s.election.status),3),(0,i.Lk)("div",Ps,[(0,i.Lk)("h5",Ms,(0,r.v_)(s.election.title),1),(0,i.Lk)("p",Ns,(0,r.v_)(s.election.description),1),(0,i.Lk)("div",Os,[(0,i.Lk)("div",Us,[t[0]||(t[0]=(0,i.Lk)("i",{class:"far fa-calendar-alt me-2"},null,-1)),(0,i.Lk)("span",null,"Start: "+(0,r.v_)(l.formatDateTime(s.election.startTime)),1)]),(0,i.Lk)("div",$s,[t[1]||(t[1]=(0,i.Lk)("i",{class:"far fa-calendar-check me-2"},null,-1)),(0,i.Lk)("span",null,"End: "+(0,r.v_)(l.formatDateTime(s.election.endTime)),1)]),(0,i.Lk)("div",qs,[t[2]||(t[2]=(0,i.Lk)("i",{class:"fas fa-users me-2"},null,-1)),(0,i.Lk)("span",null,(0,r.v_)(l.positionsCount)+" Position"+(0,r.v_)(1!==l.positionsCount?"s":""),1)])]),l.isBlockchainLinked?((0,i.uX)(),(0,i.CE)("div",Gs,[(0,i.Lk)("small",Bs,[t[3]||(t[3]=(0,i.Lk)("i",{class:"fab fa-ethereum me-1"},null,-1)),(0,i.eW)(" Contract: "+(0,r.v_)(l.truncatedContractAddress),1)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",js,[(0,i.bF)(o,{to:`/elections/${s.election.electionId}`,class:"btn btn-outline-primary mx-1"},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-info-circle"},null,-1),(0,i.eW)(" Details ")]))),_:1},8,["to"]),(0,i.Lk)("div",null,[l.canVote?((0,i.uX)(),(0,i.Wv)(o,{key:0,to:`/elections/${s.election.electionId}/vote`,class:"btn btn-primary mx-1"},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-vote-yea"},null,-1),(0,i.eW)(" Vote ")]))),_:1},8,["to"])):(0,i.Q3)("",!0),(0,i.bF)(o,{to:`/elections/${s.election.electionId}/results`,class:"btn btn-outline-secondary mx-1"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-chart-pie"},null,-1),(0,i.eW)(" Results ")]))),_:1},8,["to"]),(0,i.bF)(o,{to:`/elections/${s.election.electionId}/electoral-roll`,class:"btn btn-outline-info mx-1"},{default:(0,i.k6)((()=>t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-list"},null,-1),(0,i.eW)(" Electoral Roll ")]))),_:1},8,["to"])])])])])}const Ks={name:"ElectionCard",props:{election:{type:Object,required:!0}},computed:{positionsCount(){return this.election.positions?this.election.positions.length:0},isBlockchainLinked(){return!!this.election.contract_address},truncatedContractAddress(){return this.election.contract_address?this.election.contract_address.slice(0,6)+"..."+this.election.contract_address.slice(-4):""},statusClass(){const e={Init:"status-init",Voting:"status-voting",Closed:"status-closed"};return e[this.election.status]||"status-init"},canVote(){return"Voting"===this.election.status&&new Date(this.election.startTime)<=new Date&&new Date(this.election.endTime)>=new Date}},methods:{formatDateTime(e){const t=new Date(e);return t.toLocaleString()}}},Hs=(0,C.A)(Ks,[["render",Qs],["__scopeId","data-v-152e8734"]]),Js=Hs,Ys={name:"Elections",components:{ElectionCard:Js,ConnectWallet:we},data(){return{searchTerm:"",isLoading:!1}},computed:{...(0,E.L8)(["allElections","activeElections","pastElections","isConnected"]),filteredActiveElections(){if(!this.searchTerm)return this.activeElections;const e=this.searchTerm.toLowerCase();return this.activeElections.filter((t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)))},filteredPastElections(){if(!this.searchTerm)return this.pastElections;const e=this.searchTerm.toLowerCase();return this.pastElections.filter((t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)))}},methods:{...(0,E.i0)(["fetchElections"])},async created(){this.isLoading=!0;try{await this.fetchElections()}catch(e){console.error("Error fetching elections:",e)}finally{this.isLoading=!1}}},zs=(0,C.A)(Ys,[["render",Rs],["__scopeId","data-v-69332834"]]),Zs=zs,ea={class:"election-detail"},ta={key:0,class:"text-center py-5"},sa={key:1,class:"alert alert-danger"},aa={key:2},ia={class:"election-header mb-4"},na={class:"d-flex justify-content-between align-items-start"},la={class:"lead mb-4"},oa={class:"row election-meta mb-4"},ra={class:"col-md-6"},ca={class:"meta-item"},da={class:"meta-item"},ua={key:0,class:"meta-item"},ma={href:"#",target:"_blank",class:"contract-link"},ha={class:"col-md-6"},pa={class:"meta-item"},fa={key:0,class:"election-timer meta-item"},ka={class:"election-actions mb-5"},va={class:"position-header mb-3"},ba={class:"row"},ga={key:0,class:"parties-section mb-5"},La={class:"row"},ya={class:"card party-card h-100"},Ea={class:"card-body text-center"},wa={class:"party-logo mb-6"},Ca=["src"],Ia={class:"card-title"};function _a(e,t,s,a,n,l){const o=(0,i.g2)("router-link"),c=(0,i.g2)("CandidateCard");return(0,i.uX)(),(0,i.CE)("div",ea,[n.isLoading?((0,i.uX)(),(0,i.CE)("div",ta,t[1]||(t[1]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading election details...",-1)]))):l.election?((0,i.uX)(),(0,i.CE)("div",aa,[(0,i.Lk)("div",ia,[(0,i.Lk)("div",na,[(0,i.Lk)("h1",null,(0,r.v_)(l.election.title),1),(0,i.Lk)("span",{class:(0,r.C4)(["status-badge",l.statusClass])},(0,r.v_)(l.election.status),3)]),(0,i.Lk)("p",la,(0,r.v_)(l.election.description),1),(0,i.Lk)("div",oa,[(0,i.Lk)("div",ra,[(0,i.Lk)("div",ca,[t[3]||(t[3]=(0,i.Lk)("i",{class:"far fa-calendar-alt me-2"},null,-1)),t[4]||(t[4]=(0,i.Lk)("strong",null,"Start:",-1)),(0,i.eW)(" "+(0,r.v_)(l.formatDateTime(l.election.startTime)),1)]),(0,i.Lk)("div",da,[t[5]||(t[5]=(0,i.Lk)("i",{class:"far fa-calendar-check me-2"},null,-1)),t[6]||(t[6]=(0,i.Lk)("strong",null,"End:",-1)),(0,i.eW)(" "+(0,r.v_)(l.formatDateTime(l.election.endTime)),1)]),l.election.contractAddress?((0,i.uX)(),(0,i.CE)("div",ua,[t[7]||(t[7]=(0,i.Lk)("i",{class:"fab fa-ethereum me-2"},null,-1)),t[8]||(t[8]=(0,i.Lk)("strong",null,"Contract:",-1)),(0,i.Lk)("a",ma,(0,r.v_)(l.truncatedContractAddress),1)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",ha,[(0,i.Lk)("div",pa,[t[9]||(t[9]=(0,i.Lk)("i",{class:"fas fa-users me-2"},null,-1)),t[10]||(t[10]=(0,i.Lk)("strong",null,"Positions:",-1)),(0,i.eW)(" "+(0,r.v_)(l.election.positions?l.election.positions.length:0),1)]),t[12]||(t[12]=(0,i.Lk)("div",{class:"meta-item"},[(0,i.Lk)("i",{class:"fas fa-user-check me-2"}),(0,i.Lk)("strong",null,"Eligibility:"),(0,i.eW)(" Registered and whitelisted voters ")],-1)),"Voting"===l.election.status?((0,i.uX)(),(0,i.CE)("div",fa,[t[11]||(t[11]=(0,i.Lk)("i",{class:"fas fa-hourglass-half me-2"},null,-1)),(0,i.Lk)("strong",null,(0,r.v_)(n.timerLabel)+":",1),(0,i.eW)(" "+(0,r.v_)(n.timerValue),1)])):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",ka,[l.canVote?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>l.goToVote&&l.goToVote(...e)),class:"btn btn-primary btn-lg me-2"},t[13]||(t[13]=[(0,i.Lk)("i",{class:"fas fa-vote-yea me-2"},null,-1),(0,i.eW)(" Vote Now ")]))):(0,i.Q3)("",!0),(0,i.bF)(o,{to:`/elections/${n.electionId}/results`,class:"btn btn-outline-secondary btn-lg"},{default:(0,i.k6)((()=>t[14]||(t[14]=[(0,i.Lk)("i",{class:"fas fa-chart-pie me-2"},null,-1),(0,i.eW)(" View Results ")]))),_:1},8,["to"])])]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.election.positions,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.positionId,class:"position-section mb-5"},[(0,i.Lk)("div",va,[(0,i.Lk)("h2",null,(0,r.v_)(e.title),1),t[15]||(t[15]=(0,i.Lk)("p",{class:"text-muted"},"Select candidates for this position",-1))]),(0,i.Lk)("div",ba,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.candidates,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"col-md-6 col-lg-4 mb-4"},[(0,i.bF)(c,{candidate:l.getCandidateById(e),showActions:!1},null,8,["candidate"])])))),128))])])))),128)),l.election.parties&&l.election.parties.length>0?((0,i.uX)(),(0,i.CE)("div",ga,[t[19]||(t[19]=(0,i.Lk)("h2",{class:"mb-4"},"Participating Parties",-1)),(0,i.Lk)("div",La,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.election.parties,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.partyId,class:"col-md-3 mb-4"},[(0,i.Lk)("div",ya,[(0,i.Lk)("div",Ea,[(0,i.Lk)("div",wa,[(0,i.Lk)("img",{src:e.logo_url,alt:"",width:"64px",height:"64px"},null,8,Ca)]),t[16]||(t[16]=(0,i.Lk)("br",null,null,-1)),t[17]||(t[17]=(0,i.Lk)("br",null,null,-1)),t[18]||(t[18]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("h5",Ia,(0,r.v_)(e.name),1)])])])))),128))])])):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.CE)("div",sa,t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1),(0,i.eW)(" Election not found or has been removed. ")])))])}const Ta={class:"card candidate-card mb-4"},Aa={class:"party-badge"},Fa={class:"card-body d-flex"},Sa={class:"candidate-info"},Wa={class:"card-title"},xa={class:"position-title mb-2"},Va={class:"card-text"},Xa={key:0,class:"d-flex justify-content-between mt-3"},Ra=["id"],Da={class:"modal-dialog"},Pa={class:"modal-content"},Ma={class:"modal-header"},Na={class:"modal-title"},Oa={class:"modal-body"};function Ua(e,t,s,a,n,l){return(0,i.uX)(),(0,i.CE)("div",Ta,[(0,i.Lk)("div",Aa,(0,r.v_)(s.candidate.party_name),1),(0,i.Lk)("div",Fa,[(0,i.Lk)("div",Sa,[(0,i.Lk)("h5",Wa,(0,r.v_)(s.candidate.name),1),(0,i.Lk)("p",xa,(0,r.v_)(s.candidate.party_name.toUpperCase()),1),(0,i.Lk)("p",Va,(0,r.v_)(s.candidate.bio),1),s.showActions?((0,i.uX)(),(0,i.CE)("div",Xa,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>l.showManifesto(s.candidate.id)),class:"btn btn-sm btn-outline-secondary"},t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-file-alt me-1"},null,-1),(0,i.eW)(" View Manifesto ")])),s.canVote?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[1]||(t[1]=t=>e.$emit("vote",s.candidate)),class:"btn btn-sm btn-primary"},t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-vote-yea me-1"},null,-1),(0,i.eW)(" Vote ")]))):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",{class:"modal fade",id:"manifestoModal-"+s.candidate.id,tabindex:"-1","aria-hidden":"true"},[(0,i.Lk)("div",Da,[(0,i.Lk)("div",Pa,[(0,i.Lk)("div",Ma,[(0,i.Lk)("h5",Na,(0,r.v_)(s.candidate.name)+" - Manifesto",1),t[4]||(t[4]=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,i.Lk)("div",Oa,[(0,i.Lk)("p",null,(0,r.v_)(s.candidate.manifesto),1)]),t[5]||(t[5]=(0,i.Lk)("div",{class:"modal-footer"},[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])],8,Ra)])}const $a={name:"CandidateCard",props:{candidate:{type:Object,required:!0},showActions:{type:Boolean,default:!0},canVote:{type:Boolean,default:!1}},methods:{showManifesto(e){const t=new bootstrap.Modal(document.getElementById(`manifestoModal-${e}`));t.show()}}},qa=(0,C.A)($a,[["render",Ua],["__scopeId","data-v-1b2c7d6a"]]),Ga=qa,Ba={name:"ElectionDetail",components:{CandidateCard:Ga},data(){return{electionId:null,isLoading:!0,timer:null,timerValue:"",timerLabel:""}},computed:{...(0,E.L8)(["currentElection","candidates","networkId"]),election(){return this.currentElection},canVote(){return!!this.election&&("Voting"===this.election.status&&new Date(this.election.startTime)<=new Date&&new Date(this.election.endTime)>=new Date)},statusClass(){const e={Init:"status-init",Voting:"status-voting",Closed:"status-closed"};return this.election?e[this.election.status]||"status-init":""},truncatedContractAddress(){return this.election&&this.election.contractAddress?this.election.contractAddress.slice(0,8)+"..."+this.election.contractAddress.slice(-6):""}},methods:{...(0,E.i0)(["fetchElection"]),formatDateTime(e){const t=new Date(e);return t.toLocaleString()},getCandidateById(e){const t=this.candidates.find((t=>t.candidate_id===e));return t||{name:"Unknown Candidate",bio:"Candidate information not available"}},goToVote(){this.$router.push(`/elections/${this.electionId}/vote`)},updateTimer(){if(!this.election)return;const e=new Date;let t,s;if(e<new Date(this.election.startTime))t=new Date(this.election.startTime),s="Starts in";else{if(!(e<new Date(this.election.endTime)))return this.timerValue="Election has ended",void(this.timerLabel="Status");t=new Date(this.election.endTime),s="Ends in"}const a=t-e;if(a<=0)return void window.location.reload();const i=Math.floor(a/864e5),n=Math.floor(a%864e5/36e5),l=Math.floor(a%36e5/6e4),o=Math.floor(a%6e4/1e3);this.timerValue=`${i}d ${n}h ${l}m ${o}s`,this.timerLabel=s}},async created(){this.electionId=parseInt(this.$route.params.id);try{await this.fetchElection(this.electionId),this.isLoading=!1,this.updateTimer(),this.timer=setInterval(this.updateTimer,1e3)}catch(e){console.error("Error fetching election details:",e),this.isLoading=!1}},beforeUnmount(){this.timer&&clearInterval(this.timer)}},ja=(0,C.A)(Ba,[["render",_a],["__scopeId","data-v-7465df88"]]),Qa=ja,Ka={class:"electoral-roll-view"},Ha={class:"d-flex justify-content-between align-items-center mb-4"},Ja={class:"card"},Ya={class:"card-body"},za={key:0,class:"text-center py-4"},Za={key:1,class:"alert alert-info"},ei={key:2},ti={class:"table-responsive"},si={class:"table table-hover"};function ai(e,t,s,a,n,l){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Ka,[(0,i.Lk)("div",Ha,[(0,i.Lk)("h2",null,"Electoral Roll for "+(0,r.v_)(a.election?.title||"Loading..."),1),(0,i.bF)(o,{to:`/elections/${e.$route.params.id}`,class:"btn btn-outline-secondary"},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.Lk)("i",{class:"fas fa-arrow-left me-2"},null,-1),(0,i.eW)("Back to Election ")]))),_:1},8,["to"])]),(0,i.Lk)("div",Ja,[(0,i.Lk)("div",Ya,[a.isLoading?((0,i.uX)(),(0,i.CE)("div",za,t[1]||(t[1]=[(0,i.Lk)("div",{class:"spinner-border text-primary"},null,-1),(0,i.Lk)("p",{class:"mt-2"},"Loading electoral roll...",-1)]))):a.electoralRoll.length?((0,i.uX)(),(0,i.CE)("div",ei,[(0,i.Lk)("div",ti,[(0,i.Lk)("table",si,[t[2]||(t[2]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Student ID"),(0,i.Lk)("th",null,"Name")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.electoralRoll,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,r.v_)(e.student_id),1),(0,i.Lk)("td",null,(0,r.v_)(e.first_name)+" "+(0,r.v_)(e.last_name),1)])))),128))])])])])):((0,i.uX)(),(0,i.CE)("div",Za," No entries found in the electoral roll for this election. "))])])])}var ii=s(953);const ni={name:"ElectoralRoll",setup(){const e=(0,$.lq)(),t=(0,ii.KR)([]),s=(0,ii.KR)(null),a=(0,ii.KR)(!0),n=async()=>{try{const[a,i]=await Promise.all([Le.getElection(e.params.id),Le.getElectoralRoll(e.params.id)]);s.value=a.data,t.value=i.data}catch(i){console.error("Error loading data:",i)}finally{a.value=!1}},l=e=>new Date(e).toLocaleDateString();return(0,i.sV)(n),{electoralRoll:t,election:s,isLoading:a,formatDate:l}}},li=(0,C.A)(ni,[["render",ai]]),oi=li,ri={class:"voting-page"},ci={key:0,class:"text-center py-5"},di={key:1,class:"alert alert-danger"},ui={key:2,class:"alert alert-warning mb-4"},mi={class:"mt-3"},hi={key:3,class:"alert alert-info"},pi={key:0,class:"mt-2"},fi={key:1,class:"mt-2"},ki={key:4,class:"vote-confirmation-container"},vi={key:5},bi={class:"voting-header mb-4"},gi={class:"d-flex justify-content-between align-items-start"},Li={class:"timer-badge"},yi={class:"blockchain-info-card mb-4"},Ei={class:"card"},wi={class:"card-body"},Ci={class:"wallet-info"},Ii={key:0,class:"alert alert-info mb-4"},_i={key:1,class:"alert alert-danger mb-4"},Ti={class:"position-header mb-3"},Ai={class:"card voting-card"},Fi={class:"card-body"},Si={class:"row"},Wi={key:0,class:"selected-candidate-info mt-3"},xi={class:"alert alert-success"},Vi=["onClick","disabled"],Xi={key:1,class:"already-voted mt-3"};function Ri(e,t,s,a,n,l){const o=(0,i.g2)("ConnectWallet"),c=(0,i.g2)("router-link"),d=(0,i.g2)("VoteConfirmation"),u=(0,i.g2)("CandidateCard");return(0,i.uX)(),(0,i.CE)("div",ri,[n.isLoading?((0,i.uX)(),(0,i.CE)("div",ci,t[0]||(t[0]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading voting information...",-1)]))):l.election?e.isConnected?"Voting"!==l.election.status?((0,i.uX)(),(0,i.CE)("div",hi,[t[6]||(t[6]=(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1)),t[7]||(t[7]=(0,i.eW)(" This election is not currently open for voting. ")),"Init"===l.election.status?((0,i.uX)(),(0,i.CE)("div",pi," Voting has not started yet. It will begin on "+(0,r.v_)(l.formatDateTime(l.election.startTime))+". ",1)):"Closed"===l.election.status?((0,i.uX)(),(0,i.CE)("div",fi,[(0,i.eW)(" Voting has ended on "+(0,r.v_)(l.formatDateTime(l.election.endTime))+". ",1),(0,i.bF)(c,{to:`/elections/${n.electionId}/results`,class:"btn btn-primary mt-3"},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.eW)(" View Results ")]))),_:1},8,["to"])])):(0,i.Q3)("",!0)])):n.showConfirmation?((0,i.uX)(),(0,i.CE)("div",ki,[(0,i.bF)(d,{transaction:n.confirmationData.transaction,election:l.election,positionId:n.confirmationData.positionId,candidateId:n.confirmationData.candidateId,networkId:e.networkId},null,8,["transaction","election","positionId","candidateId","networkId"])])):((0,i.uX)(),(0,i.CE)("div",vi,[(0,i.Lk)("div",bi,[(0,i.Lk)("div",gi,[(0,i.Lk)("div",null,[(0,i.Lk)("h1",null,"Vote: "+(0,r.v_)(l.election.title),1),t[8]||(t[8]=(0,i.Lk)("p",{class:"lead"},"Cast your vote for the following positions",-1))]),(0,i.Lk)("span",Li,[t[9]||(t[9]=(0,i.Lk)("i",{class:"fas fa-hourglass-half me-2"},null,-1)),(0,i.eW)(" Ends in: "+(0,r.v_)(n.timeRemaining),1)])])]),(0,i.Lk)("div",yi,[(0,i.Lk)("div",Ei,[(0,i.Lk)("div",wi,[t[11]||(t[11]=(0,i.Lk)("h5",{class:"card-title"},[(0,i.Lk)("i",{class:"fab fa-ethereum me-2"}),(0,i.eW)(" Blockchain Voting Information ")],-1)),t[12]||(t[12]=(0,i.Lk)("p",null," Your vote will be recorded on the Ethereum blockchain and cannot be altered after submission. Each position requires a separate blockchain transaction. ",-1)),(0,i.Lk)("div",Ci,[t[10]||(t[10]=(0,i.Lk)("strong",null,"Your wallet:",-1)),(0,i.eW)(" "+(0,r.v_)(l.truncatedWalletAddress),1)])])])]),n.transactionInProgress?((0,i.uX)(),(0,i.CE)("div",Ii,t[13]||(t[13]=[(0,i.Lk)("div",{class:"d-flex align-items-center"},[(0,i.Lk)("div",{class:"spinner-border spinner-border-sm me-2",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,i.Lk)("div",null,[(0,i.Lk)("strong",null,"Transaction in progress..."),(0,i.Lk)("p",{class:"mb-0"},"Please confirm the transaction in MetaMask and wait for it to be processed.")])],-1)]))):(0,i.Q3)("",!0),n.errorMessage?((0,i.uX)(),(0,i.CE)("div",_i,[t[14]||(t[14]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),t[15]||(t[15]=(0,i.Lk)("strong",null,"Error:",-1)),(0,i.eW)(" "+(0,r.v_)(n.errorMessage),1)])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.election.positions,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"position-section mb-5"},[(0,i.Lk)("div",Ti,[(0,i.Lk)("h2",null,(0,r.v_)(e.title),1),t[16]||(t[16]=(0,i.Lk)("p",{class:"text-muted"},"Select one candidate for this position",-1))]),(0,i.Lk)("div",Ai,[(0,i.Lk)("div",Fi,[(0,i.Lk)("div",Si,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.candidates,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"col-md-6 col-lg-4 mb-4"},[(0,i.bF)(u,{candidate:l.getCandidateById(t),showActions:!0,canVote:!l.hasVoted(e.id),onVote:s=>l.selectCandidate(e.id,t)},null,8,["candidate","canVote","onVote"])])))),128))]),n.selectedCandidates[e.id]?((0,i.uX)(),(0,i.CE)("div",Wi,[(0,i.Lk)("div",xi,[t[18]||(t[18]=(0,i.Lk)("strong",null,"Selected:",-1)),(0,i.eW)(" "+(0,r.v_)(l.getCandidateName(n.selectedCandidates[e.id]))+" ",1),(0,i.Lk)("button",{onClick:t=>l.castVoteForPosition(e.id),class:"btn btn-success ms-3",disabled:n.transactionInProgress},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",n.transactionInProgress?"fa-spinner fa-spin":"fa-check"])},null,2),t[17]||(t[17]=(0,i.eW)(" Confirm Vote "))],8,Vi)])])):(0,i.Q3)("",!0),l.hasVoted(e.id)?((0,i.uX)(),(0,i.CE)("div",Xi,t[19]||(t[19]=[(0,i.Lk)("div",{class:"alert alert-secondary"},[(0,i.Lk)("i",{class:"fas fa-check-circle me-2"}),(0,i.eW)(" You have already voted for this position. ")],-1)]))):(0,i.Q3)("",!0)])])])))),128))])):((0,i.uX)(),(0,i.CE)("div",ui,[t[2]||(t[2]=(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[3]||(t[3]=(0,i.Lk)("strong",null,"MetaMask not connected.",-1)),t[4]||(t[4]=(0,i.eW)(" Please connect your wallet to vote. ")),(0,i.Lk)("div",mi,[(0,i.bF)(o)])])):((0,i.uX)(),(0,i.CE)("div",di,t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1),(0,i.eW)(" Election not found or has been removed. ")])))])}const Di={class:"vote-confirmation"},Pi={class:"card vote-success"},Mi={class:"card-body text-center"},Ni={class:"transaction-details mt-4 mb-4"},Oi={class:"alert alert-light"},Ui={class:"transaction-hash mb-0"},$i={class:"d-flex justify-content-between mt-3"},qi={class:"alert alert-secondary p-2 mt-2"},Gi={class:"mb-1"},Bi={class:"actions mt-4"};function ji(e,t,s,a,n,l){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Di,[(0,i.Lk)("div",Pi,[(0,i.Lk)("div",Mi,[t[4]||(t[4]=(0,i.Lk)("div",{class:"success-icon mb-4"},[(0,i.Lk)("i",{class:"fas fa-check-circle fa-5x text-success"})],-1)),t[5]||(t[5]=(0,i.Lk)("h3",{class:"mb-3"},"Vote Cast Successfully!",-1)),t[6]||(t[6]=(0,i.Lk)("p",{class:"lead"},"Your vote has been recorded on the blockchain and cannot be altered.",-1)),(0,i.Lk)("div",Ni,[(0,i.Lk)("div",Oi,[t[0]||(t[0]=(0,i.Lk)("p",{class:"mb-1"},[(0,i.Lk)("strong",null,"Transaction Hash:")],-1)),(0,i.Lk)("p",Ui,(0,r.v_)(s.transaction.transactionHash),1)]),(0,i.Lk)("div",$i,[(0,i.Lk)("div",null,[t[1]||(t[1]=(0,i.Lk)("p",{class:"mb-1"},[(0,i.Lk)("strong",null,"Election:")],-1)),(0,i.Lk)("p",null,(0,r.v_)(s.election.title),1)]),(0,i.Lk)("div",null,[t[2]||(t[2]=(0,i.Lk)("p",{class:"mb-1"},[(0,i.Lk)("strong",null,"Position:")],-1)),(0,i.Lk)("p",null,(0,r.v_)(l.positionTitle),1)])]),(0,i.Lk)("div",qi,[(0,i.Lk)("p",Gi,[(0,i.Lk)("small",null,"Timestamp: "+(0,r.v_)(l.transactionTime),1)])])]),(0,i.Lk)("div",Bi,[(0,i.bF)(o,{to:"/elections",class:"btn btn-outline-primary me-2"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-list me-1"},null,-1),(0,i.eW)(" Back to Elections ")]))),_:1})])])])])}const Qi={name:"VoteConfirmation",props:{transaction:{type:Object,required:!0},election:{type:Object,required:!0},positionId:{type:Number,required:!0},candidateId:{type:Number,required:!0},networkId:{type:Number,required:!0}},computed:{positionTitle(){if(!this.election.positions)return"Unknown Position";const e=this.election.positions.find((e=>e.id===this.positionId));return e?e.title:"Unknown Position"},transactionTime(){return(new Date).toLocaleString()}}},Ki=(0,C.A)(Qi,[["render",ji],["__scopeId","data-v-41eb85dd"]]),Hi=Ki,Ji={name:"VotingPage",components:{CandidateCard:Ga,ConnectWallet:we,VoteConfirmation:Hi},data(){return{electionId:null,isLoading:!0,selectedCandidates:{},votedPositions:new Set,transactionInProgress:!1,errorMessage:"",timeRemaining:"",timerInterval:null,showConfirmation:!1,confirmationData:{transaction:null,positionId:null,candidateId:null}}},computed:{...(0,E.L8)(["currentElection","candidates","isConnected","walletAddress","networkId"]),election(){return this.currentElection},truncatedWalletAddress(){return this.walletAddress?this.walletAddress.slice(0,6)+"..."+this.walletAddress.slice(-4):""}},methods:{...(0,E.i0)(["fetchElection","castVote"]),formatDateTime(e){const t=new Date(e);return t.toLocaleString()},getCandidateById(e){const t=this.candidates.find((t=>t.candidate_id===e));return t||{name:"Unknown Candidate",bio:"Candidate information not available"}},getCandidateName(e){const t=this.getCandidateById(e);return t?t.name:"Unknown Candidate"},selectCandidate(e,t){this.hasVoted(e)||(this.selectedCandidates={...this.selectedCandidates,[e]:t},console.log("postion ID",e),console.log("candidate ID",t))},hasVoted(e){return this.votedPositions.has(e)},updateTimeRemaining(){if(!this.election||!this.election.endTime)return;const e=new Date,t=new Date(this.election.endTime);if(e>=t)return this.timeRemaining="Voting has ended",clearInterval(this.timerInterval),void setTimeout((()=>{window.location.reload()}),1e3);const s=t-e,a=Math.floor(s/36e5),i=Math.floor(s%36e5/6e4),n=Math.floor(s%6e4/1e3);this.timeRemaining=`${a}h ${i}m ${n}s`},async castVoteForPosition(e){const t=this.selectedCandidates[e];if(t){this.transactionInProgress=!0,this.errorMessage="";try{const s=await this.castVote({electionId:this.electionId,positionId:e,candidateId:t});this.confirmationData={transaction:s,positionId:e,candidateId:t},this.showConfirmation=!0}catch(s){console.error("Error casting vote:",s),this.errorMessage=s.message||"Failed to cast vote. Please try again."}finally{this.transactionInProgress=!1}}else this.errorMessage="Please select a candidate first"}},async created(){this.electionId=parseInt(this.$route.params.id);try{await this.fetchElection(this.electionId),this.isLoading=!1,this.updateTimeRemaining(),this.timerInterval=setInterval(this.updateTimeRemaining,1e3);const e=await Le.getUserVotes();e.data.forEach((e=>{e.election_id===this.electionId&&this.votedPositions.add(e.position_id)}))}catch(e){console.error("Error fetching election details:",e),this.isLoading=!1}},beforeUnmount(){this.timerInterval&&clearInterval(this.timerInterval)}},Yi=(0,C.A)(Ji,[["render",Ri],["__scopeId","data-v-073e5a0d"]]),zi=Yi,Zi={class:"election-results"},en={key:0,class:"text-center py-5"},tn={key:1,class:"alert alert-danger"},sn={key:2},an={class:"results-header mb-4"},nn={class:"d-flex justify-content-between align-items-start"},ln={class:"lead"},on={class:"status-badge"},rn={key:0,class:"alert alert-warning mb-4"},cn={class:"mt-3"},dn={key:1,class:"alert alert-danger mb-4"},un={key:2,class:"alert alert-info mb-4"},mn={key:3,class:"text-center py-4"},hn={key:4},pn={class:"position-header mb-3"},fn={class:"card result-card"},kn={class:"card-body"},vn={key:0,class:"winner-section mb-4"},bn={class:"winner-card"},gn={class:"row align-items-center"},Ln={class:"col-md-2 text-center"},yn={class:"winner-icon"},En={key:0,class:"fas fa-user-circle fa-4x"},wn={key:1,class:"fas fa-balance-scale fa-4x"},Cn={class:"col-md-7"},In={class:"winner-name"},_n={key:0,class:"winner-info mb-0"},Tn={class:"badge bg-secondary me-2"},An={key:1,class:"winner-info mb-0"},Fn={class:"col-md-3 text-center"},Sn={class:"vote-percentage"},Wn={class:"chart-container mb-4"},xn=["id"],Vn={class:"table-responsive"},Xn={class:"table table-hover results-table"},Rn={class:"text-center"},Dn={class:"text-center"},Pn={class:"progress"},Mn={class:"d-grid d-md-flex justify-content-md-center mt-3"};function Nn(e,t,s,a,n,l){const o=(0,i.g2)("ConnectWallet"),c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Zi,[n.isLoading?((0,i.uX)(),(0,i.CE)("div",en,t[0]||(t[0]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading election results...",-1)]))):l.election?((0,i.uX)(),(0,i.CE)("div",sn,[(0,i.Lk)("div",an,[(0,i.Lk)("div",nn,[(0,i.Lk)("div",null,[(0,i.Lk)("h1",null,"Results: "+(0,r.v_)(l.election.title),1),(0,i.Lk)("p",ln," Election ran from "+(0,r.v_)(l.formatDateTime(l.election.startTime))+" to "+(0,r.v_)(l.formatDateTime(l.election.endTime)),1)]),(0,i.Lk)("div",on,[(0,i.Lk)("span",{class:(0,r.C4)(["badge",l.getStatusBadgeClass(l.election.status)])},(0,r.v_)(l.election.status),3)])])]),e.isConnected?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",rn,[t[2]||(t[2]=(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[3]||(t[3]=(0,i.Lk)("strong",null,"MetaMask not connected.",-1)),t[4]||(t[4]=(0,i.eW)(" Results are being loaded from the API. For real-time blockchain verification, please connect your wallet. ")),(0,i.Lk)("div",cn,[(0,i.bF)(o)])])),n.errorMessage?((0,i.uX)(),(0,i.CE)("div",dn,[t[5]||(t[5]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),t[6]||(t[6]=(0,i.Lk)("strong",null,"Error:",-1)),(0,i.eW)(" "+(0,r.v_)(n.errorMessage),1)])):(0,i.Q3)("",!0),"Closed"!==l.election.status?((0,i.uX)(),(0,i.CE)("div",un,t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,i.eW)(" This election is not yet closed. Results are preliminary and may change. ")]))):(0,i.Q3)("",!0),n.resultsLoaded?((0,i.uX)(),(0,i.CE)("div",hn,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.election.positions,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.position_id,class:"position-results mb-5"},[(0,i.Lk)("div",pn,[(0,i.Lk)("h2",null,(0,r.v_)(e.title),1)]),(0,i.Lk)("div",fn,[(0,i.Lk)("div",kn,[l.getWinner(e.position_id)?((0,i.uX)(),(0,i.CE)("div",vn,[t[11]||(t[11]=(0,i.Lk)("div",{class:"winner-badge"},[(0,i.Lk)("i",{class:"fas fa-trophy"}),(0,i.eW)(" Winner ")],-1)),(0,i.Lk)("div",bn,[(0,i.Lk)("div",gn,[(0,i.Lk)("div",Ln,[(0,i.Lk)("div",yn,["Tie"!==l.getWinner(e.position_id).name?((0,i.uX)(),(0,i.CE)("i",En)):((0,i.uX)(),(0,i.CE)("i",wn))])]),(0,i.Lk)("div",Cn,[(0,i.Lk)("h3",In,(0,r.v_)("Tie"===l.getWinner(e.position_id).name?"It's a Tie!":l.getWinner(e.position_id).name),1),"Tie"!==l.getWinner(e.position_id).name?((0,i.uX)(),(0,i.CE)("p",_n,[(0,i.Lk)("span",Tn,(0,r.v_)(l.getWinner(e.position_id).party_name||"Independent"),1),(0,i.Lk)("strong",null,(0,r.v_)(l.getWinner(e.position_id).votes),1),(0,i.eW)(" votes ("+(0,r.v_)(l.getWinner(e.position_id).percentage)+"%) ",1)])):((0,i.uX)(),(0,i.CE)("p",An,[t[9]||(t[9]=(0,i.eW)(" All candidates received ")),(0,i.Lk)("strong",null,(0,r.v_)(l.getWinner(e.position_id).votes),1),t[10]||(t[10]=(0,i.eW)(" votes each. "))]))]),(0,i.Lk)("div",Fn,[(0,i.Lk)("div",Sn,(0,r.v_)(l.getWinner(e.position_id).percentage)+"% ",1)])])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Wn,[(0,i.Lk)("canvas",{id:`chart-${e.position_id}`},null,8,xn)]),(0,i.Lk)("div",Vn,[(0,i.Lk)("table",Xn,[t[12]||(t[12]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Rank"),(0,i.Lk)("th",null,"Candidate"),(0,i.Lk)("th",null,"Party"),(0,i.Lk)("th",{class:"text-center"},"Votes"),(0,i.Lk)("th",{class:"text-center"},"Percentage")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.getCandidatesWithResults(e.position_id),((t,s)=>((0,i.uX)(),(0,i.CE)("tr",{key:t.candidateId,class:(0,r.C4)({"table-success":0===s})},[(0,i.Lk)("td",null,(0,r.v_)(s+1),1),(0,i.Lk)("td",null,(0,r.v_)(t.name),1),(0,i.Lk)("td",null,(0,r.v_)(t.party_name||"Independent"),1),(0,i.Lk)("td",Rn,(0,r.v_)(t.votes),1),(0,i.Lk)("td",Dn,[(0,i.Lk)("div",Pn,[(0,i.Lk)("div",{class:(0,r.C4)(["progress-bar",0===s?"bg-success":"bg-primary"]),style:(0,r.Tr)(`width: ${l.getVotePercentage(e.position_id,t.candidateId)}%`)},(0,r.v_)(l.getVotePercentage(e.position_id,t.candidateId))+"% ",7)])])],2)))),128))])])])])])])))),128))])):((0,i.uX)(),(0,i.CE)("div",mn,t[8]||(t[8]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Fetching results from backend...",-1)]))),(0,i.Lk)("div",Mn,[(0,i.bF)(c,{to:"/elections",class:"btn btn-outline-primary"},{default:(0,i.k6)((()=>t[13]||(t[13]=[(0,i.Lk)("i",{class:"fas fa-arrow-left me-2"},null,-1),(0,i.eW)(" Back to Elections ")]))),_:1})])])):((0,i.uX)(),(0,i.CE)("div",tn,t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1),(0,i.eW)(" Election not found or has been removed. ")])))])}var On=s(8293);const Un={name:"ElectionResults",components:{ConnectWallet:we},data(){return{electionId:null,isLoading:!0,errorMessage:"",results:{},charts:{},resultsLoaded:!1}},computed:{...(0,E.L8)(["currentElection","candidates","isConnected","walletAddress"]),election(){return this.currentElection}},methods:{...(0,E.i0)(["fetchElection","fetchResults"]),formatDateTime(e){const t=new Date(e);return t.toLocaleString()},getStatusBadgeClass(e){const t={Init:"bg-secondary",Voting:"bg-success",Closed:"bg-danger"};return t[e]||"bg-secondary"},async loadResults(){this.resultsLoaded=!1;try{const e=await Le.getResults(this.electionId);this.results=e.data,Object.keys(this.results).forEach((e=>{const t=this.results[e],s=t.reduce(((e,t)=>e+t.votes),0);return this.results[e]=t.map((e=>{const t=this.candidates.find((t=>t.candidate_id===e.candidateId));return{...e,name:t?t.name:"Unknown Candidate",party_name:t?t.party_name:"Independent",percentage:s>0?e.votes/s*100:0}})),this.results}),{}),this.resultsLoaded=!0,this.$nextTick((()=>{this.createCharts()}))}catch(e){console.error("Error loading results:",e),this.errorMessage=e.message||"Failed to load results from the backend",this.resultsLoaded=!0}},getTotalVotesForPosition(e){return this.results[e]?this.results[e].reduce(((e,t)=>e+t.votes),0):0},getCandidateVotes(e,t){if(!this.results[e])return 0;const s=this.results[e].find((e=>e.candidateId===t));return s?s.votes:0},getVotePercentage(e,t){const s=this.getTotalVotesForPosition(e);if(0===s)return 0;const a=this.getCandidateVotes(e,t);return Math.round(a/s*100)},getCandidatesWithResults(e){if(!this.results[e])return[];const t=this.results[e].map((e=>({...e})));return t.sort(((e,t)=>t.votes-e.votes))},getWinner(e){const t=this.getCandidatesWithResults(e);if(0===t.length)return null;const s=t[0].votes,a=t.every((e=>e.votes===s));return a?{name:"Tie",party_name:null,votes:s,percentage:Math.round(s/this.getTotalVotesForPosition(e)*100)}:t[0]},createCharts(){Object.values(this.charts).forEach((e=>e.destroy())),this.charts={},this.election.positions.forEach((e=>{const t=this.getCandidatesWithResults(e.position_id);if(0===t.length)return;const s=document.getElementById(`chart-${e.position_id}`);if(!s)return;const a=s.getContext("2d"),i=t.map((e=>e.name)),n=t.map((e=>e.votes)),l=["rgba(75, 192, 192, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(255, 99, 132, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(199, 199, 199, 0.6)"];this.charts[e.position_id]=new On.Ay(a,{type:"bar",data:{labels:i,datasets:[{label:"Votes",data:n,backgroundColor:l.slice(0,t.length),borderColor:l.map((e=>e.replace("0.6","1"))),borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){const t=e.raw,s=e.dataset.data.reduce(((e,t)=>e+t),0),a=Math.round(t/s*100);return`${t} votes (${a}%)`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})}))}},async created(){this.electionId=parseInt(this.$route.params.id);try{await this.fetchElection(this.electionId),this.isLoading=!1,await this.loadResults()}catch(e){console.error("Error fetching election details:",e),this.errorMessage=e.message||"Failed to fetch election details",this.isLoading=!1}},beforeUnmount(){Object.values(this.charts).forEach((e=>e.destroy()))}},$n=(0,C.A)(Un,[["render",Nn],["__scopeId","data-v-3b467530"]]),qn=$n,Gn={class:"analytics-dashboard"},Bn={class:"row"},jn={class:"col-md-4 mb-4"},Qn={class:"card dashboard-card"},Kn={class:"card-body"},Hn={class:"metric-value"},Jn={class:"metric-trend"},Yn={key:0,class:"fas fa-arrow-up text-success me-1"},zn={key:1,class:"fas fa-arrow-down text-danger me-1"},Zn={key:2,class:"fas fa-minus text-muted me-1"},el={class:"col-md-4 mb-4"},tl={class:"card dashboard-card"},sl={class:"card-body"},al={class:"metric-value"},il={class:"metric-trend"},nl={key:0,class:"fas fa-arrow-up text-success me-1"},ll={key:1,class:"fas fa-arrow-down text-danger me-1"},ol={key:2,class:"fas fa-minus text-muted me-1"},rl={class:"col-md-4 mb-4"},cl={class:"card dashboard-card"},dl={class:"card-body"},ul={class:"metric-value"},ml={class:"metric-trend"},hl={key:0,class:"fas fa-arrow-up text-success me-1"},pl={key:1,class:"fas fa-arrow-down text-danger me-1"},fl={key:2,class:"fas fa-minus text-muted me-1"},kl={class:"row mb-4"},vl={class:"col-lg-8 mb-4"},bl={class:"card dashboard-card"},gl={class:"card-body"},Ll={class:"chart-container"},yl={ref:"participationChart"},El={class:"col-lg-4 mb-4"},wl={class:"card dashboard-card"},Cl={class:"card-body"},Il={class:"chart-container"},_l={ref:"statusChart"},Tl={class:"row"},Al={class:"col-12"},Fl={class:"card dashboard-card"},Sl={class:"card-body"},Wl={class:"table-responsive"},xl={class:"table table-hover"},Vl={class:"progress",style:{height:"8px"}},Xl={href:"#",target:"_blank",class:"contract-link"};function Rl(e,t,s,a,n,l){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Gn,[t[8]||(t[8]=(0,i.Lk)("div",{class:"dashboard-header mb-4"},[(0,i.Lk)("h1",null,"Elections Analytics"),(0,i.Lk)("p",{class:"text-muted"},"Insights and statistics about election participation and results")],-1)),(0,i.Lk)("div",Bn,[(0,i.Lk)("div",jn,[(0,i.Lk)("div",Qn,[(0,i.Lk)("div",Kn,[t[0]||(t[0]=(0,i.Lk)("h5",{class:"card-title"},"Total Elections",-1)),(0,i.Lk)("div",Hn,(0,r.v_)(n.metrics.totalElections),1),(0,i.Lk)("div",Jn,[n.metrics.electionGrowth>0?((0,i.uX)(),(0,i.CE)("i",Yn)):n.metrics.electionGrowth<0?((0,i.uX)(),(0,i.CE)("i",zn)):((0,i.uX)(),(0,i.CE)("i",Zn)),(0,i.eW)(" "+(0,r.v_)(Math.abs(n.metrics.electionGrowth))+"% from last period ",1)])])])]),(0,i.Lk)("div",el,[(0,i.Lk)("div",tl,[(0,i.Lk)("div",sl,[t[1]||(t[1]=(0,i.Lk)("h5",{class:"card-title"},"Total Votes",-1)),(0,i.Lk)("div",al,(0,r.v_)(n.metrics.totalVotes),1),(0,i.Lk)("div",il,[n.metrics.voteGrowth>0?((0,i.uX)(),(0,i.CE)("i",nl)):n.metrics.voteGrowth<0?((0,i.uX)(),(0,i.CE)("i",ll)):((0,i.uX)(),(0,i.CE)("i",ol)),(0,i.eW)(" "+(0,r.v_)(Math.abs(n.metrics.voteGrowth))+"% from last period ",1)])])])]),(0,i.Lk)("div",rl,[(0,i.Lk)("div",cl,[(0,i.Lk)("div",dl,[t[2]||(t[2]=(0,i.Lk)("h5",{class:"card-title"},"Average Participation",-1)),(0,i.Lk)("div",ul,(0,r.v_)(n.metrics.averageParticipation)+"%",1),(0,i.Lk)("div",ml,[n.metrics.participationGrowth>0?((0,i.uX)(),(0,i.CE)("i",hl)):n.metrics.participationGrowth<0?((0,i.uX)(),(0,i.CE)("i",pl)):((0,i.uX)(),(0,i.CE)("i",fl)),(0,i.eW)(" "+(0,r.v_)(Math.abs(n.metrics.participationGrowth))+"% from last period ",1)])])])])]),(0,i.Lk)("div",kl,[(0,i.Lk)("div",vl,[(0,i.Lk)("div",bl,[t[3]||(t[3]=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("h5",{class:"mb-0"},"Voter Participation Over Time")],-1)),(0,i.Lk)("div",gl,[(0,i.Lk)("div",Ll,[(0,i.Lk)("canvas",yl,null,512)])])])]),(0,i.Lk)("div",El,[(0,i.Lk)("div",wl,[t[4]||(t[4]=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("h5",{class:"mb-0"},"Election Status")],-1)),(0,i.Lk)("div",Cl,[(0,i.Lk)("div",Il,[(0,i.Lk)("canvas",_l,null,512)])])])])]),(0,i.Lk)("div",Tl,[(0,i.Lk)("div",Al,[(0,i.Lk)("div",Fl,[t[7]||(t[7]=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("h5",{class:"mb-0"},"Recent Elections")],-1)),(0,i.Lk)("div",Sl,[(0,i.Lk)("div",Wl,[(0,i.Lk)("table",xl,[t[6]||(t[6]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Election"),(0,i.Lk)("th",null,"Status"),(0,i.Lk)("th",null,"Start Date"),(0,i.Lk)("th",null,"End Date"),(0,i.Lk)("th",null,"Participation"),(0,i.Lk)("th",null,"Contract Address")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.recentElections,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.electionId},[(0,i.Lk)("td",null,[(0,i.bF)(o,{to:`/elections/${e.electionId}`},{default:(0,i.k6)((()=>[(0,i.eW)((0,r.v_)(e.title),1)])),_:2},1032,["to"])]),(0,i.Lk)("td",null,[(0,i.Lk)("span",{class:(0,r.C4)(["badge",l.getStatusBadgeClass(e.status)])},(0,r.v_)(e.status),3)]),(0,i.Lk)("td",null,(0,r.v_)(l.formatDate(e.startTime)),1),(0,i.Lk)("td",null,(0,r.v_)(l.formatDate(e.endTime)),1),(0,i.Lk)("td",null,[(0,i.Lk)("div",Vl,[(0,i.Lk)("div",{class:(0,r.C4)(["progress-bar",l.getParticipationColorClass(e.participation)]),style:(0,r.Tr)(`width: ${e.participation}%`)},null,6)]),(0,i.Lk)("small",null,(0,r.v_)(e.participation)+"%",1)]),(0,i.Lk)("td",null,[(0,i.Lk)("a",Xl,[(0,i.eW)((0,r.v_)(l.truncateAddress(e.contractAddress))+" ",1),t[5]||(t[5]=(0,i.Lk)("i",{class:"fas fa-external-link-alt ms-1"},null,-1))])])])))),128))])])])])])])])])}const Dl={name:"AnalyticsDashboard",data(){return{participationChart:null,statusChart:null,metrics:{totalElections:0,totalVotes:0,averageParticipation:0,electionGrowth:0,voteGrowth:0,participationGrowth:0},recentElections:[],participationData:[],statusData:{labels:["Init","Voting","Closed"],data:[0,0,0]},isLoading:!1,errorMessage:""}},computed:{...(0,E.L8)(["isConnected","walletAddress","networkId"]),...(0,E.aH)({currentUser:e=>e.user})},methods:{async loadAnalyticsData(){this.isLoading=!0;try{const e=await Le.getElections(),t=e.data;this.metrics.totalElections=t.length;const s=[...t].sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))).slice(0,10),a=s.map((async e=>{try{const t=await Le.getVotesByElection(e.electionId),s=t.data.length,a=await Le.getVoters(),i=a.data.filter((e=>e.is_whitelisted)).length||1,n=Math.min(Math.floor(s/i*100),100);return{...e,participation:n}}catch(t){return console.error(`Error getting data for election ${e.electionId}:`,t),{...e,participation:0}}}));this.recentElections=await Promise.all(a);const i=t.map((e=>Le.getVotesByElection(e.electionId))),n=await Promise.all(i),l=n.reduce(((e,t)=>e+t.data.length),0);this.metrics.totalVotes=l,this.metrics.averageParticipation=t.length>0?Math.floor(l/t.length/2):0,this.metrics.electionGrowth=15,this.metrics.voteGrowth=22,this.metrics.participationGrowth=8,this.generateChartData(t,n),this.renderCharts()}catch(e){console.error("Error loading analytics data:",e),this.errorMessage="Failed to load analytics data"}finally{this.isLoading=!1}},generateChartData(e,t){const s={Init:0,Voting:0,Closed:0};e.forEach((e=>{s[e.status]=(s[e.status]||0)+1})),this.statusData.data=[s["Init"],s["Voting"],s["Closed"]];const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date,n=[],l=[];for(let o=5;o>=0;o--){const e=new Date(i.getFullYear(),i.getMonth()-o,1);n.push(a[e.getMonth()]);const s=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);let c=0;t.forEach((e=>{e.data.forEach((e=>{const t=new Date(e.timestamp);t>=s&&t<=r&&c++}))})),l.push(c)}this.participationData={labels:n,votes:l}},renderCharts(){this.participationChart&&this.participationChart.destroy(),this.statusChart&&this.statusChart.destroy();const e=this.$refs.participationChart.getContext("2d");this.participationChart=new On.Ay(e,{type:"line",data:{labels:this.participationData.labels,datasets:[{label:"Votes per Month",data:this.participationData.votes,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,tension:.3,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Votes"}}}}});const t=this.$refs.statusChart.getContext("2d");this.statusChart=new On.Ay(t,{type:"doughnut",data:{labels:this.statusData.labels,datasets:[{data:this.statusData.data,backgroundColor:["rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)"],borderColor:["rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})},getStatusBadgeClass(e){const t={Init:"bg-warning",Voting:"bg-success",Closed:"bg-secondary"};return t[e]||"bg-light"},getParticipationColorClass(e){return e>=70?"bg-success":e>=40?"bg-info":e>=20?"bg-warning":"bg-danger"},formatDate(e){const t=new Date(e);return t.toLocaleDateString()},truncateAddress(e){return e?e.slice(0,6)+"..."+e.slice(-4):""}},mounted(){this.loadAnalyticsData()}},Pl=(0,C.A)(Dl,[["render",Rl],["__scopeId","data-v-b65ac60c"]]),Ml=Pl,Nl={class:"admin-dashboard"},Ol={class:"d-flex justify-content-between align-items-center mb-4"},Ul={class:"blockchain-status"},$l={key:0,class:"badge bg-success"},ql={key:1,class:"badge bg-warning"},Gl={key:0,class:"mb-4"},Bl={class:"admin-nav mb-4"},jl={class:"nav nav-tabs"},Ql={class:"nav-item"},Kl={class:"nav-item"},Hl={class:"nav-item"},Jl={class:"nav-item"},Yl={class:"nav-item"},zl={class:"nav-item"},Zl={class:"stats-cards mb-4"},eo={class:"row"},to={class:"col-md-3 mb-3"},so={class:"card stats-card h-100"},ao={class:"card-body"},io={class:"stats-number"},no={class:"col-md-3 mb-3"},lo={class:"card stats-card h-100"},oo={class:"card-body"},ro={class:"stats-number"},co={class:"col-md-3 mb-3"},uo={class:"card stats-card h-100"},mo={class:"card-body"},ho={class:"stats-number"},po={class:"dashboard-content"};function fo(e,t,s,a,n,l){const o=(0,i.g2)("ConnectWallet"),c=(0,i.g2)("router-link"),d=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",Nl,[(0,i.Lk)("div",Ol,[t[2]||(t[2]=(0,i.Lk)("h1",null,"Admin Dashboard",-1)),(0,i.Lk)("div",Ul,[e.isConnected?((0,i.uX)(),(0,i.CE)("span",$l,[t[0]||(t[0]=(0,i.Lk)("i",{class:"fab fa-ethereum me-1"},null,-1)),(0,i.eW)(" "+(0,r.v_)(l.networkName),1)])):((0,i.uX)(),(0,i.CE)("span",ql,t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-1"},null,-1),(0,i.eW)(" Not Connected to Blockchain ")])))])]),e.isConnected?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Gl,[t[3]||(t[3]=(0,i.Lk)("div",{class:"alert alert-warning"},[(0,i.Lk)("i",{class:"fas fa-wallet me-2"}),(0,i.Lk)("strong",null,"MetaMask not connected."),(0,i.eW)(" Please connect your wallet to manage blockchain functionality. ")],-1)),(0,i.bF)(o)])),(0,i.Lk)("div",Bl,[(0,i.Lk)("ul",jl,[(0,i.Lk)("li",Ql,[(0,i.bF)(c,{class:"nav-link",to:"/admin/elections","active-class":"active"},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-vote-yea me-1"},null,-1),(0,i.eW)(" Elections ")]))),_:1})]),(0,i.Lk)("li",Kl,[(0,i.bF)(c,{class:"nav-link",to:"/admin/candidates","active-class":"active"},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-user-tie me-1"},null,-1),(0,i.eW)(" Candidates ")]))),_:1})]),(0,i.Lk)("li",Hl,[(0,i.bF)(c,{class:"nav-link",to:"/admin/voters","active-class":"active"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-users me-1"},null,-1),(0,i.eW)(" Voters ")]))),_:1})]),(0,i.Lk)("li",Jl,[(0,i.bF)(c,{class:"nav-link",to:"/admin/electoral-roll","active-class":"active"},{default:(0,i.k6)((()=>t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-list me-1"},null,-1),(0,i.eW)(" Electoral Rolls ")]))),_:1})]),(0,i.Lk)("li",Yl,[(0,i.bF)(c,{class:"nav-link",to:"/admin/results","active-class":"active"},{default:(0,i.k6)((()=>t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-chart-pie me-1"},null,-1),(0,i.eW)(" Results ")]))),_:1})]),(0,i.Lk)("li",zl,[(0,i.bF)(c,{class:"nav-link",to:"/analytics","active-class":"active"},{default:(0,i.k6)((()=>t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-chart-line me-1"},null,-1),(0,i.eW)(" Analytics ")]))),_:1})])])]),(0,i.Lk)("div",Zl,[(0,i.Lk)("div",eo,[(0,i.Lk)("div",to,[(0,i.Lk)("div",so,[(0,i.Lk)("div",ao,[t[10]||(t[10]=(0,i.Lk)("div",{class:"stats-icon mb-3"},[(0,i.Lk)("i",{class:"fas fa-vote-yea fa-2x text-primary"})],-1)),t[11]||(t[11]=(0,i.Lk)("h5",{class:"card-title"},"Total Elections",-1)),(0,i.Lk)("p",io,(0,r.v_)(n.stats.totalElections),1),(0,i.Lk)("div",{class:(0,r.C4)(["stats-label",l.getStatusClass("active")])},(0,r.v_)(n.stats.activeElections)+" Active ",3)])])]),(0,i.Lk)("div",no,[(0,i.Lk)("div",lo,[(0,i.Lk)("div",oo,[t[12]||(t[12]=(0,i.Lk)("div",{class:"stats-icon mb-3"},[(0,i.Lk)("i",{class:"fas fa-user-tie fa-2x text-success"})],-1)),t[13]||(t[13]=(0,i.Lk)("h5",{class:"card-title"},"Candidates",-1)),(0,i.Lk)("p",ro,(0,r.v_)(n.stats.totalCandidates),1)])])]),(0,i.Lk)("div",co,[(0,i.Lk)("div",uo,[(0,i.Lk)("div",mo,[t[14]||(t[14]=(0,i.Lk)("div",{class:"stats-icon mb-3"},[(0,i.Lk)("i",{class:"fas fa-users fa-2x text-info"})],-1)),t[15]||(t[15]=(0,i.Lk)("h5",{class:"card-title"},"Registered Voters",-1)),(0,i.Lk)("p",ho,(0,r.v_)(n.stats.registeredVoters),1)])])])])]),(0,i.Lk)("div",po,[(0,i.bF)(d)])])}const ko={name:"Dashboard",components:{ConnectWallet:we},data(){return{stats:{totalElections:0,activeElections:0,totalCandidates:0,pendingApprovals:0,registeredVoters:0,whitelistedVoters:0,totalVotes:0,todayVotes:0}}},computed:{...(0,E.L8)(["isConnected","networkId"]),networkName(){const e={1:"Ethereum Mainnet",3:"Ropsten Testnet",4:"Rinkeby Testnet",5:"Goerli Testnet",42:"Kovan Testnet",1337:"Local Ganache"};return e[this.networkId]||`Network ID: ${this.networkId}`}},methods:{getStatusClass(e){const t={active:"text-success",pending:"text-warning",whitelisted:"text-info",today:"text-primary"};return t[e]||""},async loadDashboardStats(){try{const[e,t,s,a]=await Promise.all([this.$store.dispatch("fetchElections"),this.$store.dispatch("fetchCandidates"),this.$store.dispatch("fetchVoters"),Promise.resolve([])]),i=this.$store.getters.allElections||[],n=i.filter((e=>"Voting"===e.status)).length,l=this.$store.getters.candidates||[],o=0,r=this.$store.getters.voters||[],c=r.filter((e=>e.is_whitelisted)).length;let d=0,u=0;const m=new Date;m.setHours(0,0,0,0),this.stats={totalElections:i.length,activeElections:n,totalCandidates:l.length,pendingApprovals:o,registeredVoters:r.length,whitelistedVoters:c,totalVotes:d,todayVotes:u}}catch(e){console.error("Error loading dashboard stats:",e)}}},created(){this.loadDashboardStats()}},vo=(0,C.A)(ko,[["render",fo],["__scopeId","data-v-170c3ffd"]]),bo=vo,go={class:"election-management"},Lo={class:"d-flex justify-content-between align-items-center mb-4"},yo={key:0,class:"mb-5"},Eo={key:1},wo={class:"card"},Co={class:"card-header bg-primary text-white d-flex justify-content-between align-items-center"},Io={class:"filter-group"},_o={class:"input-group"},To={class:"card-body p-0"},Ao={key:0,class:"text-center py-4"},Fo={key:1,class:"text-center py-4"},So={key:2,class:"table-responsive"},Wo={class:"table table-hover mb-0"},xo={class:"text-center"},Vo={class:"text-center"},Xo={class:"text-center"},Ro={key:0},Do={key:1,class:"text-muted"},Po={class:"text-center"},Mo={class:"btn-group"},No=["onClick"],Oo=["onClick","disabled"],Uo={class:"modal fade",id:"phaseChangeModal",tabindex:"-1","aria-hidden":"true"},$o={class:"modal-dialog"},qo={class:"modal-content"},Go={class:"modal-body"},Bo={key:0},jo={class:"form-group"},Qo={class:"modal-footer"},Ko=["disabled"];function Ho(e,t,s,n,l,o){const c=(0,i.g2)("ElectionForm"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",go,[(0,i.Lk)("div",Lo,[t[6]||(t[6]=(0,i.Lk)("h2",null,"Election Management",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.showCreateForm&&o.showCreateForm(...e)),class:"btn btn-primary"},t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-plus me-1"},null,-1),(0,i.eW)(" Create New Election ")]))]),l.showForm?((0,i.uX)(),(0,i.CE)("div",yo,[(0,i.bF)(c,{election:l.selectedElection,onCreate:o.handleCreateElection,onUpdate:o.handleUpdateElection,onCancel:o.hideForm},null,8,["election","onCreate","onUpdate","onCancel"])])):((0,i.uX)(),(0,i.CE)("div",Eo,[(0,i.Lk)("div",wo,[(0,i.Lk)("div",Co,[t[9]||(t[9]=(0,i.Lk)("h5",{class:"mb-0"},"Elections",-1)),(0,i.Lk)("div",Io,[(0,i.Lk)("div",_o,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control form-control-sm",placeholder:"Search elections...","onUpdate:modelValue":t[1]||(t[1]=e=>l.searchTerm=e)},null,512),[[a.Jo,l.searchTerm]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.statusFilter=e),class:"form-select form-select-sm"},t[7]||(t[7]=[(0,i.Lk)("option",{value:""},"All Statuses",-1),(0,i.Lk)("option",{value:"Init"},"Initialization",-1),(0,i.Lk)("option",{value:"Voting"},"Voting",-1),(0,i.Lk)("option",{value:"Closed"},"Closed",-1)]),512),[[a.u1,l.statusFilter]]),t[8]||(t[8]=(0,i.Lk)("button",{class:"btn btn-light btn-sm"},[(0,i.Lk)("i",{class:"fas fa-search"})],-1))])])]),(0,i.Lk)("div",To,[l.isLoading?((0,i.uX)(),(0,i.CE)("div",Ao,t[10]||(t[10]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading elections...",-1)]))):0===o.filteredElections.length?((0,i.uX)(),(0,i.CE)("div",Fo,t[11]||(t[11]=[(0,i.Lk)("div",{class:"alert alert-info m-3"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" No elections found. Create a new election to get started. ")],-1)]))):((0,i.uX)(),(0,i.CE)("div",So,[(0,i.Lk)("table",Wo,[t[17]||(t[17]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Title"),(0,i.Lk)("th",null,"Start Date"),(0,i.Lk)("th",null,"End Date"),(0,i.Lk)("th",{class:"text-center"},"Status"),(0,i.Lk)("th",{class:"text-center"},"Positions"),(0,i.Lk)("th",{class:"text-center"},"Blockchain"),(0,i.Lk)("th",{class:"text-center"},"Actions")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredElections,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.electionId},[(0,i.Lk)("td",null,(0,r.v_)(e.title),1),(0,i.Lk)("td",null,(0,r.v_)(o.formatDateTime(e.startTime)),1),(0,i.Lk)("td",null,(0,r.v_)(o.formatDateTime(e.endTime)),1),(0,i.Lk)("td",xo,[(0,i.Lk)("span",{class:(0,r.C4)(["badge",o.getStatusBadgeClass(e.status)])},(0,r.v_)(e.status),3)]),(0,i.Lk)("td",Vo,(0,r.v_)(e.positions.length),1),(0,i.Lk)("td",Xo,[e.contractAddress?((0,i.uX)(),(0,i.CE)("span",Ro,[t[12]||(t[12]=(0,i.Lk)("i",{class:"fab fa-ethereum me-1"},null,-1)),(0,i.eW)(" "+(0,r.v_)(o.truncateAddress(e.contractAddress)),1)])):((0,i.uX)(),(0,i.CE)("span",Do,t[13]||(t[13]=[(0,i.Lk)("i",{class:"fas fa-times-circle me-1"},null,-1),(0,i.eW)(" Not deployed ")])))]),(0,i.Lk)("td",Po,[(0,i.Lk)("div",Mo,[(0,i.Lk)("button",{onClick:t=>o.editElection(e),class:"btn btn-sm btn-outline-primary"},t[14]||(t[14]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,No),(0,i.Lk)("button",{onClick:t=>o.changePhase(e),class:"btn btn-sm btn-outline-success",disabled:l.isProcessing},t[15]||(t[15]=[(0,i.Lk)("i",{class:"fas fa-sync-alt"},null,-1)]),8,Oo),(0,i.bF)(d,{to:`/elections/${e.electionId}/results`,class:"btn btn-sm btn-outline-info"},{default:(0,i.k6)((()=>t[16]||(t[16]=[(0,i.Lk)("i",{class:"fas fa-chart-pie"},null,-1)]))),_:2},1032,["to"])])])])))),128))])])]))])])])),(0,i.Lk)("div",Uo,[(0,i.Lk)("div",$o,[(0,i.Lk)("div",qo,[t[23]||(t[23]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"},"Change Election Phase"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,i.Lk)("div",Go,[l.selectedElection?((0,i.uX)(),(0,i.CE)("div",Bo,[(0,i.Lk)("p",null,[t[18]||(t[18]=(0,i.eW)(" Current phase: ")),(0,i.Lk)("span",{class:(0,r.C4)(["badge",o.getStatusBadgeClass(l.selectedElection.status)])},(0,r.v_)(l.selectedElection.status),3)]),(0,i.Lk)("div",jo,[t[20]||(t[20]=(0,i.Lk)("label",{for:"newPhase",class:"form-label"},"Select new phase:",-1)),(0,i.bo)((0,i.Lk)("select",{id:"newPhase","onUpdate:modelValue":t[3]||(t[3]=e=>l.newPhase=e),class:"form-select"},t[19]||(t[19]=[(0,i.Lk)("option",{value:"Init"},"Initialization",-1),(0,i.Lk)("option",{value:"Voting"},"Voting Open",-1),(0,i.Lk)("option",{value:"Closed"},"Voting Closed",-1)]),512),[[a.u1,l.newPhase]])]),t[21]||(t[21]=(0,i.Lk)("div",{class:"alert alert-info mt-3"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" Changing the election phase will update the status on the blockchain contract. This requires a MetaMask transaction. ")],-1))])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Qo,[t[22]||(t[22]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>o.confirmPhaseChange&&o.confirmPhaseChange(...e)),class:"btn btn-primary",disabled:l.phaseChangeProcessing},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",l.phaseChangeProcessing?"fa-spinner fa-spin":"fa-check"])},null,2),(0,i.eW)(" "+(0,r.v_)(l.phaseChangeProcessing?"Processing...":"Confirm Change"),1)],8,Ko)])])])])])}const Jo={class:"election-form"},Yo={class:"card"},zo={class:"card-header bg-primary text-white"},Zo={class:"mb-0"},er={class:"card-body"},tr={class:"mb-3"},sr={key:0,class:"invalid-feedback"},ar={class:"mb-3"},ir={key:0,class:"invalid-feedback"},nr={class:"row mb-3"},lr={class:"col-md-6"},or={key:0,class:"invalid-feedback"},rr={class:"col-md-6"},cr={key:0,class:"invalid-feedback"},dr={class:"mb-4"},ur={key:0,class:"invalid-feedback"},mr={class:"mb-4"},hr={class:"position-list"},pr={class:"card-body py-2"},fr={class:"d-flex justify-content-between align-items-center"},kr={class:"position-input-group flex-grow-1 me-2"},vr=["onUpdate:modelValue"],br=["onClick"],gr={key:0,class:"alert alert-info mb-4"},Lr={key:1,class:"alert alert-warning mb-4"},yr={class:"d-flex justify-content-between"},Er=["disabled"];function wr(e,t,s,n,l,o){return(0,i.uX)(),(0,i.CE)("div",Jo,[(0,i.Lk)("div",Yo,[(0,i.Lk)("div",zo,[(0,i.Lk)("h5",Zo,(0,r.v_)(o.isEditing?"Edit Election":"Create New Election"),1)]),(0,i.Lk)("div",er,[(0,i.Lk)("form",{onSubmit:t[7]||(t[7]=(0,a.D$)(((...e)=>o.submitForm&&o.submitForm(...e)),["prevent"]))},[(0,i.Lk)("div",tr,[t[8]||(t[8]=(0,i.Lk)("label",{for:"title",class:"form-label"},"Election Title*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.title=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.title}]),required:""},null,2),[[a.Jo,l.form.title]]),l.errors.title?((0,i.uX)(),(0,i.CE)("div",sr,(0,r.v_)(l.errors.title),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",ar,[t[9]||(t[9]=(0,i.Lk)("label",{for:"description",class:"form-label"},"Description*",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.description=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.description}]),rows:"3",required:""},null,2),[[a.Jo,l.form.description]]),l.errors.description?((0,i.uX)(),(0,i.CE)("div",ir,(0,r.v_)(l.errors.description),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",nr,[(0,i.Lk)("div",lr,[t[10]||(t[10]=(0,i.Lk)("label",{for:"startTime",class:"form-label"},"Start Time*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local",id:"startTime","onUpdate:modelValue":t[2]||(t[2]=e=>l.form.startTime=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.startTime}]),required:""},null,2),[[a.Jo,l.form.startTime]]),l.errors.startTime?((0,i.uX)(),(0,i.CE)("div",or,(0,r.v_)(l.errors.startTime),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",rr,[t[11]||(t[11]=(0,i.Lk)("label",{for:"endTime",class:"form-label"},"End Time*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local",id:"endTime","onUpdate:modelValue":t[3]||(t[3]=e=>l.form.endTime=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.endTime}]),required:""},null,2),[[a.Jo,l.form.endTime]]),l.errors.endTime?((0,i.uX)(),(0,i.CE)("div",cr,(0,r.v_)(l.errors.endTime),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",dr,[t[13]||(t[13]=(0,i.Lk)("label",{for:"status",class:"form-label"},"Status*",-1)),(0,i.bo)((0,i.Lk)("select",{id:"status","onUpdate:modelValue":t[4]||(t[4]=e=>l.form.status=e),class:(0,r.C4)(["form-select",{"is-invalid":l.errors.status}]),required:""},t[12]||(t[12]=[(0,i.Lk)("option",{value:"Init"},"Initialization",-1),(0,i.Lk)("option",{value:"Voting"},"Voting Open",-1),(0,i.Lk)("option",{value:"Closed"},"Voting Closed",-1)]),2),[[a.u1,l.form.status]]),l.errors.status?((0,i.uX)(),(0,i.CE)("div",ur,(0,r.v_)(l.errors.status),1)):(0,i.Q3)("",!0),t[14]||(t[14]=(0,i.Lk)("small",{class:"form-text text-muted"}," This will set the state of the election in the blockchain contract. ",-1))]),(0,i.Lk)("div",mr,[t[17]||(t[17]=(0,i.Lk)("label",{class:"form-label"},"Positions",-1)),(0,i.Lk)("div",hr,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.form.positions,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"position-item card mb-2"},[(0,i.Lk)("div",pr,[(0,i.Lk)("div",fr,[(0,i.Lk)("div",kr,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.title=t,class:"form-control",placeholder:"Position Title",required:""},null,8,vr),[[a.Jo,e.title]])]),(0,i.Lk)("button",{type:"button",onClick:e=>o.removePosition(s),class:"btn btn-sm btn-danger"},t[15]||(t[15]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]),8,br)])])])))),128))]),o.isEditing?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,type:"button",onClick:t[5]||(t[5]=(...e)=>o.addPosition&&o.addPosition(...e)),class:"btn btn-sm btn-outline-secondary mt-2"},t[16]||(t[16]=[(0,i.Lk)("i",{class:"fas fa-plus me-1"},null,-1),(0,i.eW)(" Add Position ")])))]),o.isEditing?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",gr,t[18]||(t[18]=[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,i.eW)(" Creating an election will deploy a smart contract to the Ethereum blockchain. Make sure you have enough ETH in your wallet for gas fees. ")]))),o.isEditing&&l.form.contract_address?((0,i.uX)(),(0,i.CE)("div",Lr,t[19]||(t[19]=[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1),(0,i.eW)(" Some changes may require blockchain transactions to update the smart contract state. ")]))):(0,i.Q3)("",!0),(0,i.Lk)("div",yr,[(0,i.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>o.cancel&&o.cancel(...e)),class:"btn btn-secondary"},t[20]||(t[20]=[(0,i.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,i.eW)(" Cancel ")])),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.isSubmitting},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",l.isSubmitting?"fa-spinner fa-spin":"fa-save"])},null,2),(0,i.eW)(" "+(0,r.v_)(l.isSubmitting?"Processing...":o.isEditing?"Update Election":"Create Election"),1)],8,Er)])],32)])])])}const Cr={name:"ElectionForm",props:{election:{type:Object,default:null}},data(){return{form:{title:"",description:"",startTime:"",endTime:"",status:"Init",positions:[],contract_address:""},errors:{},isSubmitting:!1}},computed:{isEditing(){return!!this.election}},watch:{election(e){e&&this.initForm(e)}},methods:{initForm(e){const t=e=>{const t=new Date(e);return t.toISOString().slice(0,16)};this.form={title:e.title,description:e.description,startTime:t(e.startTime),endTime:t(e.endTime),status:e.status,positions:e.positions?[...e.positions]:[],contract_address:e.contract_address||""}},addPosition(){const e={positionId:Math.floor(1e7+9e7*Math.random()),title:""};this.form.positions.push(e)},removePosition(e){this.form.positions.splice(e,1)},validateForm(){return this.errors={},this.form.title.trim()||(this.errors.title="Title is required"),this.form.description.trim()||(this.errors.description="Description is required"),this.form.startTime||(this.errors.startTime="Start time is required"),this.form.endTime?new Date(this.form.endTime)<=new Date(this.form.startTime)&&(this.errors.endTime="End time must be after start time"):this.errors.endTime="End time is required",this.form.status||(this.errors.status="Status is required"),0===Object.keys(this.errors).length},async submitForm(){if(this.validateForm()){this.isSubmitting=!0;try{const e={...this.form,startTime:new Date(this.form.startTime).toISOString(),endTime:new Date(this.form.endTime).toISOString()};this.isEditing?await this.$emit("update",{id:this.election.electionId,data:e}):await this.$emit("create",e),this.isEditing||this.resetForm()}catch(e){console.error("Error submitting form:",e)}finally{this.isSubmitting=!1}}},resetForm(){this.form={title:"",description:"",startTime:"",endTime:"",status:"Init",positions:[],contract_address:""},this.errors={}},cancel(){this.$emit("cancel")}},created(){this.election&&this.initForm(this.election)}},Ir=(0,C.A)(Cr,[["render",wr],["__scopeId","data-v-45e0aee8"]]),_r=Ir,Tr={name:"ElectionManagement",components:{ElectionForm:_r},data(){return{showForm:!1,selectedElection:null,isLoading:!1,isProcessing:!1,searchTerm:"",statusFilter:"",phaseChangeModal:null,newPhase:"",phaseChangeProcessing:!1}},computed:{...(0,E.L8)(["allElections","networkId"]),filteredElections(){let e=[...this.allElections];if(this.statusFilter&&(e=e.filter((e=>e.status===this.statusFilter))),this.searchTerm){const t=this.searchTerm.toLowerCase();e=e.filter((e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)))}return e}},methods:{...(0,E.i0)(["fetchElections","createElection","updateElection","updateElectionPhase"]),formatDateTime(e){const t=new Date(e);return t.toLocaleString()},truncateAddress(e){return e?e.slice(0,6)+"..."+e.slice(-4):""},getStatusBadgeClass(e){const t={Init:"bg-secondary",Voting:"bg-success",Closed:"bg-danger"};return t[e]||"bg-secondary"},showCreateForm(){this.selectedElection=null,this.showForm=!0},editElection(e){this.selectedElection=e,this.showForm=!0},hideForm(){this.showForm=!1,this.selectedElection=null},async handleCreateElection(e){try{if(!e.startTime)throw new Error("Start time is required");if(!e.endTime)throw new Error("End time is required");const t=new Date(e.startTime),s=new Date(e.endTime);if(isNaN(t.getTime()))throw new Error("Invalid start time");if(isNaN(s.getTime()))throw new Error("Invalid end time");if(s<=t)throw new Error("End time must be after start time");const a={title:e.title?.trim(),description:e.description?.trim(),start_time:Math.floor(t.getTime()/1e3),end_time:Math.floor(s.getTime()/1e3),positions:e.positions,status:"Init",address:e.address||null};await this.createElection(a),this.hideForm()}catch(t){console.error("Error creating election:",t),alert(t.message||"An error occurred while creating the election.")}},async handleUpdateElection({id:e,data:t}){try{await this.updateElection({id:e,data:t}),this.hideForm()}catch(s){console.error("Error updating election:",s)}},changePhase(e){this.selectedElection=e,this.newPhase=e.status,this.phaseChangeModal=new bootstrap.Modal(document.getElementById("phaseChangeModal")),this.phaseChangeModal.show()},async confirmPhaseChange(){if(this.selectedElection&&this.newPhase&&!this.phaseChangeProcessing){this.phaseChangeProcessing=!0;try{await this.updateElectionPhase({electionId:this.selectedElection.electionId,phase:this.newPhase}),this.phaseChangeModal.hide(),await this.fetchElections()}catch(e){console.error("Error changing election phase:",e),alert("Failed to change election phase: "+(e.message||"Unknown error"))}finally{this.phaseChangeProcessing=!1}}}},async created(){this.isLoading=!0;try{await this.fetchElections()}catch(e){console.error("Error fetching elections:",e)}finally{this.isLoading=!1}}},Ar=(0,C.A)(Tr,[["render",Ho],["__scopeId","data-v-60bc6f35"]]),Fr=Ar,Sr={class:"electoral-roll-management"},Wr={class:"d-flex justify-content-between align-items-center mb-4"},xr={key:0,class:"mb-5"},Vr={key:1};function Xr(e,t,s,a,n,l){const o=(0,i.g2)("ElectoralRollForm"),r=(0,i.g2)("ElectoralRollList");return(0,i.uX)(),(0,i.CE)("div",Sr,[(0,i.Lk)("div",Wr,[t[2]||(t[2]=(0,i.Lk)("h2",null,"Electoral Roll Management",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.showCreateForm&&l.showCreateForm(...e)),class:"btn btn-primary"},t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-plus me-1"},null,-1),(0,i.eW)(" Add New Entry ")]))]),n.showForm?((0,i.uX)(),(0,i.CE)("div",xr,[(0,i.bF)(o,{entry:n.selectedEntry,elections:e.allElections,onCreate:l.handleCreateEntry,onUpdate:l.handleUpdateEntry,onCancel:l.hideForm},null,8,["entry","elections","onCreate","onUpdate","onCancel"])])):((0,i.uX)(),(0,i.CE)("div",Vr,[(0,i.bF)(r,{elections:e.allElections,entries:l.filteredEntries,onEdit:l.editEntry,onDelete:l.deleteEntry},null,8,["elections","entries","onEdit","onDelete"])]))])}const Rr={class:"mb-3"},Dr={class:"mb-3"},Pr={class:"mb-3"},Mr={class:"mb-3"},Nr=["value"],Or={class:"d-flex justify-content-between"},Ur={type:"submit",class:"btn btn-primary"};function $r(e,t,s,n,l,o){return(0,i.uX)(),(0,i.CE)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,i.Lk)("div",Rr,[t[6]||(t[6]=(0,i.Lk)("label",{for:"firstName",class:"form-label"},"First Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.firstName=e),type:"text",class:"form-control",id:"firstName",required:""},null,512),[[a.Jo,l.form.firstName]])]),(0,i.Lk)("div",Dr,[t[7]||(t[7]=(0,i.Lk)("label",{for:"lastName",class:"form-label"},"Last Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.lastName=e),type:"text",class:"form-control",id:"lastName",required:""},null,512),[[a.Jo,l.form.lastName]])]),(0,i.Lk)("div",Pr,[t[8]||(t[8]=(0,i.Lk)("label",{for:"studentId",class:"form-label"},"Student ID",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.studentId=e),type:"text",class:"form-control",id:"studentId",required:""},null,512),[[a.Jo,l.form.studentId]])]),(0,i.Lk)("div",Mr,[t[9]||(t[9]=(0,i.Lk)("label",{for:"election",class:"form-label"},"Election",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.electionId=e),class:"form-select",id:"election",required:""},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.elections,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.electionId,value:e.electionId},(0,r.v_)(e.title),9,Nr)))),128))],512),[[a.u1,l.form.electionId]])]),(0,i.Lk)("div",Or,[(0,i.Lk)("button",Ur,(0,r.v_)(s.entry?"Edit Electoral Roll":"Add to Electoral Roll"),1),(0,i.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>o.cancel&&o.cancel(...e)),class:"btn btn-secondary"},t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,i.eW)(" Cancel ")]))])],32)}const qr={name:"ElectoralRollForm",props:{entry:{type:Object,default:null},elections:{type:Array,required:!0}},data(){return{form:{firstName:"",lastName:"",studentId:"",electionId:null}}},watch:{entry:{immediate:!0,handler(e){e?this.form={firstName:e.first_name||"",lastName:e.last_name||"",studentId:e.student_id||"",electionId:e.election||null}:this.resetForm()}}},methods:{handleSubmit(){const e={first_name:this.form.firstName,last_name:this.form.lastName,student_id:this.form.studentId,election:this.form.electionId};this.entry?this.$emit("update",{...e,id:this.entry.id}):this.$emit("create",e),this.resetForm()},resetForm(){this.form={firstName:"",lastName:"",studentId:"",electionId:null}},cancel(){this.$emit("cancel")}}},Gr=(0,C.A)(qr,[["render",$r]]),Br=Gr,jr={class:"electoral-roll-list"},Qr={class:"d-flex justify-content-between align-items-center mb-3"},Kr={class:"d-flex align-items-center"},Hr=["value"],Jr={class:"table"},Yr=["onClick"],zr=["onClick"];function Zr(e,t,s,n,l,o){return(0,i.uX)(),(0,i.CE)("div",jr,[(0,i.Lk)("div",Qr,[t[3]||(t[3]=(0,i.Lk)("h5",null,"Electoral Roll",-1)),(0,i.Lk)("div",Kr,[t[2]||(t[2]=(0,i.Lk)("span",{class:"me-2"},"Filter by Election:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedElectionId=e),class:"form-select form-select-sm",style:{width:"250px"}},[t[1]||(t[1]=(0,i.Lk)("option",{value:""},"All Elections",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.elections,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.electionId,value:e.electionId},(0,r.v_)(e.title),9,Hr)))),128))],512),[[a.u1,l.selectedElectionId]])])]),(0,i.Lk)("table",Jr,[t[6]||(t[6]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"#"),(0,i.Lk)("th",null,"First Name"),(0,i.Lk)("th",null,"Last Name"),(0,i.Lk)("th",null,"Student ID"),(0,i.Lk)("th",null,"Election"),(0,i.Lk)("th",null,"Actions")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredEntries,((s,a)=>((0,i.uX)(),(0,i.CE)("tr",{key:s.id},[(0,i.Lk)("td",null,(0,r.v_)(a+1),1),(0,i.Lk)("td",null,(0,r.v_)(s.first_name),1),(0,i.Lk)("td",null,(0,r.v_)(s.last_name),1),(0,i.Lk)("td",null,(0,r.v_)(s.student_id),1),(0,i.Lk)("td",null,(0,r.v_)(s.election_title),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{onClick:t=>e.$emit("edit",s),class:"btn btn-primary btn-sm me-2"},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,Yr),(0,i.Lk)("button",{onClick:t=>e.$emit("delete",s.id),class:"btn btn-danger btn-sm"},t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,zr)])])))),128))])])])}const ec={name:"ElectoralRollList",props:{entries:{type:Array,required:!0},elections:{type:Array,required:!0}},data(){return{selectedElectionId:""}},computed:{filteredEntries(){return this.selectedElectionId?this.entries.filter((e=>String(e.election)===String(this.selectedElectionId)||String(e.electionId)===String(this.selectedElectionId))):this.entries}}},tc=(0,C.A)(ec,[["render",Zr]]),sc=tc,ac={name:"ElectoralRollManagement",components:{ElectoralRollForm:Br,ElectoralRollList:sc},data(){return{showForm:!1,selectedEntry:null,searchTerm:"",electionFilter:"",electoralRoll:[]}},computed:{...(0,E.L8)(["allElections"]),filteredEntries(){let e=[...this.electoralRoll];if(this.electionFilter&&(e=e.filter((e=>e.electionId===parseInt(this.electionFilter)))),this.searchTerm){const t=this.searchTerm.toLowerCase();e=e.filter((e=>e.firstName.toLowerCase().includes(t)||e.lastName.toLowerCase().includes(t)||e.studentId.toLowerCase().includes(t)))}return e}},watch:{electionFilter(e){this.loadElectoralRollByElection(e)}},methods:{...(0,E.i0)(["fetchElectoralRoll","addElectoralRollEntry","deleteElectoralRollEntry","updateElectoralRollEntry"]),async loadElectoralRollByElection(e){try{e?(console.log("election ID in ElectionRollManagement: ",e),this.electoralRoll=await this.fetchElectoralRoll(e)):(console.log("Loading all electoral roll entries"),this.electoralRoll=await this.fetchElectoralRoll())}catch(t){console.error("Error loading electoral roll:",t)}},showCreateForm(){this.selectedEntry=null,this.showForm=!0},editEntry(e){this.selectedEntry=e,this.showForm=!0},hideForm(){this.showForm=!1,this.selectedEntry=null},async handleCreateEntry(e){try{await this.addElectoralRollEntry(e),this.hideForm(),this.loadElectoralRollByElection(this.electionFilter)}catch(t){console.error("Error creating electoral roll entry:",t)}},async handleUpdateEntry(e){try{await this.updateElectoralRollEntry(e),this.hideForm(),this.loadElectoralRollByElection(this.electionFilter)}catch(t){console.error("Error updating electoral roll entry:",t)}},async deleteEntry(e){try{await this.deleteElectoralRollEntry(e),this.loadElectoralRollByElection(this.electionFilter)}catch(t){console.error("Error deleting electoral roll entry:",t)}}},async created(){await this.loadElectoralRollByElection()}},ic=(0,C.A)(ac,[["render",Xr]]),nc=ic,lc={class:"candidate-management"},oc={class:"d-flex justify-content-between align-items-center mb-4"},rc={key:0,class:"mb-5"},cc={key:1},dc={class:"card"},uc={class:"card-header bg-primary text-white d-flex justify-content-between align-items-center"},mc={class:"filter-group"},hc={class:"input-group"},pc=["value"],fc={class:"card-body p-0"},kc={key:0,class:"text-center py-4"},vc={key:1,class:"text-center py-4"},bc={key:2,class:"table-responsive"},gc={class:"table table-hover mb-0"},Lc={key:0,class:"party-badge"},yc={key:1,class:"text-muted"},Ec={class:"text-truncate d-inline-block",style:{"max-width":"150px"}},wc={class:"text-center"},Cc={key:0,class:"wallet-address"},Ic={key:1,class:"text-muted"},_c={class:"text-center"},Tc={class:"btn-group"},Ac=["onClick"],Fc=["onClick"],Sc={class:"modal fade",id:"manifestoModal",tabindex:"-1","aria-hidden":"true"},Wc={class:"modal-dialog"},xc={class:"modal-content"},Vc={class:"modal-header"},Xc={key:0,class:"modal-title"},Rc={key:0,class:"modal-body"};function Dc(e,t,s,n,l,o){const c=(0,i.g2)("CandidateForm");return(0,i.uX)(),(0,i.CE)("div",lc,[(0,i.Lk)("div",oc,[t[4]||(t[4]=(0,i.Lk)("h2",null,"Candidate Management",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.showCreateForm&&o.showCreateForm(...e)),class:"btn btn-primary"},t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-plus me-1"},null,-1),(0,i.eW)(" Add New Candidate ")]))]),l.showForm?((0,i.uX)(),(0,i.CE)("div",rc,[(0,i.bF)(c,{candidate:l.selectedCandidate,elections:e.allElections,parties:l.parties,onCreate:o.handleCreateCandidate,onUpdate:o.handleUpdateCandidate,onCancel:o.hideForm},null,8,["candidate","elections","parties","onCreate","onUpdate","onCancel"])])):((0,i.uX)(),(0,i.CE)("div",cc,[(0,i.Lk)("div",dc,[(0,i.Lk)("div",uc,[t[7]||(t[7]=(0,i.Lk)("h5",{class:"mb-0"},"Candidates",-1)),(0,i.Lk)("div",mc,[(0,i.Lk)("div",hc,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control form-control-sm",placeholder:"Search candidates...","onUpdate:modelValue":t[1]||(t[1]=e=>l.searchTerm=e)},null,512),[[a.Jo,l.searchTerm]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.electionFilter=e),class:"form-select form-select-sm"},[t[5]||(t[5]=(0,i.Lk)("option",{value:""},"All Elections",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.allElections,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.electionId,value:e.electionId},(0,r.v_)(e.title),9,pc)))),128))],512),[[a.u1,l.electionFilter]]),t[6]||(t[6]=(0,i.Lk)("button",{class:"btn btn-light btn-sm"},[(0,i.Lk)("i",{class:"fas fa-search"})],-1))])])]),(0,i.Lk)("div",fc,[l.isLoading?((0,i.uX)(),(0,i.CE)("div",kc,t[8]||(t[8]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading candidates...",-1)]))):0===o.filteredCandidates.length?((0,i.uX)(),(0,i.CE)("div",vc,t[9]||(t[9]=[(0,i.Lk)("div",{class:"alert alert-info m-3"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" No candidates found matching your criteria. ")],-1)]))):((0,i.uX)(),(0,i.CE)("div",bc,[(0,i.Lk)("table",gc,[t[13]||(t[13]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Name"),(0,i.Lk)("th",null,"Election"),(0,i.Lk)("th",null,"Position"),(0,i.Lk)("th",null,"Party"),(0,i.Lk)("th",null,"Bio"),(0,i.Lk)("th",{class:"text-center"},"Wallet"),(0,i.Lk)("th",{class:"text-center"},"Actions")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredCandidates,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.candidateId},[(0,i.Lk)("td",null,(0,r.v_)(e.name),1),(0,i.Lk)("td",null,(0,r.v_)(o.getElectionName(e.election)),1),(0,i.Lk)("td",null,(0,r.v_)(o.getPositionName(e.election,e.position)),1),(0,i.Lk)("td",null,[e.party?((0,i.uX)(),(0,i.CE)("span",Lc,(0,r.v_)(e.party_name),1)):((0,i.uX)(),(0,i.CE)("span",yc,"Independent"))]),(0,i.Lk)("td",null,[(0,i.Lk)("span",Ec,(0,r.v_)(e.bio),1)]),(0,i.Lk)("td",wc,[e.wallet?((0,i.uX)(),(0,i.CE)("span",Cc,(0,r.v_)(o.truncateAddress(e.wallet)),1)):((0,i.uX)(),(0,i.CE)("span",Ic,t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-times-circle me-1"},null,-1),(0,i.eW)(" Not set ")])))]),(0,i.Lk)("td",_c,[(0,i.Lk)("div",Tc,[(0,i.Lk)("button",{onClick:t=>o.editCandidate(e),class:"btn btn-sm btn-outline-primary"},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,Ac),(0,i.Lk)("button",{onClick:t=>o.viewManifesto(e),class:"btn btn-sm btn-outline-info",title:"View Manifesto"},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-file-alt"},null,-1)]),8,Fc)])])])))),128))])])]))])])])),(0,i.Lk)("div",Sc,[(0,i.Lk)("div",Wc,[(0,i.Lk)("div",xc,[(0,i.Lk)("div",Vc,[l.selectedCandidate?((0,i.uX)(),(0,i.CE)("h5",Xc,(0,r.v_)(l.selectedCandidate.name)+" - Manifesto",1)):(0,i.Q3)("",!0),t[14]||(t[14]=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),l.selectedCandidate?((0,i.uX)(),(0,i.CE)("div",Rc,[(0,i.Lk)("p",null,(0,r.v_)(l.selectedCandidate.manifesto),1)])):(0,i.Q3)("",!0),t[15]||(t[15]=(0,i.Lk)("div",{class:"modal-footer"},[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])])}const Pc={class:"candidate-form"},Mc={class:"card"},Nc={class:"card-header bg-primary text-white"},Oc={class:"mb-0"},Uc={class:"card-body"},$c={class:"mb-3"},qc={key:0,class:"invalid-feedback"},Gc={class:"row mb-3"},Bc={class:"col-md-6"},jc=["value"],Qc={key:0,class:"invalid-feedback"},Kc={class:"col-md-6"},Hc=["value"],Jc={key:0,class:"invalid-feedback"},Yc={class:"mb-3"},zc=["value"],Zc={key:0,class:"invalid-feedback"},ed={class:"mb-3"},td={key:0,class:"invalid-feedback"},sd={class:"mb-3"},ad={key:0,class:"invalid-feedback"},id={class:"mb-3"},nd={key:0,class:"invalid-feedback"},ld={key:0,class:"alert alert-info mb-4"},od={class:"d-flex justify-content-between"},rd=["disabled"];function cd(e,t,s,n,l,o){return(0,i.uX)(),(0,i.CE)("div",Pc,[(0,i.Lk)("div",Mc,[(0,i.Lk)("div",Nc,[(0,i.Lk)("h5",Oc,(0,r.v_)(o.isEditing?"Edit Candidate":"Add New Candidate"),1)]),(0,i.Lk)("div",Uc,[(0,i.Lk)("form",{onSubmit:t[11]||(t[11]=(0,a.D$)(((...e)=>o.submitForm&&o.submitForm(...e)),["prevent"]))},[(0,i.Lk)("div",$c,[t[12]||(t[12]=(0,i.Lk)("label",{for:"name",class:"form-label"},"Full Name*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.name}]),required:""},null,2),[[a.Jo,l.form.name]]),l.errors.name?((0,i.uX)(),(0,i.CE)("div",qc,(0,r.v_)(l.errors.name),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Gc,[(0,i.Lk)("div",Bc,[t[14]||(t[14]=(0,i.Lk)("label",{for:"electionId",class:"form-label"},"Election*",-1)),(0,i.bo)((0,i.Lk)("select",{id:"electionId","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.electionId=e),class:(0,r.C4)(["form-select",{"is-invalid":l.errors.electionId}]),required:"",onChange:t[2]||(t[2]=(...e)=>o.logElectionId&&o.logElectionId(...e))},[t[13]||(t[13]=(0,i.Lk)("option",{value:""},"-- Select Election --",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.elections,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.electionId,value:e.electionId},(0,r.v_)(e.title),9,jc)))),128))],34),[[a.u1,l.form.electionId]]),l.errors.electionId?((0,i.uX)(),(0,i.CE)("div",Qc,(0,r.v_)(l.errors.electionId),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Kc,[t[16]||(t[16]=(0,i.Lk)("label",{for:"positionId",class:"form-label"},"Position*",-1)),(0,i.bo)((0,i.Lk)("select",{id:"positionId","onUpdate:modelValue":t[3]||(t[3]=e=>l.form.positionId=e),class:(0,r.C4)(["form-select",{"is-invalid":l.errors.positionId}]),required:"",onChange:t[4]||(t[4]=(...e)=>o.logPositionId&&o.logPositionId(...e))},[t[15]||(t[15]=(0,i.Lk)("option",{value:""},"-- Select Position --",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.positions,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.title),9,Hc)))),128))],34),[[a.u1,l.form.positionId]]),l.errors.positionId?((0,i.uX)(),(0,i.CE)("div",Jc,(0,r.v_)(l.errors.positionId),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Yc,[t[18]||(t[18]=(0,i.Lk)("label",{for:"partyId",class:"form-label"},"Party Affiliation",-1)),(0,i.bo)((0,i.Lk)("select",{id:"partyId","onUpdate:modelValue":t[5]||(t[5]=e=>l.form.partyId=e),class:(0,r.C4)(["form-select",{"is-invalid":l.errors.partyId}]),onChange:t[6]||(t[6]=(...e)=>o.logPartyId&&o.logPartyId(...e))},[t[17]||(t[17]=(0,i.Lk)("option",{value:""},"-- Select Party --",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.parties,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,zc)))),128))],34),[[a.u1,l.form.partyId]]),l.errors.partyId?((0,i.uX)(),(0,i.CE)("div",Zc,(0,r.v_)(l.errors.partyId),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",ed,[t[19]||(t[19]=(0,i.Lk)("label",{for:"bio",class:"form-label"},"Short Bio*",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"bio","onUpdate:modelValue":t[7]||(t[7]=e=>l.form.bio=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.bio}]),rows:"2",required:""},null,2),[[a.Jo,l.form.bio]]),l.errors.bio?((0,i.uX)(),(0,i.CE)("div",td,(0,r.v_)(l.errors.bio),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",sd,[t[20]||(t[20]=(0,i.Lk)("label",{for:"manifesto",class:"form-label"},"Manifesto*",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"manifesto","onUpdate:modelValue":t[8]||(t[8]=e=>l.form.manifesto=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.manifesto}]),rows:"4",required:""},null,2),[[a.Jo,l.form.manifesto]]),l.errors.manifesto?((0,i.uX)(),(0,i.CE)("div",ad,(0,r.v_)(l.errors.manifesto),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",id,[t[21]||(t[21]=(0,i.Lk)("label",{for:"wallet",class:"form-label"},"Ethereum Wallet (Optional)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"wallet","onUpdate:modelValue":t[9]||(t[9]=e=>l.form.wallet=e),class:(0,r.C4)(["form-control",{"is-invalid":l.errors.wallet}]),placeholder:"0x..."},null,2),[[a.Jo,l.form.wallet]]),l.errors.wallet?((0,i.uX)(),(0,i.CE)("div",nd,(0,r.v_)(l.errors.wallet),1)):(0,i.Q3)("",!0),t[22]||(t[22]=(0,i.Lk)("small",{class:"form-text text-muted"}," Ethereum wallet address for the candidate (if applicable) ",-1))]),o.isEditing?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ld,t[23]||(t[23]=[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,i.eW)(" Adding a candidate will register them in the blockchain smart contract. ")]))),(0,i.Lk)("div",od,[(0,i.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>o.cancel&&o.cancel(...e)),class:"btn btn-secondary"},t[24]||(t[24]=[(0,i.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,i.eW)(" Cancel ")])),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.isSubmitting},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",l.isSubmitting?"fa-spinner fa-spin":"fa-save"])},null,2),(0,i.eW)(" "+(0,r.v_)(l.isSubmitting?"Processing...":o.isEditing?"Update Candidate":"Add Candidate"),1)],8,rd)])],32)])])])}const dd={name:"CandidateForm",props:{candidate:{type:Object,default:null},elections:{type:Array,required:!0},parties:{type:Array,required:!0}},data(){return{form:{candidateId:null,name:"",electionId:"",positionId:"",partyId:"",bio:"",manifesto:"",wallet:""},errors:{},isSubmitting:!1}},computed:{isEditing(){return!!this.candidate},selectedElection(){return this.elections.find((e=>e.electionId===this.form.electionId))},positions(){return this.selectedElection&&this.selectedElection.positions||[]}},watch:{candidate(e){e&&this.initForm(e)}},methods:{initForm(e){this.form={candidateId:e.candidateId,name:e.name,electionId:e.electionId,positionId:e.positionId,partyId:e.partyId||"",bio:e.bio,manifesto:e.manifesto,wallet:e.wallet||""}},logElectionId(){console.log("Selected Election ID: ",this.form.electionId)},logPositionId(){console.log("Selected Position ID:",this.form.positionId)},logPartyId(){console.log("Selected Party ID:",this.form.partyId)},validateForm(){return this.errors={},this.form.name.trim()||(this.errors.name="Name is required"),this.form.electionId||(this.errors.electionId="Election is required"),this.form.positionId||(this.errors.positionId="Position is required"),this.form.bio.trim()||(this.errors.bio="Bio is required"),this.form.manifesto.trim()||(this.errors.manifesto="Manifesto is required"),this.form.wallet&&!/^0x[a-fA-F0-9]{40}$/.test(this.form.wallet)&&(this.errors.wallet="Invalid Ethereum wallet address"),0===Object.keys(this.errors).length},async submitForm(){if(this.validateForm()){console.log("Form data being submitted to vuex :",this.form),this.isSubmitting=!0,this.isEditing||(this.form.candidateId=Math.floor(1e7+9e7*Math.random()));try{this.isEditing?await this.$emit("update",{id:this.candidate.id,data:this.form}):await this.$emit("create",this.form),this.isEditing||this.resetForm()}catch(e){console.error("Error submitting form:",e)}finally{this.isSubmitting=!1}}},resetForm(){this.form={candidateId:null,name:"",electionId:"",positionId:"",partyId:"",bio:"",manifesto:"",wallet:""},this.errors={}},cancel(){this.$emit("cancel")}},created(){this.candidate&&this.initForm(this.candidate)}},ud=(0,C.A)(dd,[["render",cd],["__scopeId","data-v-62788e88"]]),md=ud,hd={name:"CandidateManagement",components:{CandidateForm:md},data(){return{showForm:!1,selectedCandidate:null,isLoading:!1,searchTerm:"",electionFilter:"",manifestoModal:null,parties:[]}},computed:{...(0,E.L8)(["allElections","candidates"]),filteredCandidates(){let e=[...this.candidates];if(this.electionFilter){const t=parseInt(this.electionFilter);e=e.filter((e=>e.election===t))}if(this.searchTerm){const t=this.searchTerm.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.bio.toLowerCase().includes(t)||e.manifesto&&e.manifesto.toLowerCase().includes(t)))}return e}},methods:{...(0,E.i0)(["fetchCandidates","fetchParties","createCandidate","updateCandidate"]),truncateAddress(e){return e?e.slice(0,6)+"..."+e.slice(-4):""},getElectionName(e){const t=this.allElections.find((t=>t.electionId===e));return t?t.title:"Unknown Election"},getPositionName(e,t){const s=this.allElections.find((t=>t.electionId===e));if(!s||!s.positions)return"Unknown Position";const a=s.positions.find((e=>e.id===t));return a?a.title:"Unknown Position"},showCreateForm(){this.selectedCandidate=null,this.showForm=!0},editCandidate(e){this.selectedCandidate=e,this.showForm=!0},hideForm(){this.showForm=!1,this.selectedCandidate=null},viewManifesto(e){this.selectedCandidate=e,this.manifestoModal=new bootstrap.Modal(document.getElementById("manifestoModal")),this.manifestoModal.show()},async handleCreateCandidate(e){try{await this.createCandidate(e),this.hideForm()}catch(t){console.error("Error creating candidate:",t)}},async handleUpdateCandidate(e,t){try{await this.updateCandidate(e,t),this.hideForm()}catch(s){console.error("Error updating candidate:",s)}}},async created(){this.isLoading=!0;try{await this.fetchCandidates(),await this.fetchParties(),this.parties=this.$store.getters.allParties}catch(e){console.error("Error fetching candidates:",e),console.error("Error fetching parties:",e)}finally{this.isLoading=!1}}},pd=(0,C.A)(hd,[["render",Dc],["__scopeId","data-v-57966eec"]]),fd=pd,kd={class:"voter-management"},vd={key:0,class:"alert alert-warning mb-4"};function bd(e,t,s,a,n,l){const o=(0,i.g2)("VoterList");return(0,i.uX)(),(0,i.CE)("div",kd,[t[1]||(t[1]=(0,i.Lk)("div",{class:"d-flex justify-content-between align-items-center mb-4"},[(0,i.Lk)("h2",null,"Voter Management")],-1)),e.isConnected?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",vd,t[0]||(t[0]=[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1),(0,i.Lk)("strong",null,"MetaMask not connected.",-1),(0,i.eW)(" Please connect your wallet to whitelist voters. ")]))),(0,i.bF)(o,{voters:e.voters,elections:e.allElections,isLoading:n.isLoading,onWhitelist:l.handleWhitelistVoter},null,8,["voters","elections","isLoading","onWhitelist"])])}const gd={class:"voter-list"},Ld={class:"card"},yd={class:"card-header bg-primary text-white d-flex justify-content-between align-items-center"},Ed={class:"d-flex align-items-center"},wd={class:"input-group me-2"},Cd={class:"card-body p-0"},Id={key:0,class:"text-center py-4"},_d={key:1,class:"text-center py-4"},Td={key:2,class:"table-responsive"},Ad={class:"table table-hover mb-0"},Fd={class:"wallet-address"},Sd={key:0,class:"badge bg-light text-black"},Wd={key:1,class:"text-muted"},xd={class:"text-center"},Vd=["onClick","disabled"],Xd={class:"text-center"},Rd={key:0},Dd={class:"badge bg-success"},Pd={key:1},Md={class:"modal fade",id:"whitelistModal",tabindex:"-1","aria-hidden":"true"},Nd={class:"modal-dialog"},Od={class:"modal-content"},Ud={class:"modal-body"},$d={class:"mb-3"},qd={key:0,class:"invalid-feedback"},Gd={class:"mb-3"},Bd={for:"electionDropdown",class:"form-label"},jd={key:0,class:"badge bg-success ms-2"},Qd={key:1,class:"badge bg-danger ms-2"},Kd=["value"],Hd={key:0,class:"alert alert-warning"},Jd={key:1,class:"invalid-feedback"},Yd={class:"d-flex justify-content-end"},zd=["disabled","title"];function Zd(e,t,s,n,l,o){return(0,i.uX)(),(0,i.CE)("div",gd,[(0,i.Lk)("div",Ld,[(0,i.Lk)("div",yd,[t[7]||(t[7]=(0,i.Lk)("h5",{class:"mb-0"},"Registered Voters",-1)),(0,i.Lk)("div",Ed,[(0,i.Lk)("div",wd,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control form-control-sm",placeholder:"Search voters...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e)},null,512),[[a.Jo,l.searchTerm]]),t[5]||(t[5]=(0,i.Lk)("button",{class:"btn btn-light btn-sm"},[(0,i.Lk)("i",{class:"fas fa-search"})],-1))]),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.showWhitelistModal&&o.showWhitelistModal(...e)),class:"btn btn-light btn-sm"},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-plus me-1"},null,-1),(0,i.eW)(" Whitelist Voter ")]))])]),(0,i.Lk)("div",Cd,[s.isLoading?((0,i.uX)(),(0,i.CE)("div",Id,t[8]||(t[8]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading voters...",-1)]))):0===o.filteredVoters.length?((0,i.uX)(),(0,i.CE)("div",_d,t[9]||(t[9]=[(0,i.Lk)("div",{class:"alert alert-info m-3"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" No voters found. ")],-1)]))):((0,i.uX)(),(0,i.CE)("div",Td,[(0,i.Lk)("table",Ad,[t[15]||(t[15]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Name"),(0,i.Lk)("th",null,"Student ID"),(0,i.Lk)("th",null,"Email"),(0,i.Lk)("th",null,"Ethereum Address"),(0,i.Lk)("th",{class:"text-center"},"Actions"),(0,i.Lk)("th",{class:"text-center"},"Status")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredVoters,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,r.v_)(e.first_name)+" "+(0,r.v_)(e.last_name),1),(0,i.Lk)("td",null,(0,r.v_)(e.student_id),1),(0,i.Lk)("td",null,(0,r.v_)(e.email),1),(0,i.Lk)("td",Fd,[e.wallet_address?((0,i.uX)(),(0,i.CE)("span",Sd,[t[10]||(t[10]=(0,i.Lk)("i",{class:"fab fa-ethereum me-2"},null,-1)),(0,i.eW)(" "+(0,r.v_)(o.truncateAddress(e.wallet_address)),1)])):((0,i.uX)(),(0,i.CE)("span",Wd,t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-exclamation-circle me-1"},null,-1),(0,i.eW)(" Not connected ")])))]),(0,i.Lk)("td",xd,[(0,i.Lk)("button",{onClick:t=>o.whitelistVoter(e),class:"btn btn-sm btn-success me-1",disabled:l.isProcessing},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",l.isProcessing?"fa-spinner fa-spin":"fa-plus"])},null,2),t[12]||(t[12]=(0,i.eW)(" Whitelist "))],8,Vd)]),(0,i.Lk)("td",Xd,[l.whitelistedElections[e.id]&&l.whitelistedElections[e.id].length>0?((0,i.uX)(),(0,i.CE)("div",Rd,[(0,i.Lk)("span",Dd,[t[13]||(t[13]=(0,i.eW)("Whitelisted for: ")),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.whitelistedElections[e.id],(e=>((0,i.uX)(),(0,i.CE)("span",{key:e,class:"badge bg-light text-black me-1"},(0,r.v_)(e)+"Â  ",1)))),128))])])):((0,i.uX)(),(0,i.CE)("div",Pd,t[14]||(t[14]=[(0,i.Lk)("span",{class:"badge bg-warning"},"Not Whitelisted for any election. ",-1)])))])])))),128))])])]))])]),(0,i.Lk)("div",Md,[(0,i.Lk)("div",Nd,[(0,i.Lk)("div",Od,[t[21]||(t[21]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"},"Whitelist Voter"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,i.Lk)("div",Ud,[(0,i.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>o.handleWhitelistSubmit&&o.handleWhitelistSubmit(...e)),["prevent"]))},[(0,i.Lk)("div",$d,[t[16]||(t[16]=(0,i.Lk)("label",{for:"voterAddress",class:"form-label"},"Voter's Ethereum Address*",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"voterAddress","onUpdate:modelValue":t[2]||(t[2]=e=>l.whitelistForm.voterAddress=e),class:(0,r.C4)(["form-control",{"is-invalid":l.whitelistForm.error}]),placeholder:"0x...",required:""},null,2),[[a.Jo,l.whitelistForm.voterAddress]]),l.whitelistForm.error?((0,i.uX)(),(0,i.CE)("div",qd,(0,r.v_)(l.whitelistForm.error),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Gd,[(0,i.Lk)("label",Bd,[o.isVoterInElectoralRoll?((0,i.uX)(),(0,i.CE)("span",jd,"Voter verified in Electoral Roll")):o.isVoterInElectoralRoll?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",Qd,"Voter not present in Electoral Roll. Contact Election Officials."))]),(0,i.bo)((0,i.Lk)("select",{id:"electionId","onUpdate:modelValue":t[3]||(t[3]=e=>l.whitelistForm.electionId=e),class:(0,r.C4)(["form-select",{"is-invalid":l.whitelistForm.electionError}]),required:""},[t[17]||(t[17]=(0,i.Lk)("option",{value:""},"-- Select Election --",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.elections,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.electionId,value:e.electionId},(0,r.v_)(e.title),9,Kd)))),128))],2),[[a.u1,l.whitelistForm.electionId]]),!o.isVoterInElectoralRoll&&l.whitelistForm.electionId?((0,i.uX)(),(0,i.CE)("div",Hd,t[18]||(t[18]=[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1),(0,i.eW)(" This voter must be verified in the Electoral Roll before they can be whitelisted. Please contact Election Officials. ")]))):(0,i.Q3)("",!0),l.whitelistForm.electionError?((0,i.uX)(),(0,i.CE)("div",Jd,(0,r.v_)(l.whitelistForm.electionError),1)):(0,i.Q3)("",!0)]),t[20]||(t[20]=(0,i.Lk)("div",{class:"alert alert-info"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" Whitelisting a voter will add their address to the smart contract's approved voters list. ")],-1)),(0,i.Lk)("div",Yd,[t[19]||(t[19]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary me-2","data-bs-dismiss":"modal"},"Cancel",-1)),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.whitelistForm.isSubmitting||!o.isVoterInElectoralRoll,title:o.isVoterInElectoralRoll?"":"Voter must be verified in Electoral Roll"},[(0,i.Lk)("i",{class:(0,r.C4)(["fas",l.whitelistForm.isSubmitting?"fa-spinner fa-spin":"fa-check"])},null,2),(0,i.eW)(" "+(0,r.v_)(l.whitelistForm.isSubmitting?"Processing...":"Whitelist Voter"),1)],8,zd)])],32)])])])])])}const eu={name:"VoterList",props:{voters:{type:Array,required:!0},elections:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},data(){return{searchTerm:"",isProcessing:!1,whitelistForm:{voterAddress:"",electionId:"",error:"",electionError:"",isSubmitting:!1},isVerified:!1,whitelistModal:null,whitelistedElections:[],selectedElectionId:"",electoralRoll:[],selectedVoter:null}},watch:{async"whitelistForm.electionId"(e){if(e&&this.selectedVoter?.student_id)try{const t=await Le.checkElectoralRoll(e,this.selectedVoter.student_id);console.log("Electoral roll verification response:",t),this.isVerified=t.data?.isVerified||!1,this.isVerified&&(this.whitelistForm.error="")}catch(t){console.error("Error checking electoral roll:",t),this.isVerified=!1}else this.isVerified=!1}},computed:{filteredVoters(){if(!this.searchTerm)return this.voters;const e=this.searchTerm.toLowerCase();return this.voters.filter((e=>!e.is_admin)).filter((t=>t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.studentId.toLowerCase().includes(e)||t.walletAddress&&t.walletAddress.toLowerCase().includes(e)))},isVoterInElectoralRoll(){return this.isVerified}},methods:{truncateAddress(e){return e?e.slice(0,6)+"..."+e.slice(-4):""},async loadWhitelistedElections(){try{const e=await Le.getVoterElectionWhitelist();e.data.forEach((e=>{e.is_whitelisted&&(this.whitelistedElections[e.voter]||(this.whitelistedElections[e.voter]=[]),this.whitelistedElections[e.voter].push(e.election_title))}))}catch(e){console.error("Error fetching whitelisted elections:",e)}},async fetchElectoralRoll(e){try{const t=await this.$store.dispatch("fetchElectoralRoll",e);this.electoralRoll=t}catch(t){this.electoralRoll=[],console.error("Failed to fetch electoral roll:",t)}},showWhitelistModal(e=null){this.resetWhitelistForm(),e&&e.wallet_address&&(this.whitelistForm.voterAddress=e.wallet_address),this.whitelistModal=new bootstrap.Modal(document.getElementById("whitelistModal")),this.whitelistModal.show(),this.selectedVoter=e,this.isVerified=!1},resetWhitelistForm(){this.whitelistForm={voterAddress:"",electionId:"",error:"",electionError:"",isSubmitting:!1}},validateWhitelistForm(){return this.whitelistForm.error="",this.whitelistForm.electionError="",this.whitelistForm.voterAddress?/^0x[a-fA-F0-9]{40}$/.test(this.whitelistForm.voterAddress)?!!this.whitelistForm.electionId||(this.whitelistForm.electionError="Please select an election",!1):(this.whitelistForm.error="Invalid Ethereum address format",!1):(this.whitelistForm.error="Ethereum address is required",!1)},async handleWhitelistSubmit(){if(this.validateWhitelistForm()){this.whitelistForm.isSubmitting=!0;try{await this.$emit("whitelist",{electionId:this.whitelistForm.electionId,voterAddress:this.whitelistForm.voterAddress}),this.whitelistModal.hide(),this.resetWhitelistForm()}catch(e){console.error("Error whitelisting voter:",e),this.whitelistForm.error="Failed to whitelist voter: "+(e.message||"Unknown error")}finally{this.whitelistForm.isSubmitting=!1}}},async whitelistVoter(e){e.wallet_address&&this.showWhitelistModal(e)}},async created(){await this.loadWhitelistedElections()}},tu=(0,C.A)(eu,[["render",Zd],["__scopeId","data-v-b82dd33a"]]),su=tu,au={name:"VoterManagement",components:{VoterList:su},data(){return{isLoading:!0}},computed:{...(0,E.L8)(["allElections","voters","isConnected"]),logVoters(){return this.voters}},methods:{...(0,E.i0)(["fetchVoters","whitelistVoter"]),async handleWhitelistVoter({electionId:e,voterAddress:t}){if(this.isConnected)try{return await this.whitelistVoter({electionId:e,voterAddress:t}),await this.fetchVoters(),!0}catch(s){throw console.error("Error whitelisting voter:",s),alert("Failed to whitelist voter: "+(s.message||"Unknown error")),s}else alert("Please connect your MetaMask wallet first")}},async created(){try{await this.fetchVoters()}catch(e){console.error("Error fetching voters:",e)}finally{this.isLoading=!1}}},iu=(0,C.A)(au,[["render",bd],["__scopeId","data-v-6371289c"]]),nu=iu,lu={class:"results-view"},ou={class:"d-flex justify-content-between align-items-center mb-4"},ru={key:0,class:"election-selector d-flex align-items-center"},cu=["value"],du={key:0,class:"alert alert-warning mb-4"},uu={class:"mt-3"},mu={key:1,class:"card mb-4"},hu={class:"card-body"},pu={class:"list-group"},fu=["onClick"],ku={key:2,class:"text-center py-4"},vu={key:3},bu={class:"card mb-4"},gu={class:"card-body"},Lu={class:"row"},yu={class:"col-md-8"},Eu={class:"election-meta my-3"},wu={class:"row"},Cu={class:"col-md-6"},Iu={class:"meta-item"},_u={class:"meta-item"},Tu={class:"col-md-6"},Au={class:"meta-item"},Fu={class:"meta-item"},Su={class:"col-md-4 d-flex align-items-center justify-content-center"},Wu={class:"blockchain-info text-center"},xu={key:0,target:"_blank",class:"contract-link"},Vu={key:1,class:"text-muted"},Xu={key:0,class:"alert alert-info mb-4"},Ru={key:1,class:"alert alert-info mb-4"},Du={key:2};function Pu(e,t,s,n,l,o){const c=(0,i.g2)("ConnectWallet"),d=(0,i.g2)("ResultDisplay");return(0,i.uX)(),(0,i.CE)("div",lu,[(0,i.Lk)("div",ou,[t[2]||(t[2]=(0,i.Lk)("h2",null,"Election Results",-1)),o.selectedElection?((0,i.uX)(),(0,i.CE)("div",ru,[t[1]||(t[1]=(0,i.Lk)("span",{class:"me-2"},"Viewing:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedElectionId=e),class:"form-select form-select-sm",style:{width:"250px"}},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.allElections,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.electionId,value:e.electionId},(0,r.v_)(e.title),9,cu)))),128))],512),[[a.u1,l.selectedElectionId]])])):(0,i.Q3)("",!0)]),e.isConnected?o.selectedElection?l.isLoading?((0,i.uX)(),(0,i.CE)("div",ku,t[8]||(t[8]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading election results...",-1)]))):((0,i.uX)(),(0,i.CE)("div",vu,[(0,i.Lk)("div",bu,[t[20]||(t[20]=(0,i.Lk)("div",{class:"card-header bg-primary text-white"},[(0,i.Lk)("h5",{class:"mb-0"},"Election Overview")],-1)),(0,i.Lk)("div",gu,[(0,i.Lk)("div",Lu,[(0,i.Lk)("div",yu,[(0,i.Lk)("h3",null,(0,r.v_)(o.selectedElection.title),1),(0,i.Lk)("p",null,(0,r.v_)(o.selectedElection.description),1),(0,i.Lk)("div",Eu,[(0,i.Lk)("div",wu,[(0,i.Lk)("div",Cu,[(0,i.Lk)("div",Iu,[t[9]||(t[9]=(0,i.Lk)("i",{class:"far fa-calendar-alt me-2"},null,-1)),t[10]||(t[10]=(0,i.Lk)("strong",null,"Start:",-1)),(0,i.eW)(" "+(0,r.v_)(o.formatDateTime(o.selectedElection.startTime)),1)]),(0,i.Lk)("div",_u,[t[11]||(t[11]=(0,i.Lk)("i",{class:"far fa-calendar-check me-2"},null,-1)),t[12]||(t[12]=(0,i.Lk)("strong",null,"End:",-1)),(0,i.eW)(" "+(0,r.v_)(o.formatDateTime(o.selectedElection.endTime)),1)])]),(0,i.Lk)("div",Tu,[(0,i.Lk)("div",Au,[t[13]||(t[13]=(0,i.Lk)("i",{class:"fas fa-users me-2"},null,-1)),t[14]||(t[14]=(0,i.Lk)("strong",null,"Positions:",-1)),(0,i.eW)(" "+(0,r.v_)(o.selectedElection.positions?o.selectedElection.positions.length:0),1)]),(0,i.Lk)("div",Fu,[t[15]||(t[15]=(0,i.Lk)("i",{class:"fas fa-check-double me-2"},null,-1)),t[16]||(t[16]=(0,i.Lk)("strong",null,"Status:",-1)),(0,i.Lk)("span",{class:(0,r.C4)(["badge",o.getStatusBadgeClass(o.selectedElection.status)])},(0,r.v_)(o.selectedElection.status),3)])])])])]),(0,i.Lk)("div",Su,[(0,i.Lk)("div",Wu,[t[18]||(t[18]=(0,i.Lk)("i",{class:"fab fa-ethereum fa-3x mb-2 text-primary"},null,-1)),t[19]||(t[19]=(0,i.Lk)("p",{class:"mb-1"},[(0,i.Lk)("strong",null,"Blockchain Contract:")],-1)),o.selectedElection.contractAddress?((0,i.uX)(),(0,i.CE)("a",xu,[(0,i.eW)((0,r.v_)(o.truncateAddress(o.selectedElection.contractAddress))+" ",1),t[17]||(t[17]=(0,i.Lk)("i",{class:"fas fa-external-link-alt ms-1"},null,-1))])):((0,i.uX)(),(0,i.CE)("p",Vu,"No contract deployed"))])])])])]),"Closed"!==o.selectedElection.status&&"Voting"!==o.selectedElection.status?((0,i.uX)(),(0,i.CE)("div",Xu,t[21]||(t[21]=[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,i.eW)(" This election is not yet open for voting or results viewing. ")]))):o.hasResults?((0,i.uX)(),(0,i.CE)("div",Du,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.selectedElection.positions,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"mb-5"},[(0,i.bF)(d,{position:e,candidates:o.filteredCandidates,results:o.getResultsForPosition(e.position_id),winners:o.getResultsForPosition(e.position_id).winners,isLoading:l.loadingResults},null,8,["position","candidates","results","winners","isLoading"])])))),128))])):((0,i.uX)(),(0,i.CE)("div",Ru,t[22]||(t[22]=[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,i.eW)(" No votes have been recorded for this election yet. ")])))])):((0,i.uX)(),(0,i.CE)("div",mu,[(0,i.Lk)("div",hu,[t[6]||(t[6]=(0,i.Lk)("h5",{class:"card-title"},"Select an Election",-1)),t[7]||(t[7]=(0,i.Lk)("p",{class:"card-text"},"Choose an election to view its results:",-1)),(0,i.Lk)("div",pu,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.allElections,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.electionId,onClick:t=>o.selectElection(e.electionId),class:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},[(0,i.eW)((0,r.v_)(e.title)+" ",1),(0,i.Lk)("span",{class:(0,r.C4)(["badge",o.getStatusBadgeClass(e.status)])},(0,r.v_)(e.status),3)],8,fu)))),128))])])])):((0,i.uX)(),(0,i.CE)("div",du,[t[3]||(t[3]=(0,i.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[4]||(t[4]=(0,i.Lk)("strong",null,"MetaMask not connected.",-1)),t[5]||(t[5]=(0,i.eW)(" Please connect your wallet to view blockchain results. ")),(0,i.Lk)("div",uu,[(0,i.bF)(c)])]))])}const Mu={class:"results-display"},Nu={class:"card mb-4"},Ou={class:"card-header bg-primary text-white"},Uu={class:"mb-0"},$u={class:"card-body"},qu={key:0,class:"text-center py-4"},Gu={key:1,class:"text-center py-4"},Bu={key:2},ju={class:"chart-container mb-4"},Qu=["id"],Ku={class:"table-responsive"},Hu={class:"table table-hover"},Ju={class:"progress"},Yu={class:"table-light"},zu={key:0,class:"alert alert-success mt-3"},Zu={key:1,class:"alert alert-warning mt-3"};function em(e,t,s,a,n,l){return(0,i.uX)(),(0,i.CE)("div",Mu,[(0,i.Lk)("div",Nu,[(0,i.Lk)("div",Ou,[(0,i.Lk)("h5",Uu,[t[0]||(t[0]=(0,i.Lk)("i",{class:"fas fa-chart-bar me-2"},null,-1)),(0,i.eW)(" "+(0,r.v_)(s.position.title)+" Results ",1)])]),(0,i.Lk)("div",$u,[s.isLoading?((0,i.uX)(),(0,i.CE)("div",qu,t[1]||(t[1]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,i.Lk)("p",{class:"mt-2"},"Loading results from blockchain...",-1)]))):0===s.results.length?((0,i.uX)(),(0,i.CE)("div",Gu,t[2]||(t[2]=[(0,i.Lk)("div",{class:"alert alert-info"},[(0,i.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,i.eW)(" No votes have been cast for this position yet. ")],-1)]))):((0,i.uX)(),(0,i.CE)("div",Bu,[(0,i.Lk)("div",ju,[(0,i.Lk)("canvas",{id:`chart-${s.position.position_id}`},null,8,Qu)]),(0,i.Lk)("div",Ku,[(0,i.Lk)("table",Hu,[t[5]||(t[5]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Rank"),(0,i.Lk)("th",null,"Candidate"),(0,i.Lk)("th",null,"Party"),(0,i.Lk)("th",null,"Votes"),(0,i.Lk)("th",null,"Percentage")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.sortedResults,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:e.candidateId},[(0,i.Lk)("td",null,(0,r.v_)(t+1),1),(0,i.Lk)("td",null,(0,r.v_)(l.getCandidateName(e.candidateId)),1),(0,i.Lk)("td",null,(0,r.v_)(l.getCandidateParty(e.candidateId)),1),(0,i.Lk)("td",null,(0,r.v_)(e.votes),1),(0,i.Lk)("td",null,[(0,i.Lk)("div",Ju,[(0,i.Lk)("div",{class:"progress-bar",style:(0,r.Tr)({width:`${e.percentage}%`})},(0,r.v_)(e.percentage.toFixed(1))+"% ",5)])])])))),128))]),(0,i.Lk)("tfoot",null,[(0,i.Lk)("tr",Yu,[t[3]||(t[3]=(0,i.Lk)("td",{colspan:"3"},[(0,i.Lk)("strong",null,"Total")],-1)),(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,(0,r.v_)(l.totalVotes),1)]),t[4]||(t[4]=(0,i.Lk)("td",null,"100%",-1))])])])]),s.winners&&s.winners.length>0?((0,i.uX)(),(0,i.CE)("div",zu,[(0,i.Lk)("strong",null,"Winner"+(0,r.v_)(s.winners.length>1?"s":"")+":",1),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.winners,(e=>((0,i.uX)(),(0,i.CE)("li",{key:e.candidateId},(0,r.v_)(l.getCandidateName(e.candidateId))+" - "+(0,r.v_)(e.votes)+" votes ",1)))),128))])])):(0,i.Q3)("",!0),s.winners.length>1?((0,i.uX)(),(0,i.CE)("p",Zu,t[6]||(t[6]=[(0,i.Lk)("strong",null,"It's a tie!",-1),(0,i.eW)(" You can either proceed with this result or conduct a Runoff Election to find a winner.")]))):(0,i.Q3)("",!0)]))])])])}const tm={name:"ResultDisplay",props:{position:{type:Object,required:!0},candidates:{type:Array,required:!0},results:{type:Array,required:!0},winners:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},computed:{sortedResults(){return[...this.results].sort(((e,t)=>t.votes-e.votes))},totalVotes(){return this.results.reduce(((e,t)=>e+t.votes),0)}},methods:{getCandidateName(e){const t=this.candidates.find((t=>t.candidate_id===e));return t?t.name:"Unknown Candidate"},getCandidateParty(e){const t=this.candidates.find((t=>t.candidate_id===e));return t?t.party_name:"Independent"},renderChart(){if(0===this.results.length)return;const e=document.getElementById(`chart-${this.position.position_id}`);if(!e)return;this.chart&&this.chart.destroy();const t=this.sortedResults.map((e=>this.getCandidateName(e.candidateId))),s=this.sortedResults.map((e=>e.votes));this.chart=new On.Ay(e,{type:"bar",data:{labels:t,datasets:[{label:"Votes",data:s,borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,precision:0}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>{const t=e.dataIndex,s=this.sortedResults[t].votes,a=this.sortedResults[t].percentage.toFixed(1);return`Votes: ${s} (${a}%)`}}}}}})}},mounted(){this.renderChart()},updated(){this.$nextTick((()=>{this.renderChart()}))},beforeUnmount(){this.chart&&this.chart.destroy()}},sm=(0,C.A)(tm,[["render",em],["__scopeId","data-v-6286f263"]]),am=sm,im={name:"ResultsView",components:{ConnectWallet:we,ResultDisplay:am},data(){return{selectedElectionId:null,isLoading:!1,loadingResults:!1,resultsData:{}}},computed:{...(0,E.L8)(["allElections","candidates","isConnected","networkId"]),selectedElection(){return this.selectedElectionId?this.allElections.find((e=>e.electionId===this.selectedElectionId)):null},filteredCandidates(){return this.selectedElectionId?this.candidates.filter((e=>e.election===this.selectedElectionId)):[]},hasResults(){return Object.keys(this.resultsData).length>0&&Object.values(this.resultsData).some((e=>e.length>0))}},methods:{...(0,E.i0)(["fetchElections","fetchCandidates"]),formatDateTime(e){const t=new Date(e);return t.toLocaleString()},truncateAddress(e){return e?e.slice(0,8)+"..."+e.slice(-6):""},getStatusBadgeClass(e){const t={Init:"bg-secondary",Voting:"bg-success",Closed:"bg-danger"};return t[e]||"bg-secondary"},getResultsForPosition(e){return this.resultsData[e]||[]},async loadResults(){if(this.selectedElectionId){this.loadingResults=!0;try{const e=await Le.getResults(this.selectedElectionId);this.resultsData=e.data,Object.keys(this.resultsData).forEach((e=>{const t=this.resultsData[e],s=t.reduce(((e,t)=>e+t.votes),0);this.resultsData[e]=t.map((e=>({...e,percentage:s>0?e.votes/s*100:0})));const a=Math.max(...t.map((e=>e.votes))),i=t.filter((e=>e.votes===a));this.resultsData[e].winners=i}))}catch(e){console.error("Error loading results:",e)}finally{this.loadingResults=!1}}},async selectElection(e){this.selectedElectionId=e,await this.loadResults()}},async created(){this.isLoading=!0;try{await Promise.all([this.fetchElections(),this.fetchCandidates()]),this.allElections.length>0&&(this.selectedElectionId=this.allElections[0].electionId,await this.loadResults())}catch(e){console.error("Error loading data:",e)}finally{this.isLoading=!1}},watch:{selectedElectionId(e){e&&this.loadResults()}}},nm=(0,C.A)(im,[["render",Pu],["__scopeId","data-v-2c36cc46"]]),lm=nm;var om=s(9688);const rm=JSON.parse('{"HV":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"electionAddress","type":"address"},{"indexed":false,"internalType":"string","name":"title","type":"string"},{"indexed":false,"internalType":"uint256","name":"startTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"endTime","type":"uint256"},{"indexed":false,"internalType":"uint256[]","name":"positionIds","type":"uint256[]"}],"name":"ElectionCreated","type":"event"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"elections","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_title","type":"string"},{"internalType":"uint256","name":"_startTime","type":"uint256"},{"internalType":"uint256","name":"_endTime","type":"uint256"},{"internalType":"uint256[]","name":"_positionIds","type":"uint256[]"}],"name":"createElection","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getElectionCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getElection","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllElections","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"}]}'),cm=JSON.parse('{"HV":[{"inputs":[{"internalType":"string","name":"_title","type":"string"},{"internalType":"uint256","name":"_startTime","type":"uint256"},{"internalType":"uint256","name":"_endTime","type":"uint256"},{"internalType":"uint256[]","name":"_positionIds","type":"uint256[]"},{"internalType":"address","name":"_admin","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"positionId","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"candidateId","type":"uint256"}],"name":"CandidateAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"enum Election.ElectionPhase","name":"newPhase","type":"uint8"}],"name":"PhaseChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"voter","type":"address"},{"indexed":true,"internalType":"uint256","name":"positionId","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"candidateId","type":"uint256"}],"name":"VoteCast","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"voter","type":"address"}],"name":"VoterWhitelisted","type":"event"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"candidateVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"endTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"hasVotedForPosition","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isWhitelisted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"phase","outputs":[{"internalType":"enum Election.ElectionPhase","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"positionIds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"positionToCandidates","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"startTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"title","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_voter","type":"address"}],"name":"whitelistVoter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"_voters","type":"address[]"}],"name":"whitelistVoters","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_candidateId","type":"uint256"},{"internalType":"uint256","name":"_positionId","type":"uint256"}],"name":"addCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_positionId","type":"uint256"},{"internalType":"uint256","name":"_candidateId","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"enum Election.ElectionPhase","name":"_phase","type":"uint8"}],"name":"setElectionPhase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_positionId","type":"uint256"}],"name":"getWinner","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_positionId","type":"uint256"},{"internalType":"uint256","name":"_candidateId","type":"uint256"}],"name":"getCandidateVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_positionId","type":"uint256"}],"name":"isValidPosition","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_candidateId","type":"uint256"},{"internalType":"uint256","name":"_positionId","type":"uint256"}],"name":"isCandidateInPosition","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_positionId","type":"uint256"}],"name":"getCandidatesForPosition","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPositionCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_positionId","type":"uint256"}],"name":"getCandidateCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_positionId","type":"uint256"},{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getPositionCandidate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_voter","type":"address"},{"internalType":"uint256","name":"_positionId","type":"uint256"}],"name":"hasVoted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]}');var dm=s(8392);const um="0x1139f65Bc699135D16CF95821b7Bc3678d1f2602",mm={async initWeb3(){if(!window.ethereum)return console.log("MetaMask not detected"),{};{const t=new om.Ay$(window.ethereum);try{await window.ethereum.request({method:"eth_requestAccounts"});const e=await t.eth.net.getId(),s=await window.ethereum.request({method:"eth_accounts"});return s&&s.length>0?{web3:t,address:s[0],networkId:e}:{web3:t,networkId:e}}catch(e){if(console.error("Error initializing Web3:",e),-32002===e.code)throw new Error("Please unlock your MetaMask wallet");if(4001===e.code)throw new Error("Please connect your MetaMask wallet");throw e}}},async connectWallet(){const e=new dm.A({rpc:{5777:"192.168.1.7:7545"},chainId:5777});await e.enable();const t=new om.Ay$(e),s=await t.eth.getAccounts();console.log(s)},async getElectionFactoryContract(e){if(!e)throw new Error("Web3 not initialized");if(!um)throw new Error("Election factory contract address not configured");try{return new e.eth.Contract(rm.HV,um)}catch(t){throw console.error("Error getting ElectionFactory contract:",t),t}},async getElectionContract(e,t){if(!e)throw new Error("Web3 not initialized");try{return new e.eth.Contract(cm.HV,t)}catch(s){throw console.error("Error getting Election contract:",s),s}},async deployElectionContract(e,t,s,a){try{const i={title:String(s.title),startTime:Number(s.start_time),endTime:Number(s.end_time),positions:s.positions.map((e=>e.positionId))};if(!i.title)throw new Error("Election title is required");if(!i.positions.length)throw new Error("At least one position is required");if(i.endTime<=i.startTime)throw new Error("End time must be after start time");const n=await t.methods.createElection(i.title,i.startTime,i.endTime,i.positions).send({from:a,gas:5e6});if(!n.status)throw new Error("Transaction failed or was reverted");const l=n.events?.ElectionCreated;if(!l)throw new Error("ElectionCreated event not found in transaction receipt");const o=l.returnValues.electionAddress;if(!e.utils.isAddress(o))throw new Error("Invalid contract address");const r=new e.eth.Contract(cm.HV,o);return{contract:r,address:o,backendData:{address:o,title:i.title,description:s.description,startTime:i.startTime,endTime:i.endTime,positions:s.positions,status:"Init"}}}catch(i){throw console.error("Deployment error:",i),i}},async addCandidateToContract(e,t,s,a){if(!e)throw new Error("Election contract not initialized");try{console.log("Calling addCandidate with:",{candidateId:t,positionId:s,fromAddress:a});const i=await e.methods.addCandidate(t,s).send({from:a});return console.log("Candidate added to contract successfully:",i),i}catch(i){throw console.error("Error adding candidate to contract:",i),i}},async whitelistVoter(e,t,s){if(!e)throw new Error("Election contract not initialized");try{const a=await e.methods.whitelistVoter(t).send({from:s});return a}catch(a){throw console.error("Error whitelisting voter:",a),a}},async castVote(e,t,s,a){if(!e)throw new Error("Election contract not initialized");try{const i=await e.methods.vote(t,s).send({from:a});return i}catch(i){throw console.error("Error casting vote:",i),i}},async getElectionResults(e){if(!e)throw new Error("Election contract not initialized");try{console.log("Election contract received at Web.js",e);const t=await e.methods.getPositionCount().call();console.log("Positions Count: ",t);const s=[];for(let i=0;i<t;i++){const t=await e.methods.positionIds(i).call();console.log("position IDs: ",t),s.push(parseInt(t))}console.log("Positions: ",s);const a={};for(const i of s){const t=await e.methods.getCandidateCount(i).call(),s=[];for(let a=0;a<t;a++){const t=await e.methods.getPositionCandidate(i,a).call();console.log("Candidate Ids: ",t);const n=await e.methods.getCandidateVotes(i,t).call();console.log("Votes: ",n),s.push({candidateId:parseInt(t),votes:parseInt(n)}),console.log("Position Results: ",s)}a[i]=s}return console.log(a),a}catch(t){throw console.error("Error getting election results:",t),t}},async validatePositionsHaveCandidates(e){const t=await e.methods.getPositionCount().call();for(let s=0;s<t;s++){const t=await e.methods.getCandidateCount(s).call();if(0===t)throw new Error(`Position ${s} does not have any candidates.`)}},async setElectionPhase(e,t,s){if(!e)throw new Error("Election contract not initialized");const a={Init:0,Voting:1,Closed:2};if(!(t in a))throw new Error("Invalid election phase");try{const i=await e.methods.setElectionPhase(a[t]).send({from:s});return i}catch(i){throw console.error("Error setting election phase:",i),i}}},hm=mm,pm=(0,E.y$)({state:{user:null,isAdmin:!1,isLoggedIn:!1,wallet:null,web3:null,contracts:{electionFactory:null,elections:{}},elections:[],currentElection:null,candidates:[],parties:[],voters:[],loading:!1,error:null,networkId:null},getters:{isLoggedIn:e=>!!e.user,isAdmin:e=>e.isAdmin,currentUser:e=>e.user,walletAddress:e=>e.wallet,hasMetaMask:e=>!!window.ethereum,allElections:e=>e.elections,activeElections:e=>e.elections.filter((e=>"Voting"===e.status&&new Date(e.endTime)>new Date)),pastElections:e=>e.elections.filter((e=>"Closed"===e.status||new Date(e.endTime)<new Date)),candidates:e=>e.candidates,allParties:e=>e.parties,currentElection:e=>e.currentElection,isConnected:e=>!!e.web3&&!!e.wallet,networkId:e=>e.networkId,voters:e=>e.voters},mutations:{SET_USER(e,t){e.user=t,e.isLoggedIn=!!t,e.isAdmin=!!t&&t.is_admin},SET_WALLET(e,t){e.wallet=t},SET_WEB3(e,t){e.web3=t},SET_CONTRACT(e,{name:t,contract:s}){"electionFactory"===t?e.contracts.electionFactory=s:e.contracts.elections[t]=s},SET_NETWORK_ID(e,t){e.networkId=t},SET_ELECTIONS(e,t){e.elections=t},SET_CURRENT_ELECTION(e,t){e.currentElection=t},SET_CANDIDATES(e,t){e.candidates=t},SET_PARTIES(e,t){e.parties=t},SET_VOTERS(e,t){e.voters=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_ERROR(e){e.error=null},UPDATE_ELECTION_STATUS(e,{electionId:t,status:s}){const a=e.elections.find((e=>e.electionId===t));a&&(a.status=s)}},actions:{async register({commit:e},t){try{e("SET_LOADING",!0);const s=await Le.register(t);return s.data&&s.data.token&&(console.log("User registered Successfully."),localStorage.setItem("token",s.data.token),e("SET_USER",s.data.user)),e("SET_LOADING",!1),s.data}catch(s){throw e("SET_LOADING",!1),e("SET_ERROR",s.response?.data||"Registration failed"),s}},async login({commit:e},t){try{e("SET_LOADING",!0);const s=await Le.login(t);s&&console.log("User logged in Successfully."),window.location.href="/";const{token:a,user:i}=s.data;if(!a)throw new Error("No token received from server");return localStorage.setItem("token",a),e("SET_USER",i),e("SET_LOADING",!1),s.data}catch(s){throw e("SET_LOADING",!1),e("SET_ERROR",s.response?.data||"Login failed"),s}},async connectWallet({commit:e,dispatch:t}){try{e("SET_LOADING",!0);const{web3:s,address:a,networkId:i}=await hm.connectWallet();return e("SET_WEB3",s),e("SET_WALLET",a),e("SET_NETWORK_ID",i),await t("initContracts"),window.location.reload(!0),e("SET_LOADING",!1),a}catch(s){throw e("SET_LOADING",!1),e("SET_ERROR",s.message||"Failed to connect wallet"),s}},async initWeb3({commit:e,dispatch:t}){if(window.ethereum)try{const{web3:s,address:a,networkId:i}=await hm.initWeb3();s&&a&&(e("SET_WEB3",s),e("SET_WALLET",a),e("SET_NETWORK_ID",i),await t("initContracts"),t("startElectionPhaseWatcher"))}catch(s){console.error("Web3 initialization error:",s)}},async initContracts({commit:e,state:t}){if(t.web3)try{const s=await hm.getElectionFactoryContract(t.web3);e("SET_CONTRACT",{name:"electionFactory",contract:s})}catch(s){console.error("Contract initialization error:",s),e("SET_ERROR","Failed to initialize blockchain contracts")}},async checkAuthState({commit:e}){try{const t=localStorage.getItem("token");if(t){const t=await Le.getCurrentUser();e("SET_USER",t.data)}}catch(t){localStorage.removeItem("token"),e("SET_USER",null)}},async logout({commit:e}){localStorage.removeItem("token"),e("SET_USER",null),e("SET_WALLET",null),e("SET_ELECTIONS",[]),e("SET_CURRENT_ELECTION",null),e("SET_CANDIDATES",[]),e("SET_VOTERS",[]),await vm.push("/elections")},async fetchElections({commit:e}){try{e("SET_LOADING",!0);const t=await Le.getElections();t&&console.log("Received Election Data received from the backend successfully. ",t.data),e("SET_ELECTIONS",t.data),e("SET_LOADING",!1)}catch(t){e("SET_LOADING",!1),e("SET_ERROR",t.response?.data||"Failed to fetch elections")}},async fetchElection({commit:e},t){try{e("SET_LOADING",!0);const s=await Le.getElection(t);console.log("Election data for ID: ",t," received from backend successfully. ",s.data),e("SET_CURRENT_ELECTION",s.data);const a=await Le.getCandidatesByElection(t);console.log("Candidates Data received from Backend successfully. ",a),e("SET_CANDIDATES",a.data),e("SET_LOADING",!1)}catch(s){e("SET_LOADING",!1),e("SET_ERROR",s.response?.data||"Failed to fetch election details")}},async createElection({commit:e,state:t,dispatch:s},a){try{if(e("SET_LOADING",!0),!t.web3||!t.contracts.electionFactory||!t.wallet)throw new Error("Web3 or contracts not initialized");const i=await hm.deployElectionContract(t.web3,t.contracts.electionFactory,a,t.wallet);if(!i||!i.address)throw new Error("Failed to deploy election contract");console.log("Election Deployed to Blockchain Successfully. ",i);const n=await Le.createElection(i.backendData);return n&&console.log("Election Saved in the backend Successfully. ",n.data),e("SET_CONTRACT",{name:i.address,contract:i.contract}),await s("fetchElections"),s("startElectionPhaseWatcher"),e("SET_LOADING",!1),n.data}catch(i){e("SET_LOADING",!1);const t=i.response?.data?.message||i.message||"Failed to create election";throw e("SET_ERROR",t),i}},async updateElection({commit:e,state:t,dispatch:s},{id:a,data:i}){try{e("SET_LOADING",!0);const n=t.elections[0].contractAddress;i.contract_address=n;const l=await Le.updateElection(a,i);return l&&console.log("Election updated in the backend Successfully. ",l),await s("fetchElections"),e("SET_LOADING",!1),l.data}catch(n){throw e("SET_LOADING",!1),e("SET_ERROR",n.response?.data||"Failed to update election"),n}},async fetchCandidates({commit:e}){try{e("SET_LOADING",!0);const t=await Le.getCandidates();t&&console.log("Candidates data received from the backend succesfully. ",t.data),e("SET_CANDIDATES",t.data),e("SET_LOADING",!1)}catch(t){e("SET_LOADING",!1),e("SET_ERROR",t.response?.data||"Failed to fetch candidates")}},async fetchParties({commit:e}){try{e("SET_LOADING",!0);const t=await Le.getParties();e("SET_PARTIES",t.data),e("SET_LOADING",!1)}catch(t){e("SET_LOADING",!1),e("SET_ERROR",t.response?.data||"Failed to fetch parties")}},async createCandidate({commit:e,dispatch:t,state:s},a){const{electionId:i,candidateId:n,positionId:l}=a;await t("fetchElection",i),console.log("Candidate Data:",a),console.log("Election ID:",i),console.log("Candidate ID:",n),console.log("Position ID:",l);try{if(e("SET_LOADING",!0),s.currentElection&&s.currentElection.contractAddress){const e=await hm.getElectionContract(s.web3,s.currentElection.contractAddress);if(e){console.log("Adding candidate to contract:",{candidateId:n,positionId:l});const t=await hm.addCandidateToContract(e,n,l,s.wallet);if(!t||!t.transactionHash)throw new Error("Failed to add Candidate to Contract");console.log("Candidate deployed to contract successfully. ",t)}}const i=await Le.createCandidate(a);return i&&console.log("Candidate Saved in the backend successfully. ",i.data),await t("fetchCandidates"),e("SET_LOADING",!1),i.data}catch(o){throw e("SET_LOADING",!1),e("SET_ERROR",o.response?.data||o.message||"Failed to create candidate"),o}},async updateCandidate({commit:e,dispatch:t,state:s},{id:a,data:i}){try{e("SET_LOADING",!0);const s=await Le.updateCandidate(a,i);return console.log("Candidate updated in the backend successfully. ",s.data),await t("fetchCandidates"),e("SET_LOADING",!1),s.data}catch(n){throw e("SET_LOADING",!1),e("SET_ERROR",n.response?.data||n.message||"Failed to update candidate"),n}},async fetchVoters({commit:e}){try{e("SET_LOADING",!0);const t=await Le.getVoters();t&&console.log("Voters data received from backend successfully. ",t.data),e("SET_VOTERS",t.data),e("SET_LOADING",!1)}catch(t){e("SET_LOADING",!1),e("SET_ERROR",t.response?.data||"Failed to fetch voters")}},async whitelistVoter({commit:e,state:t},{electionId:s,voterAddress:a}){try{e("SET_LOADING",!0),console.log("Whitelist payload:",{electionId:s,voterAddress:a});const i=t.elections.find((e=>e.electionId===s));if(i&&i.contractAddress){const e=await hm.getElectionContract(t.web3,i.contractAddress);if(e){const n=await hm.whitelistVoter(e,a,t.wallet);console.log("Voter whitelisted for ",i.title," in the contract successfully. ",n);const l=await Le.whitelistVoter(s,a);l&&console.log("Voter whitelisted for ",i.title," in the backend successfully. ",l.data.message),window.location.href="/admin/voters"}}return e("SET_LOADING",!1),!0}catch(i){throw e("SET_LOADING",!1),e("SET_ERROR",i.message||"Failed to whitelist voter"),i}},async castVote({commit:e,state:t},{electionId:s,positionId:a,candidateId:i}){try{e("SET_LOADING",!0);const n=t.elections.find((e=>e.electionId===s));if(!n||!n.contractAddress)throw new Error("Election not found or invalid");console.log("election in state: ",n),console.log("position ID",a);const l=await Le.getCandidatesByElection(s);console.log("candidates: ",l);const o=l.data.find((e=>e.candidate_id===i)).id;console.log("Candidate ID: ",o);let r=t.contracts.elections[n.contractAddress];r||(r=await hm.getElectionContract(t.web3,n.contractAddress),console.log("Election Contract received Successfully. ",r),e("SET_CONTRACT",{name:n.contractAddress,contract:r}));const c=await hm.castVote(r,a,i,t.wallet);console.log("Vote Casted via the smart contract successfully. ",c);const d=await Le.recordVote({election:s,position:a,candidate:o,wallet:t.wallet,transaction_hash:c.transactionHash});return d&&console.log("Vote Recorded in the backend Successfully. ",d.data),e("SET_LOADING",!1),c}catch(n){throw e("SET_LOADING",!1),e("SET_ERROR",n.message||"Failed to cast vote"),n}},async fetchResults({commit:e,state:t},s){try{e("SET_LOADING",!0);const a=t.elections.find((e=>e.electionId===s));if(!a||!a.contractAddress)throw new Error("Election not found or invalid");const i=await hm.getElectionContract(t.web3,a.contractAddress);console.log("Election Contract received Successfully. ",i),e("SET_CONTRACT",{name:a.contractAddress,contract:i});const n=await hm.getElectionResults(i);return n&&console.log("Election result received from the contract successfully. ",n),e("SET_LOADING",!1),results}catch(a){throw e("SET_LOADING",!1),e("SET_ERROR",a.message||"Failed to fetch results"),a}},async updateElectionPhase({commit:e,state:t},{electionId:s,phase:a}){try{e("SET_LOADING",!0);const i=t.elections.find((e=>e.electionId===s));if(!i||!i.contractAddress)throw new Error("Election not found or invalid");let n=t.contracts.elections[i.contractAddress];n||(n=await hm.getElectionContract(t.web3,i.contractAddress),console.log("Election Contract received Successfully. ",n),e("SET_CONTRACT",{name:i.contractAddress,contract:n}));const l=await hm.setElectionPhase(n,a,t.wallet);l&&console.log("Election Phase updated in the contract successfully. ",l);const o=await Le.updateElectionPhase(s,a);return o&&console.log("Election Phase updated in the backend successfully. ",o),window.location.reload(),e("UPDATE_ELECTION_STATUS",{electionId:s,status:a}),e("SET_LOADING",!1),!0}catch(i){throw e("SET_LOADING",!1),e("SET_ERROR",i.message||"Failed to update election phase"),i}},async startElectionPhaseWatcher({state:e,dispatch:t}){for(const s of e.elections){const e=new Date;if(s.startTime&&new Date(s.startTime)>e&&"Init"===s.status){const a=new Date(s.startTime)-e;setTimeout((async()=>{console.log(`Updating phase for election: ${s.title} to "Voting"`);try{const e=await Le.getCandidatesByElection(s.electionId);if(!e||0===e.length)throw new Error("All positions must have at least one candidate");await t("updateElectionPhase",{electionId:s.electionId,phase:"Voting"})}catch(e){console.error(`Failed to update phase for election: ${s.title}`,e)}}),a)}if(s.endTime&&new Date(s.endTime)>e&&"Voting"===s.status){const a=new Date(s.endTime)-e;setTimeout((async()=>{console.log(`Updating phase for election: ${s.title} to "Closed"`);try{await t("updateElectionPhase",{electionId:s.electionId,phase:"Closed"})}catch(e){console.error(`Failed to update phase for election: ${s.title}`,e)}}),a)}}},async fetchElectoralRoll({commit:e},t){const s=await Le.getElectoralRoll(t);return console.log("Electoral Roll: ",s),s.data},async addElectoralRollEntry({commit:e},t){await Le.addElectoralRollEntry(t)},async updateElectoralRollEntry({commit:e},t){await Le.updateElectoralRollEntry(t)},async deleteElectoralRollEntry({commit:e},t){await Le.deleteElectoralRollEntry(t)}}}),fm=[{path:"/",name:"Home",component:_e},{path:"/register",name:"Register",component:Je},{path:"/login",name:"Login",component:mt},{path:"/profile",name:"UserProfile",component:ys,meta:{requiresAuth:!0}},{path:"/elections",name:"Elections",component:Zs,meta:{requiresAuth:!0}},{path:"/elections/:id",name:"ElectionDetail",component:Qa,meta:{requiresAuth:!0}},{path:"/elections/:id/electoral-roll",name:"ElectionElectoralRoll",component:oi,meta:{requiresAuth:!0}},{path:"/elections/:id/vote",name:"VotingPage",component:zi,meta:{requiresAuth:!0}},{path:"/elections/:id/results",name:"ElectionResults",component:qn,meta:{requiresAuth:!0}},{path:"/analytics",name:"AnalyticsDashboard",component:Ml,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin",name:"Dashboard",component:bo,meta:{requiresAdmin:!0},children:[{path:"elections",name:"ElectionManagement",component:Fr},{path:"candidates",name:"CandidateManagement",component:fd},{path:"voters",name:"VoterManagement",component:nu},{path:"results",name:"ResultsView",component:lm},{path:"electoral-roll",name:"ElectoralRollManagement",component:nc}]}],km=(0,$.aE)({history:(0,$.LA)("/"),routes:fm});km.beforeEach(((e,t,s)=>{const a=pm.getters.isLoggedIn,i=pm.getters.isAdmin;e.matched.some((e=>e.meta.requiresAuth))&&!a||e.matched.some((e=>e.meta.requiresAdmin))&&!i?s("/"):s()}));const vm=km;s(8736);const bm=(0,a.Ef)(U);bm.use(vm),bm.use(pm),bm.mount("#app")},9169:()=>{},9778:()=>{}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,(()=>{s.amdO={}})(),(()=>{var e=[];s.O=(t,a,i,n)=>{if(!a){var l=1/0;for(d=0;d<e.length;d++){for(var[a,i,n]=e[d],o=!0,r=0;r<a.length;r++)(!1&n||l>=n)&&Object.keys(s.O).every((e=>s.O[e](a[r])))?a.splice(r--,1):(o=!1,n<l&&(l=n));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}})(),(()=>{s.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return s.d(t,{a:t}),t}})(),(()=>{s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{var e={524:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var i,n,[l,o,r]=a,c=0;if(l.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(r)var d=r(s)}for(t&&t(a);c<l.length;c++)n=l[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self["webpackChunkworkspace"]=self["webpackChunkworkspace"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=s.O(void 0,[504],(()=>s(9130)));a=s.O(a)})();
//# sourceMappingURL=app.a5ebdd5d.js.map